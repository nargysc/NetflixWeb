/*! For license information please see main.ac5b6d36.js.LICENSE.txt */
(()=>{var e={219:(e,t,n)=>{"use strict";var r=n(763),i={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},s={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},o={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},a={};function c(e){return r.isMemo(e)?o:a[e.$$typeof]||i}a[r.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},a[r.Memo]=o;var l=Object.defineProperty,u=Object.getOwnPropertyNames,h=Object.getOwnPropertySymbols,d=Object.getOwnPropertyDescriptor,f=Object.getPrototypeOf,p=Object.prototype;e.exports=function e(t,n,r){if("string"!==typeof n){if(p){var i=f(n);i&&i!==p&&e(t,i,r)}var o=u(n);h&&(o=o.concat(h(n)));for(var a=c(t),m=c(n),g=0;g<o.length;++g){var y=o[g];if(!s[y]&&(!r||!r[y])&&(!m||!m[y])&&(!a||!a[y])){var v=d(n,y);try{l(t,y,v)}catch(w){}}}}return t}},983:(e,t)=>{"use strict";var n="function"===typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,i=n?Symbol.for("react.portal"):60106,s=n?Symbol.for("react.fragment"):60107,o=n?Symbol.for("react.strict_mode"):60108,a=n?Symbol.for("react.profiler"):60114,c=n?Symbol.for("react.provider"):60109,l=n?Symbol.for("react.context"):60110,u=n?Symbol.for("react.async_mode"):60111,h=n?Symbol.for("react.concurrent_mode"):60111,d=n?Symbol.for("react.forward_ref"):60112,f=n?Symbol.for("react.suspense"):60113,p=n?Symbol.for("react.suspense_list"):60120,m=n?Symbol.for("react.memo"):60115,g=n?Symbol.for("react.lazy"):60116,y=n?Symbol.for("react.block"):60121,v=n?Symbol.for("react.fundamental"):60117,w=n?Symbol.for("react.responder"):60118,b=n?Symbol.for("react.scope"):60119;function _(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case u:case h:case s:case a:case o:case f:return e;default:switch(e=e&&e.$$typeof){case l:case d:case g:case m:case c:return e;default:return t}}case i:return t}}}function S(e){return _(e)===h}t.AsyncMode=u,t.ConcurrentMode=h,t.ContextConsumer=l,t.ContextProvider=c,t.Element=r,t.ForwardRef=d,t.Fragment=s,t.Lazy=g,t.Memo=m,t.Portal=i,t.Profiler=a,t.StrictMode=o,t.Suspense=f,t.isAsyncMode=function(e){return S(e)||_(e)===u},t.isConcurrentMode=S,t.isContextConsumer=function(e){return _(e)===l},t.isContextProvider=function(e){return _(e)===c},t.isElement=function(e){return"object"===typeof e&&null!==e&&e.$$typeof===r},t.isForwardRef=function(e){return _(e)===d},t.isFragment=function(e){return _(e)===s},t.isLazy=function(e){return _(e)===g},t.isMemo=function(e){return _(e)===m},t.isPortal=function(e){return _(e)===i},t.isProfiler=function(e){return _(e)===a},t.isStrictMode=function(e){return _(e)===o},t.isSuspense=function(e){return _(e)===f},t.isValidElementType=function(e){return"string"===typeof e||"function"===typeof e||e===s||e===h||e===a||e===o||e===f||e===p||"object"===typeof e&&null!==e&&(e.$$typeof===g||e.$$typeof===m||e.$$typeof===c||e.$$typeof===l||e.$$typeof===d||e.$$typeof===v||e.$$typeof===w||e.$$typeof===b||e.$$typeof===y)},t.typeOf=_},763:(e,t,n)=>{"use strict";e.exports=n(983)},497:(e,t,n)=>{"use strict";var r=n(218);function i(){}function s(){}s.resetWarningCache=i,e.exports=function(){function e(e,t,n,i,s,o){if(o!==r){var a=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw a.name="Invariant Violation",a}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:s,resetWarningCache:i};return n.PropTypes=n,n}},173:(e,t,n)=>{e.exports=n(497)()},218:e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},730:(e,t,n)=>{"use strict";var r=n(43),i=n(853);function s(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,a={};function c(e,t){l(e,t),l(e+"Capture",t)}function l(e,t){for(a[e]=t,e=0;e<t.length;e++)o.add(t[e])}var u=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),h=Object.prototype.hasOwnProperty,d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},p={};function m(e,t,n,r,i,s,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=o}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){g[e]=new m(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];g[t]=new m(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){g[e]=new m(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){g[e]=new m(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){g[e]=new m(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){g[e]=new m(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){g[e]=new m(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){g[e]=new m(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){g[e]=new m(e,5,!1,e.toLowerCase(),null,!1,!1)}));var y=/[\-:]([a-z])/g;function v(e){return e[1].toUpperCase()}function w(e,t,n,r){var i=g.hasOwnProperty(t)?g[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!h.call(p,e)||!h.call(f,e)&&(d.test(e)?p[e]=!0:(f[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(y,v);g[t]=new m(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(y,v);g[t]=new m(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(y,v);g[t]=new m(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!1,!1)})),g.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!0,!0)}));var b=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,_=Symbol.for("react.element"),S=Symbol.for("react.portal"),E=Symbol.for("react.fragment"),I=Symbol.for("react.strict_mode"),T=Symbol.for("react.profiler"),k=Symbol.for("react.provider"),C=Symbol.for("react.context"),x=Symbol.for("react.forward_ref"),N=Symbol.for("react.suspense"),A=Symbol.for("react.suspense_list"),P=Symbol.for("react.memo"),O=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var R=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var D=Symbol.iterator;function L(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=D&&e[D]||e["@@iterator"])?e:null}var M,F=Object.assign;function U(e){if(void 0===M)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);M=t&&t[1]||""}return"\n"+M+e}var V=!1;function j(e,t){if(!e||V)return"";V=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(l){var r=l}Reflect.construct(e,[],t)}else{try{t.call()}catch(l){r=l}e.call(t.prototype)}else{try{throw Error()}catch(l){r=l}e()}}catch(l){if(l&&r&&"string"===typeof l.stack){for(var i=l.stack.split("\n"),s=r.stack.split("\n"),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(1!==o||1!==a)do{if(o--,0>--a||i[o]!==s[a]){var c="\n"+i[o].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}}while(1<=o&&0<=a);break}}}finally{V=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?U(e):""}function z(e){switch(e.tag){case 5:return U(e.type);case 16:return U("Lazy");case 13:return U("Suspense");case 19:return U("SuspenseList");case 0:case 2:case 15:return e=j(e.type,!1);case 11:return e=j(e.type.render,!1);case 1:return e=j(e.type,!0);default:return""}}function B(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case E:return"Fragment";case S:return"Portal";case T:return"Profiler";case I:return"StrictMode";case N:return"Suspense";case A:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case C:return(e.displayName||"Context")+".Consumer";case k:return(e._context.displayName||"Context")+".Provider";case x:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case P:return null!==(t=e.displayName||null)?t:B(e.type)||"Memo";case O:t=e._payload,e=e._init;try{return B(e(t))}catch(n){}}return null}function q(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return B(t);case 8:return t===I?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function K(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function G(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function W(e){e._valueTracker||(e._valueTracker=function(e){var t=G(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,s.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function H(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=G(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Q(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Y(e,t){var n=t.checked;return F({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function $(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=K(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function J(e,t){null!=(t=t.checked)&&w(e,"checked",t,!1)}function X(e,t){J(e,t);var n=K(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,K(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&Q(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+K(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(s(91));return F({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(s(92));if(te(n)){if(1<n.length)throw Error(s(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:K(n)}}function se(e,t){var n=K(t.value),r=K(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function ae(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ce(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ae(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var le,ue,he=(ue=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((le=le||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=le.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return ue(e,t)}))}:ue);function de(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var fe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function me(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||fe.hasOwnProperty(e)&&fe[e]?(""+t).trim():t+"px"}function ge(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=me(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(fe).forEach((function(e){pe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),fe[t]=fe[e]}))}));var ye=F({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ve(e,t){if(t){if(ye[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(s(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(s(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(s(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(s(62))}}function we(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var be=null;function _e(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Se=null,Ee=null,Ie=null;function Te(e){if(e=wi(e)){if("function"!==typeof Se)throw Error(s(280));var t=e.stateNode;t&&(t=_i(t),Se(e.stateNode,e.type,t))}}function ke(e){Ee?Ie?Ie.push(e):Ie=[e]:Ee=e}function Ce(){if(Ee){var e=Ee,t=Ie;if(Ie=Ee=null,Te(e),t)for(e=0;e<t.length;e++)Te(t[e])}}function xe(e,t){return e(t)}function Ne(){}var Ae=!1;function Pe(e,t,n){if(Ae)return e(t,n);Ae=!0;try{return xe(e,t,n)}finally{Ae=!1,(null!==Ee||null!==Ie)&&(Ne(),Ce())}}function Oe(e,t){var n=e.stateNode;if(null===n)return null;var r=_i(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(s(231,t,typeof n));return n}var Re=!1;if(u)try{var De={};Object.defineProperty(De,"passive",{get:function(){Re=!0}}),window.addEventListener("test",De,De),window.removeEventListener("test",De,De)}catch(ue){Re=!1}function Le(e,t,n,r,i,s,o,a,c){var l=Array.prototype.slice.call(arguments,3);try{t.apply(n,l)}catch(u){this.onError(u)}}var Me=!1,Fe=null,Ue=!1,Ve=null,je={onError:function(e){Me=!0,Fe=e}};function ze(e,t,n,r,i,s,o,a,c){Me=!1,Fe=null,Le.apply(je,arguments)}function Be(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function qe(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Ke(e){if(Be(e)!==e)throw Error(s(188))}function Ge(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=Be(e)))throw Error(s(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return Ke(i),e;if(o===r)return Ke(i),t;o=o.sibling}throw Error(s(188))}if(n.return!==r.return)n=i,r=o;else{for(var a=!1,c=i.child;c;){if(c===n){a=!0,n=i,r=o;break}if(c===r){a=!0,r=i,n=o;break}c=c.sibling}if(!a){for(c=o.child;c;){if(c===n){a=!0,n=o,r=i;break}if(c===r){a=!0,r=o,n=i;break}c=c.sibling}if(!a)throw Error(s(189))}}if(n.alternate!==r)throw Error(s(190))}if(3!==n.tag)throw Error(s(188));return n.stateNode.current===n?e:t}(e))?We(e):null}function We(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=We(e);if(null!==t)return t;e=e.sibling}return null}var He=i.unstable_scheduleCallback,Qe=i.unstable_cancelCallback,Ye=i.unstable_shouldYield,$e=i.unstable_requestPaint,Je=i.unstable_now,Xe=i.unstable_getCurrentPriorityLevel,Ze=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,st=null;var ot=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(at(e)/ct|0)|0},at=Math.log,ct=Math.LN2;var lt=64,ut=4194304;function ht(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function dt(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,s=e.pingedLanes,o=268435455&n;if(0!==o){var a=o&~i;0!==a?r=ht(a):0!==(s&=o)&&(r=ht(s))}else 0!==(o=n&~i)?r=ht(o):0!==s&&(r=ht(s));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(s=t&-t)||16===i&&0!==(4194240&s)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-ot(t)),r|=e[n],t&=~i;return r}function ft(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function mt(){var e=lt;return 0===(4194240&(lt<<=1))&&(lt=64),e}function gt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function yt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ot(t)]=n}function vt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ot(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var wt=0;function bt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var _t,St,Et,It,Tt,kt=!1,Ct=[],xt=null,Nt=null,At=null,Pt=new Map,Ot=new Map,Rt=[],Dt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Lt(e,t){switch(e){case"focusin":case"focusout":xt=null;break;case"dragenter":case"dragleave":Nt=null;break;case"mouseover":case"mouseout":At=null;break;case"pointerover":case"pointerout":Pt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ot.delete(t.pointerId)}}function Mt(e,t,n,r,i,s){return null===e||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},null!==t&&(null!==(t=wi(t))&&St(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Ft(e){var t=vi(e.target);if(null!==t){var n=Be(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=qe(n)))return e.blockedOn=t,void Tt(e.priority,(function(){Et(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ut(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Yt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=wi(n))&&St(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);be=r,n.target.dispatchEvent(r),be=null,t.shift()}return!0}function Vt(e,t,n){Ut(e)&&n.delete(t)}function jt(){kt=!1,null!==xt&&Ut(xt)&&(xt=null),null!==Nt&&Ut(Nt)&&(Nt=null),null!==At&&Ut(At)&&(At=null),Pt.forEach(Vt),Ot.forEach(Vt)}function zt(e,t){e.blockedOn===t&&(e.blockedOn=null,kt||(kt=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,jt)))}function Bt(e){function t(t){return zt(t,e)}if(0<Ct.length){zt(Ct[0],e);for(var n=1;n<Ct.length;n++){var r=Ct[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==xt&&zt(xt,e),null!==Nt&&zt(Nt,e),null!==At&&zt(At,e),Pt.forEach(t),Ot.forEach(t),n=0;n<Rt.length;n++)(r=Rt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Rt.length&&null===(n=Rt[0]).blockedOn;)Ft(n),null===n.blockedOn&&Rt.shift()}var qt=b.ReactCurrentBatchConfig,Kt=!0;function Gt(e,t,n,r){var i=wt,s=qt.transition;qt.transition=null;try{wt=1,Ht(e,t,n,r)}finally{wt=i,qt.transition=s}}function Wt(e,t,n,r){var i=wt,s=qt.transition;qt.transition=null;try{wt=4,Ht(e,t,n,r)}finally{wt=i,qt.transition=s}}function Ht(e,t,n,r){if(Kt){var i=Yt(e,t,n,r);if(null===i)Kr(e,t,r,Qt,n),Lt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return xt=Mt(xt,e,t,n,r,i),!0;case"dragenter":return Nt=Mt(Nt,e,t,n,r,i),!0;case"mouseover":return At=Mt(At,e,t,n,r,i),!0;case"pointerover":var s=i.pointerId;return Pt.set(s,Mt(Pt.get(s)||null,e,t,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Ot.set(s,Mt(Ot.get(s)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Lt(e,r),4&t&&-1<Dt.indexOf(e)){for(;null!==i;){var s=wi(i);if(null!==s&&_t(s),null===(s=Yt(e,t,n,r))&&Kr(e,t,r,Qt,n),s===i)break;i=s}null!==i&&r.stopPropagation()}else Kr(e,t,r,null,n)}}var Qt=null;function Yt(e,t,n,r){if(Qt=null,null!==(e=vi(e=_e(r))))if(null===(t=Be(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=qe(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Qt=e,null}function $t(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Xe()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Jt=null,Xt=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=Xt,r=n.length,i="value"in Jt?Jt.value:Jt.textContent,s=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[s-t];t++);return Zt=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function sn(e){function t(t,n,r,i,s){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=s,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return F(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var on,an,cn,ln={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},un=sn(ln),hn=F({},ln,{view:0,detail:0}),dn=sn(hn),fn=F({},hn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Tn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==cn&&(cn&&"mousemove"===e.type?(on=e.screenX-cn.screenX,an=e.screenY-cn.screenY):an=on=0,cn=e),on)},movementY:function(e){return"movementY"in e?e.movementY:an}}),pn=sn(fn),mn=sn(F({},fn,{dataTransfer:0})),gn=sn(F({},hn,{relatedTarget:0})),yn=sn(F({},ln,{animationName:0,elapsedTime:0,pseudoElement:0})),vn=F({},ln,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),wn=sn(vn),bn=sn(F({},ln,{data:0})),_n={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Sn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},En={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function In(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=En[e])&&!!t[e]}function Tn(){return In}var kn=F({},hn,{key:function(e){if(e.key){var t=_n[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?Sn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Tn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Cn=sn(kn),xn=sn(F({},fn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Nn=sn(F({},hn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Tn})),An=sn(F({},ln,{propertyName:0,elapsedTime:0,pseudoElement:0})),Pn=F({},fn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),On=sn(Pn),Rn=[9,13,27,32],Dn=u&&"CompositionEvent"in window,Ln=null;u&&"documentMode"in document&&(Ln=document.documentMode);var Mn=u&&"TextEvent"in window&&!Ln,Fn=u&&(!Dn||Ln&&8<Ln&&11>=Ln),Un=String.fromCharCode(32),Vn=!1;function jn(e,t){switch(e){case"keyup":return-1!==Rn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function zn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Bn=!1;var qn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Kn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!qn[e.type]:"textarea"===t}function Gn(e,t,n,r){ke(r),0<(t=Wr(t,"onChange")).length&&(n=new un("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Wn=null,Hn=null;function Qn(e){Ur(e,0)}function Yn(e){if(H(bi(e)))return e}function $n(e,t){if("change"===e)return t}var Jn=!1;if(u){var Xn;if(u){var Zn="oninput"in document;if(!Zn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Zn="function"===typeof er.oninput}Xn=Zn}else Xn=!1;Jn=Xn&&(!document.documentMode||9<document.documentMode)}function tr(){Wn&&(Wn.detachEvent("onpropertychange",nr),Hn=Wn=null)}function nr(e){if("value"===e.propertyName&&Yn(Hn)){var t=[];Gn(t,Hn,e,_e(e)),Pe(Qn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Hn=n,(Wn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Yn(Hn)}function sr(e,t){if("click"===e)return Yn(t)}function or(e,t){if("input"===e||"change"===e)return Yn(t)}var ar="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function cr(e,t){if(ar(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!h.call(t,i)||!ar(e[i],t[i]))return!1}return!0}function lr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ur(e,t){var n,r=lr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=lr(r)}}function hr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?hr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function dr(){for(var e=window,t=Q();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=Q((e=t.contentWindow).document)}return t}function fr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pr(e){var t=dr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&hr(n.ownerDocument.documentElement,n)){if(null!==r&&fr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=void 0===r.end?s:Math.min(r.end,i),!e.extend&&s>r&&(i=r,r=s,s=i),i=ur(n,s);var o=ur(n,r);i&&o&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),s>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var mr=u&&"documentMode"in document&&11>=document.documentMode,gr=null,yr=null,vr=null,wr=!1;function br(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;wr||null==gr||gr!==Q(r)||("selectionStart"in(r=gr)&&fr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},vr&&cr(vr,r)||(vr=r,0<(r=Wr(yr,"onSelect")).length&&(t=new un("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=gr)))}function _r(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Sr={animationend:_r("Animation","AnimationEnd"),animationiteration:_r("Animation","AnimationIteration"),animationstart:_r("Animation","AnimationStart"),transitionend:_r("Transition","TransitionEnd")},Er={},Ir={};function Tr(e){if(Er[e])return Er[e];if(!Sr[e])return e;var t,n=Sr[e];for(t in n)if(n.hasOwnProperty(t)&&t in Ir)return Er[e]=n[t];return e}u&&(Ir=document.createElement("div").style,"AnimationEvent"in window||(delete Sr.animationend.animation,delete Sr.animationiteration.animation,delete Sr.animationstart.animation),"TransitionEvent"in window||delete Sr.transitionend.transition);var kr=Tr("animationend"),Cr=Tr("animationiteration"),xr=Tr("animationstart"),Nr=Tr("transitionend"),Ar=new Map,Pr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Or(e,t){Ar.set(e,t),c(t,[e])}for(var Rr=0;Rr<Pr.length;Rr++){var Dr=Pr[Rr];Or(Dr.toLowerCase(),"on"+(Dr[0].toUpperCase()+Dr.slice(1)))}Or(kr,"onAnimationEnd"),Or(Cr,"onAnimationIteration"),Or(xr,"onAnimationStart"),Or("dblclick","onDoubleClick"),Or("focusin","onFocus"),Or("focusout","onBlur"),Or(Nr,"onTransitionEnd"),l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),c("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),c("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),c("onBeforeInput",["compositionend","keypress","textInput","paste"]),c("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Lr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Mr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Lr));function Fr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,o,a,c,l){if(ze.apply(this,arguments),Me){if(!Me)throw Error(s(198));var u=Fe;Me=!1,Fe=null,Ue||(Ue=!0,Ve=u)}}(r,t,void 0,e),e.currentTarget=null}function Ur(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var o=r.length-1;0<=o;o--){var a=r[o],c=a.instance,l=a.currentTarget;if(a=a.listener,c!==s&&i.isPropagationStopped())break e;Fr(i,a,l),s=c}else for(o=0;o<r.length;o++){if(c=(a=r[o]).instance,l=a.currentTarget,a=a.listener,c!==s&&i.isPropagationStopped())break e;Fr(i,a,l),s=c}}}if(Ue)throw e=Ve,Ue=!1,Ve=null,e}function Vr(e,t){var n=t[mi];void 0===n&&(n=t[mi]=new Set);var r=e+"__bubble";n.has(r)||(qr(t,e,2,!1),n.add(r))}function jr(e,t,n){var r=0;t&&(r|=4),qr(n,e,r,t)}var zr="_reactListening"+Math.random().toString(36).slice(2);function Br(e){if(!e[zr]){e[zr]=!0,o.forEach((function(t){"selectionchange"!==t&&(Mr.has(t)||jr(t,!1,e),jr(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[zr]||(t[zr]=!0,jr("selectionchange",!1,t))}}function qr(e,t,n,r){switch($t(t)){case 1:var i=Gt;break;case 4:i=Wt;break;default:i=Ht}n=i.bind(null,t,n,e),i=void 0,!Re||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Kr(e,t,n,r,i){var s=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var a=r.stateNode.containerInfo;if(a===i||8===a.nodeType&&a.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var c=o.tag;if((3===c||4===c)&&((c=o.stateNode.containerInfo)===i||8===c.nodeType&&c.parentNode===i))return;o=o.return}for(;null!==a;){if(null===(o=vi(a)))return;if(5===(c=o.tag)||6===c){r=s=o;continue e}a=a.parentNode}}r=r.return}Pe((function(){var r=s,i=_e(n),o=[];e:{var a=Ar.get(e);if(void 0!==a){var c=un,l=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":c=Cn;break;case"focusin":l="focus",c=gn;break;case"focusout":l="blur",c=gn;break;case"beforeblur":case"afterblur":c=gn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":c=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":c=mn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":c=Nn;break;case kr:case Cr:case xr:c=yn;break;case Nr:c=An;break;case"scroll":c=dn;break;case"wheel":c=On;break;case"copy":case"cut":case"paste":c=wn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":c=xn}var u=0!==(4&t),h=!u&&"scroll"===e,d=u?null!==a?a+"Capture":null:a;u=[];for(var f,p=r;null!==p;){var m=(f=p).stateNode;if(5===f.tag&&null!==m&&(f=m,null!==d&&(null!=(m=Oe(p,d))&&u.push(Gr(p,m,f)))),h)break;p=p.return}0<u.length&&(a=new c(a,l,null,n,i),o.push({event:a,listeners:u}))}}if(0===(7&t)){if(c="mouseout"===e||"pointerout"===e,(!(a="mouseover"===e||"pointerover"===e)||n===be||!(l=n.relatedTarget||n.fromElement)||!vi(l)&&!l[pi])&&(c||a)&&(a=i.window===i?i:(a=i.ownerDocument)?a.defaultView||a.parentWindow:window,c?(c=r,null!==(l=(l=n.relatedTarget||n.toElement)?vi(l):null)&&(l!==(h=Be(l))||5!==l.tag&&6!==l.tag)&&(l=null)):(c=null,l=r),c!==l)){if(u=pn,m="onMouseLeave",d="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(u=xn,m="onPointerLeave",d="onPointerEnter",p="pointer"),h=null==c?a:bi(c),f=null==l?a:bi(l),(a=new u(m,p+"leave",c,n,i)).target=h,a.relatedTarget=f,m=null,vi(i)===r&&((u=new u(d,p+"enter",l,n,i)).target=f,u.relatedTarget=h,m=u),h=m,c&&l)e:{for(d=l,p=0,f=u=c;f;f=Hr(f))p++;for(f=0,m=d;m;m=Hr(m))f++;for(;0<p-f;)u=Hr(u),p--;for(;0<f-p;)d=Hr(d),f--;for(;p--;){if(u===d||null!==d&&u===d.alternate)break e;u=Hr(u),d=Hr(d)}u=null}else u=null;null!==c&&Qr(o,a,c,u,!1),null!==l&&null!==h&&Qr(o,h,l,u,!0)}if("select"===(c=(a=r?bi(r):window).nodeName&&a.nodeName.toLowerCase())||"input"===c&&"file"===a.type)var g=$n;else if(Kn(a))if(Jn)g=or;else{g=ir;var y=rr}else(c=a.nodeName)&&"input"===c.toLowerCase()&&("checkbox"===a.type||"radio"===a.type)&&(g=sr);switch(g&&(g=g(e,r))?Gn(o,g,n,i):(y&&y(e,a,r),"focusout"===e&&(y=a._wrapperState)&&y.controlled&&"number"===a.type&&ee(a,"number",a.value)),y=r?bi(r):window,e){case"focusin":(Kn(y)||"true"===y.contentEditable)&&(gr=y,yr=r,vr=null);break;case"focusout":vr=yr=gr=null;break;case"mousedown":wr=!0;break;case"contextmenu":case"mouseup":case"dragend":wr=!1,br(o,n,i);break;case"selectionchange":if(mr)break;case"keydown":case"keyup":br(o,n,i)}var v;if(Dn)e:{switch(e){case"compositionstart":var w="onCompositionStart";break e;case"compositionend":w="onCompositionEnd";break e;case"compositionupdate":w="onCompositionUpdate";break e}w=void 0}else Bn?jn(e,n)&&(w="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(w="onCompositionStart");w&&(Fn&&"ko"!==n.locale&&(Bn||"onCompositionStart"!==w?"onCompositionEnd"===w&&Bn&&(v=en()):(Xt="value"in(Jt=i)?Jt.value:Jt.textContent,Bn=!0)),0<(y=Wr(r,w)).length&&(w=new bn(w,e,null,n,i),o.push({event:w,listeners:y}),v?w.data=v:null!==(v=zn(n))&&(w.data=v))),(v=Mn?function(e,t){switch(e){case"compositionend":return zn(t);case"keypress":return 32!==t.which?null:(Vn=!0,Un);case"textInput":return(e=t.data)===Un&&Vn?null:e;default:return null}}(e,n):function(e,t){if(Bn)return"compositionend"===e||!Dn&&jn(e,t)?(e=en(),Zt=Xt=Jt=null,Bn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Fn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Wr(r,"onBeforeInput")).length&&(i=new bn("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=v))}Ur(o,t)}))}function Gr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Wr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,s=i.stateNode;5===i.tag&&null!==s&&(i=s,null!=(s=Oe(e,n))&&r.unshift(Gr(e,s,i)),null!=(s=Oe(e,t))&&r.push(Gr(e,s,i))),e=e.return}return r}function Hr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Qr(e,t,n,r,i){for(var s=t._reactName,o=[];null!==n&&n!==r;){var a=n,c=a.alternate,l=a.stateNode;if(null!==c&&c===r)break;5===a.tag&&null!==l&&(a=l,i?null!=(c=Oe(n,s))&&o.unshift(Gr(n,c,a)):i||null!=(c=Oe(n,s))&&o.push(Gr(n,c,a))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var Yr=/\r\n?/g,$r=/\u0000|\uFFFD/g;function Jr(e){return("string"===typeof e?e:""+e).replace(Yr,"\n").replace($r,"")}function Xr(e,t,n){if(t=Jr(t),Jr(e)!==t&&n)throw Error(s(425))}function Zr(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,si="function"===typeof Promise?Promise:void 0,oi="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof si?function(e){return si.resolve(null).then(e).catch(ai)}:ri;function ai(e){setTimeout((function(){throw e}))}function ci(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void Bt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);Bt(t)}function li(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ui(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var hi=Math.random().toString(36).slice(2),di="__reactFiber$"+hi,fi="__reactProps$"+hi,pi="__reactContainer$"+hi,mi="__reactEvents$"+hi,gi="__reactListeners$"+hi,yi="__reactHandles$"+hi;function vi(e){var t=e[di];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pi]||n[di]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ui(e);null!==e;){if(n=e[di])return n;e=ui(e)}return t}n=(e=n).parentNode}return null}function wi(e){return!(e=e[di]||e[pi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function bi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(s(33))}function _i(e){return e[fi]||null}var Si=[],Ei=-1;function Ii(e){return{current:e}}function Ti(e){0>Ei||(e.current=Si[Ei],Si[Ei]=null,Ei--)}function ki(e,t){Ei++,Si[Ei]=e.current,e.current=t}var Ci={},xi=Ii(Ci),Ni=Ii(!1),Ai=Ci;function Pi(e,t){var n=e.type.contextTypes;if(!n)return Ci;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,s={};for(i in n)s[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Oi(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Ri(){Ti(Ni),Ti(xi)}function Di(e,t,n){if(xi.current!==Ci)throw Error(s(168));ki(xi,t),ki(Ni,n)}function Li(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(s(108,q(e)||"Unknown",i));return F({},n,r)}function Mi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ci,Ai=xi.current,ki(xi,e),ki(Ni,Ni.current),!0}function Fi(e,t,n){var r=e.stateNode;if(!r)throw Error(s(169));n?(e=Li(e,t,Ai),r.__reactInternalMemoizedMergedChildContext=e,Ti(Ni),Ti(xi),ki(xi,e)):Ti(Ni),ki(Ni,n)}var Ui=null,Vi=!1,ji=!1;function zi(e){null===Ui?Ui=[e]:Ui.push(e)}function Bi(){if(!ji&&null!==Ui){ji=!0;var e=0,t=wt;try{var n=Ui;for(wt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Ui=null,Vi=!1}catch(i){throw null!==Ui&&(Ui=Ui.slice(e+1)),He(Ze,Bi),i}finally{wt=t,ji=!1}}return null}var qi=[],Ki=0,Gi=null,Wi=0,Hi=[],Qi=0,Yi=null,$i=1,Ji="";function Xi(e,t){qi[Ki++]=Wi,qi[Ki++]=Gi,Gi=e,Wi=t}function Zi(e,t,n){Hi[Qi++]=$i,Hi[Qi++]=Ji,Hi[Qi++]=Yi,Yi=e;var r=$i;e=Ji;var i=32-ot(r)-1;r&=~(1<<i),n+=1;var s=32-ot(t)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,$i=1<<32-ot(t)+i|n<<i|r,Ji=s+e}else $i=1<<s|n<<i|r,Ji=e}function es(e){null!==e.return&&(Xi(e,1),Zi(e,1,0))}function ts(e){for(;e===Gi;)Gi=qi[--Ki],qi[Ki]=null,Wi=qi[--Ki],qi[Ki]=null;for(;e===Yi;)Yi=Hi[--Qi],Hi[Qi]=null,Ji=Hi[--Qi],Hi[Qi]=null,$i=Hi[--Qi],Hi[Qi]=null}var ns=null,rs=null,is=!1,ss=null;function os(e,t){var n=Ol(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function as(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,ns=e,rs=li(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,ns=e,rs=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Yi?{id:$i,overflow:Ji}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Ol(18,null,null,0)).stateNode=t,n.return=e,e.child=n,ns=e,rs=null,!0);default:return!1}}function cs(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function ls(e){if(is){var t=rs;if(t){var n=t;if(!as(e,t)){if(cs(e))throw Error(s(418));t=li(n.nextSibling);var r=ns;t&&as(e,t)?os(r,n):(e.flags=-4097&e.flags|2,is=!1,ns=e)}}else{if(cs(e))throw Error(s(418));e.flags=-4097&e.flags|2,is=!1,ns=e}}}function us(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;ns=e}function hs(e){if(e!==ns)return!1;if(!is)return us(e),is=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=rs)){if(cs(e))throw ds(),Error(s(418));for(;t;)os(e,t),t=li(t.nextSibling)}if(us(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(s(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){rs=li(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}rs=null}}else rs=ns?li(e.stateNode.nextSibling):null;return!0}function ds(){for(var e=rs;e;)e=li(e.nextSibling)}function fs(){rs=ns=null,is=!1}function ps(e){null===ss?ss=[e]:ss.push(e)}var ms=b.ReactCurrentBatchConfig;function gs(e,t){if(e&&e.defaultProps){for(var n in t=F({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var ys=Ii(null),vs=null,ws=null,bs=null;function _s(){bs=ws=vs=null}function Ss(e){var t=ys.current;Ti(ys),e._currentValue=t}function Es(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Is(e,t){vs=e,bs=ws=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(ba=!0),e.firstContext=null)}function Ts(e){var t=e._currentValue;if(bs!==e)if(e={context:e,memoizedValue:t,next:null},null===ws){if(null===vs)throw Error(s(308));ws=e,vs.dependencies={lanes:0,firstContext:e}}else ws=ws.next=e;return t}var ks=null;function Cs(e){null===ks?ks=[e]:ks.push(e)}function xs(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,Cs(t)):(n.next=i.next,i.next=n),t.interleaved=n,Ns(e,r)}function Ns(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var As=!1;function Ps(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Os(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Rs(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Ds(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Nc)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Ns(e,n)}return null===(i=r.interleaved)?(t.next=t,Cs(r)):(t.next=i.next,i.next=t),r.interleaved=t,Ns(e,n)}function Ls(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,vt(e,n)}}function Ms(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,s=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===s?i=s=o:s=s.next=o,n=n.next}while(null!==n);null===s?i=s=t:s=s.next=t}else i=s=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Fs(e,t,n,r){var i=e.updateQueue;As=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(null!==a){i.shared.pending=null;var c=a,l=c.next;c.next=null,null===o?s=l:o.next=l,o=c;var u=e.alternate;null!==u&&((a=(u=u.updateQueue).lastBaseUpdate)!==o&&(null===a?u.firstBaseUpdate=l:a.next=l,u.lastBaseUpdate=c))}if(null!==s){var h=i.baseState;for(o=0,u=l=c=null,a=s;;){var d=a.lane,f=a.eventTime;if((r&d)===d){null!==u&&(u=u.next={eventTime:f,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=e,m=a;switch(d=t,f=n,m.tag){case 1:if("function"===typeof(p=m.payload)){h=p.call(f,h,d);break e}h=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(d="function"===typeof(p=m.payload)?p.call(f,h,d):p)||void 0===d)break e;h=F({},h,d);break e;case 2:As=!0}}null!==a.callback&&0!==a.lane&&(e.flags|=64,null===(d=i.effects)?i.effects=[a]:d.push(a))}else f={eventTime:f,lane:d,tag:a.tag,payload:a.payload,callback:a.callback,next:null},null===u?(l=u=f,c=h):u=u.next=f,o|=d;if(null===(a=a.next)){if(null===(a=i.shared.pending))break;a=(d=a).next,d.next=null,i.lastBaseUpdate=d,i.shared.pending=null}}if(null===u&&(c=h),i.baseState=c,i.firstBaseUpdate=l,i.lastBaseUpdate=u,null!==(t=i.shared.interleaved)){i=t;do{o|=i.lane,i=i.next}while(i!==t)}else null===s&&(i.shared.lanes=0);Fc|=o,e.lanes=o,e.memoizedState=h}}function Us(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(s(191,i));i.call(r)}}}var Vs=(new r.Component).refs;function js(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:F({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var zs={isMounted:function(e){return!!(e=e._reactInternals)&&Be(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=tl(),i=nl(e),s=Rs(r,i);s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=Ds(e,s,i))&&(rl(t,e,i,r),Ls(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=tl(),i=nl(e),s=Rs(r,i);s.tag=1,s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=Ds(e,s,i))&&(rl(t,e,i,r),Ls(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=tl(),r=nl(e),i=Rs(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=Ds(e,i,r))&&(rl(t,e,r,n),Ls(t,e,r))}};function Bs(e,t,n,r,i,s,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,s,o):!t.prototype||!t.prototype.isPureReactComponent||(!cr(n,r)||!cr(i,s))}function qs(e,t,n){var r=!1,i=Ci,s=t.contextType;return"object"===typeof s&&null!==s?s=Ts(s):(i=Oi(t)?Ai:xi.current,s=(r=null!==(r=t.contextTypes)&&void 0!==r)?Pi(e,i):Ci),t=new t(n,s),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=zs,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=s),t}function Ks(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&zs.enqueueReplaceState(t,t.state,null)}function Gs(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=Vs,Ps(e);var s=t.contextType;"object"===typeof s&&null!==s?i.context=Ts(s):(s=Oi(t)?Ai:xi.current,i.context=Pi(e,s)),i.state=e.memoizedState,"function"===typeof(s=t.getDerivedStateFromProps)&&(js(e,t,s,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&zs.enqueueReplaceState(i,i.state,null),Fs(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function Ws(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(s(309));var r=n.stateNode}if(!r)throw Error(s(147,e));var i=r,o=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=i.refs;t===Vs&&(t=i.refs={}),null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!==typeof e)throw Error(s(284));if(!n._owner)throw Error(s(290,e))}return e}function Hs(e,t){throw e=Object.prototype.toString.call(t),Error(s(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Qs(e){return(0,e._init)(e._payload)}function Ys(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Dl(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function a(t){return e&&null===t.alternate&&(t.flags|=2),t}function c(e,t,n,r){return null===t||6!==t.tag?((t=Ul(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function l(e,t,n,r){var s=n.type;return s===E?h(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===s||"object"===typeof s&&null!==s&&s.$$typeof===O&&Qs(s)===t.type)?((r=i(t,n.props)).ref=Ws(e,t,n),r.return=e,r):((r=Ll(n.type,n.key,n.props,null,e.mode,r)).ref=Ws(e,t,n),r.return=e,r)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Vl(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function h(e,t,n,r,s){return null===t||7!==t.tag?((t=Ml(n,e.mode,r,s)).return=e,t):((t=i(t,n)).return=e,t)}function d(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Ul(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case _:return(n=Ll(t.type,t.key,t.props,null,e.mode,n)).ref=Ws(e,null,t),n.return=e,n;case S:return(t=Vl(t,e.mode,n)).return=e,t;case O:return d(e,(0,t._init)(t._payload),n)}if(te(t)||L(t))return(t=Ml(t,e.mode,n,null)).return=e,t;Hs(e,t)}return null}function f(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:c(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case _:return n.key===i?l(e,t,n,r):null;case S:return n.key===i?u(e,t,n,r):null;case O:return f(e,t,(i=n._init)(n._payload),r)}if(te(n)||L(n))return null!==i?null:h(e,t,n,r,null);Hs(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return c(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case _:return l(t,e=e.get(null===r.key?n:r.key)||null,r,i);case S:return u(t,e=e.get(null===r.key?n:r.key)||null,r,i);case O:return p(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||L(r))return h(t,e=e.get(n)||null,r,i,null);Hs(t,r)}return null}function m(i,s,a,c){for(var l=null,u=null,h=s,m=s=0,g=null;null!==h&&m<a.length;m++){h.index>m?(g=h,h=null):g=h.sibling;var y=f(i,h,a[m],c);if(null===y){null===h&&(h=g);break}e&&h&&null===y.alternate&&t(i,h),s=o(y,s,m),null===u?l=y:u.sibling=y,u=y,h=g}if(m===a.length)return n(i,h),is&&Xi(i,m),l;if(null===h){for(;m<a.length;m++)null!==(h=d(i,a[m],c))&&(s=o(h,s,m),null===u?l=h:u.sibling=h,u=h);return is&&Xi(i,m),l}for(h=r(i,h);m<a.length;m++)null!==(g=p(h,i,m,a[m],c))&&(e&&null!==g.alternate&&h.delete(null===g.key?m:g.key),s=o(g,s,m),null===u?l=g:u.sibling=g,u=g);return e&&h.forEach((function(e){return t(i,e)})),is&&Xi(i,m),l}function g(i,a,c,l){var u=L(c);if("function"!==typeof u)throw Error(s(150));if(null==(c=u.call(c)))throw Error(s(151));for(var h=u=null,m=a,g=a=0,y=null,v=c.next();null!==m&&!v.done;g++,v=c.next()){m.index>g?(y=m,m=null):y=m.sibling;var w=f(i,m,v.value,l);if(null===w){null===m&&(m=y);break}e&&m&&null===w.alternate&&t(i,m),a=o(w,a,g),null===h?u=w:h.sibling=w,h=w,m=y}if(v.done)return n(i,m),is&&Xi(i,g),u;if(null===m){for(;!v.done;g++,v=c.next())null!==(v=d(i,v.value,l))&&(a=o(v,a,g),null===h?u=v:h.sibling=v,h=v);return is&&Xi(i,g),u}for(m=r(i,m);!v.done;g++,v=c.next())null!==(v=p(m,i,g,v.value,l))&&(e&&null!==v.alternate&&m.delete(null===v.key?g:v.key),a=o(v,a,g),null===h?u=v:h.sibling=v,h=v);return e&&m.forEach((function(e){return t(i,e)})),is&&Xi(i,g),u}return function e(r,s,o,c){if("object"===typeof o&&null!==o&&o.type===E&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case _:e:{for(var l=o.key,u=s;null!==u;){if(u.key===l){if((l=o.type)===E){if(7===u.tag){n(r,u.sibling),(s=i(u,o.props.children)).return=r,r=s;break e}}else if(u.elementType===l||"object"===typeof l&&null!==l&&l.$$typeof===O&&Qs(l)===u.type){n(r,u.sibling),(s=i(u,o.props)).ref=Ws(r,u,o),s.return=r,r=s;break e}n(r,u);break}t(r,u),u=u.sibling}o.type===E?((s=Ml(o.props.children,r.mode,c,o.key)).return=r,r=s):((c=Ll(o.type,o.key,o.props,null,r.mode,c)).ref=Ws(r,s,o),c.return=r,r=c)}return a(r);case S:e:{for(u=o.key;null!==s;){if(s.key===u){if(4===s.tag&&s.stateNode.containerInfo===o.containerInfo&&s.stateNode.implementation===o.implementation){n(r,s.sibling),(s=i(s,o.children||[])).return=r,r=s;break e}n(r,s);break}t(r,s),s=s.sibling}(s=Vl(o,r.mode,c)).return=r,r=s}return a(r);case O:return e(r,s,(u=o._init)(o._payload),c)}if(te(o))return m(r,s,o,c);if(L(o))return g(r,s,o,c);Hs(r,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==s&&6===s.tag?(n(r,s.sibling),(s=i(s,o)).return=r,r=s):(n(r,s),(s=Ul(o,r.mode,c)).return=r,r=s),a(r)):n(r,s)}}var $s=Ys(!0),Js=Ys(!1),Xs={},Zs=Ii(Xs),eo=Ii(Xs),to=Ii(Xs);function no(e){if(e===Xs)throw Error(s(174));return e}function ro(e,t){switch(ki(to,t),ki(eo,e),ki(Zs,Xs),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:ce(null,"");break;default:t=ce(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Ti(Zs),ki(Zs,t)}function io(){Ti(Zs),Ti(eo),Ti(to)}function so(e){no(to.current);var t=no(Zs.current),n=ce(t,e.type);t!==n&&(ki(eo,e),ki(Zs,n))}function oo(e){eo.current===e&&(Ti(Zs),Ti(eo))}var ao=Ii(0);function co(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var lo=[];function uo(){for(var e=0;e<lo.length;e++)lo[e]._workInProgressVersionPrimary=null;lo.length=0}var ho=b.ReactCurrentDispatcher,fo=b.ReactCurrentBatchConfig,po=0,mo=null,go=null,yo=null,vo=!1,wo=!1,bo=0,_o=0;function So(){throw Error(s(321))}function Eo(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ar(e[n],t[n]))return!1;return!0}function Io(e,t,n,r,i,o){if(po=o,mo=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ho.current=null===e||null===e.memoizedState?aa:ca,e=n(r,i),wo){o=0;do{if(wo=!1,bo=0,25<=o)throw Error(s(301));o+=1,yo=go=null,t.updateQueue=null,ho.current=la,e=n(r,i)}while(wo)}if(ho.current=oa,t=null!==go&&null!==go.next,po=0,yo=go=mo=null,vo=!1,t)throw Error(s(300));return e}function To(){var e=0!==bo;return bo=0,e}function ko(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===yo?mo.memoizedState=yo=e:yo=yo.next=e,yo}function Co(){if(null===go){var e=mo.alternate;e=null!==e?e.memoizedState:null}else e=go.next;var t=null===yo?mo.memoizedState:yo.next;if(null!==t)yo=t,go=e;else{if(null===e)throw Error(s(310));e={memoizedState:(go=e).memoizedState,baseState:go.baseState,baseQueue:go.baseQueue,queue:go.queue,next:null},null===yo?mo.memoizedState=yo=e:yo=yo.next=e}return yo}function xo(e,t){return"function"===typeof t?t(e):t}function No(e){var t=Co(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=go,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var a=i.next;i.next=o.next,o.next=a}r.baseQueue=i=o,n.pending=null}if(null!==i){o=i.next,r=r.baseState;var c=a=null,l=null,u=o;do{var h=u.lane;if((po&h)===h)null!==l&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var d={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===l?(c=l=d,a=r):l=l.next=d,mo.lanes|=h,Fc|=h}u=u.next}while(null!==u&&u!==o);null===l?a=r:l.next=c,ar(r,t.memoizedState)||(ba=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=l,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{o=i.lane,mo.lanes|=o,Fc|=o,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Ao(e){var t=Co(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var a=i=i.next;do{o=e(o,a.action),a=a.next}while(a!==i);ar(o,t.memoizedState)||(ba=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function Po(){}function Oo(e,t){var n=mo,r=Co(),i=t(),o=!ar(r.memoizedState,i);if(o&&(r.memoizedState=i,ba=!0),r=r.queue,Ko(Lo.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||null!==yo&&1&yo.memoizedState.tag){if(n.flags|=2048,Vo(9,Do.bind(null,n,r,i,t),void 0,null),null===Ac)throw Error(s(349));0!==(30&po)||Ro(n,t,i)}return i}function Ro(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=mo.updateQueue)?(t={lastEffect:null,stores:null},mo.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Do(e,t,n,r){t.value=n,t.getSnapshot=r,Mo(t)&&Fo(e)}function Lo(e,t,n){return n((function(){Mo(t)&&Fo(e)}))}function Mo(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ar(e,n)}catch(r){return!0}}function Fo(e){var t=Ns(e,1);null!==t&&rl(t,e,1,-1)}function Uo(e){var t=ko();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:xo,lastRenderedState:e},t.queue=e,e=e.dispatch=na.bind(null,mo,e),[t.memoizedState,e]}function Vo(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=mo.updateQueue)?(t={lastEffect:null,stores:null},mo.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function jo(){return Co().memoizedState}function zo(e,t,n,r){var i=ko();mo.flags|=e,i.memoizedState=Vo(1|t,n,void 0,void 0===r?null:r)}function Bo(e,t,n,r){var i=Co();r=void 0===r?null:r;var s=void 0;if(null!==go){var o=go.memoizedState;if(s=o.destroy,null!==r&&Eo(r,o.deps))return void(i.memoizedState=Vo(t,n,s,r))}mo.flags|=e,i.memoizedState=Vo(1|t,n,s,r)}function qo(e,t){return zo(8390656,8,e,t)}function Ko(e,t){return Bo(2048,8,e,t)}function Go(e,t){return Bo(4,2,e,t)}function Wo(e,t){return Bo(4,4,e,t)}function Ho(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Qo(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Bo(4,4,Ho.bind(null,t,e),n)}function Yo(){}function $o(e,t){var n=Co();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Eo(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Jo(e,t){var n=Co();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Eo(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Xo(e,t,n){return 0===(21&po)?(e.baseState&&(e.baseState=!1,ba=!0),e.memoizedState=n):(ar(n,t)||(n=mt(),mo.lanes|=n,Fc|=n,e.baseState=!0),t)}function Zo(e,t){var n=wt;wt=0!==n&&4>n?n:4,e(!0);var r=fo.transition;fo.transition={};try{e(!1),t()}finally{wt=n,fo.transition=r}}function ea(){return Co().memoizedState}function ta(e,t,n){var r=nl(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},ra(e))ia(t,n);else if(null!==(n=xs(e,t,n,r))){rl(n,e,r,tl()),sa(n,t,r)}}function na(e,t,n){var r=nl(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(ra(e))ia(t,i);else{var s=e.alternate;if(0===e.lanes&&(null===s||0===s.lanes)&&null!==(s=t.lastRenderedReducer))try{var o=t.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,ar(a,o)){var c=t.interleaved;return null===c?(i.next=i,Cs(t)):(i.next=c.next,c.next=i),void(t.interleaved=i)}}catch(l){}null!==(n=xs(e,t,i,r))&&(rl(n,e,r,i=tl()),sa(n,t,r))}}function ra(e){var t=e.alternate;return e===mo||null!==t&&t===mo}function ia(e,t){wo=vo=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function sa(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,vt(e,n)}}var oa={readContext:Ts,useCallback:So,useContext:So,useEffect:So,useImperativeHandle:So,useInsertionEffect:So,useLayoutEffect:So,useMemo:So,useReducer:So,useRef:So,useState:So,useDebugValue:So,useDeferredValue:So,useTransition:So,useMutableSource:So,useSyncExternalStore:So,useId:So,unstable_isNewReconciler:!1},aa={readContext:Ts,useCallback:function(e,t){return ko().memoizedState=[e,void 0===t?null:t],e},useContext:Ts,useEffect:qo,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,zo(4194308,4,Ho.bind(null,t,e),n)},useLayoutEffect:function(e,t){return zo(4194308,4,e,t)},useInsertionEffect:function(e,t){return zo(4,2,e,t)},useMemo:function(e,t){var n=ko();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=ko();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=ta.bind(null,mo,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},ko().memoizedState=e},useState:Uo,useDebugValue:Yo,useDeferredValue:function(e){return ko().memoizedState=e},useTransition:function(){var e=Uo(!1),t=e[0];return e=Zo.bind(null,e[1]),ko().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=mo,i=ko();if(is){if(void 0===n)throw Error(s(407));n=n()}else{if(n=t(),null===Ac)throw Error(s(349));0!==(30&po)||Ro(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,qo(Lo.bind(null,r,o,e),[e]),r.flags|=2048,Vo(9,Do.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=ko(),t=Ac.identifierPrefix;if(is){var n=Ji;t=":"+t+"R"+(n=($i&~(1<<32-ot($i)-1)).toString(32)+n),0<(n=bo++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=_o++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},ca={readContext:Ts,useCallback:$o,useContext:Ts,useEffect:Ko,useImperativeHandle:Qo,useInsertionEffect:Go,useLayoutEffect:Wo,useMemo:Jo,useReducer:No,useRef:jo,useState:function(){return No(xo)},useDebugValue:Yo,useDeferredValue:function(e){return Xo(Co(),go.memoizedState,e)},useTransition:function(){return[No(xo)[0],Co().memoizedState]},useMutableSource:Po,useSyncExternalStore:Oo,useId:ea,unstable_isNewReconciler:!1},la={readContext:Ts,useCallback:$o,useContext:Ts,useEffect:Ko,useImperativeHandle:Qo,useInsertionEffect:Go,useLayoutEffect:Wo,useMemo:Jo,useReducer:Ao,useRef:jo,useState:function(){return Ao(xo)},useDebugValue:Yo,useDeferredValue:function(e){var t=Co();return null===go?t.memoizedState=e:Xo(t,go.memoizedState,e)},useTransition:function(){return[Ao(xo)[0],Co().memoizedState]},useMutableSource:Po,useSyncExternalStore:Oo,useId:ea,unstable_isNewReconciler:!1};function ua(e,t){try{var n="",r=t;do{n+=z(r),r=r.return}while(r);var i=n}catch(s){i="\nError generating stack: "+s.message+"\n"+s.stack}return{value:e,source:t,stack:i,digest:null}}function ha(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function da(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var fa="function"===typeof WeakMap?WeakMap:Map;function pa(e,t,n){(n=Rs(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Gc||(Gc=!0,Wc=r),da(0,t)},n}function ma(e,t,n){(n=Rs(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){da(0,t)}}var s=e.stateNode;return null!==s&&"function"===typeof s.componentDidCatch&&(n.callback=function(){da(0,t),"function"!==typeof r&&(null===Hc?Hc=new Set([this]):Hc.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function ga(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new fa;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=kl.bind(null,e,t,n),t.then(e,e))}function ya(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function va(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Rs(-1,1)).tag=2,Ds(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var wa=b.ReactCurrentOwner,ba=!1;function _a(e,t,n,r){t.child=null===e?Js(t,null,n,r):$s(t,e.child,n,r)}function Sa(e,t,n,r,i){n=n.render;var s=t.ref;return Is(t,i),r=Io(e,t,n,r,s,i),n=To(),null===e||ba?(is&&n&&es(t),t.flags|=1,_a(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ga(e,t,i))}function Ea(e,t,n,r,i){if(null===e){var s=n.type;return"function"!==typeof s||Rl(s)||void 0!==s.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Ll(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=s,Ia(e,t,s,r,i))}if(s=e.child,0===(e.lanes&i)){var o=s.memoizedProps;if((n=null!==(n=n.compare)?n:cr)(o,r)&&e.ref===t.ref)return Ga(e,t,i)}return t.flags|=1,(e=Dl(s,r)).ref=t.ref,e.return=t,t.child=e}function Ia(e,t,n,r,i){if(null!==e){var s=e.memoizedProps;if(cr(s,r)&&e.ref===t.ref){if(ba=!1,t.pendingProps=r=s,0===(e.lanes&i))return t.lanes=e.lanes,Ga(e,t,i);0!==(131072&e.flags)&&(ba=!0)}}return Ca(e,t,n,r,i)}function Ta(e,t,n){var r=t.pendingProps,i=r.children,s=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},ki(Dc,Rc),Rc|=n;else{if(0===(1073741824&n))return e=null!==s?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,ki(Dc,Rc),Rc|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==s?s.baseLanes:n,ki(Dc,Rc),Rc|=r}else null!==s?(r=s.baseLanes|n,t.memoizedState=null):r=n,ki(Dc,Rc),Rc|=r;return _a(e,t,i,n),t.child}function ka(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Ca(e,t,n,r,i){var s=Oi(n)?Ai:xi.current;return s=Pi(t,s),Is(t,i),n=Io(e,t,n,r,s,i),r=To(),null===e||ba?(is&&r&&es(t),t.flags|=1,_a(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ga(e,t,i))}function xa(e,t,n,r,i){if(Oi(n)){var s=!0;Mi(t)}else s=!1;if(Is(t,i),null===t.stateNode)Ka(e,t),qs(t,n,r),Gs(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,a=t.memoizedProps;o.props=a;var c=o.context,l=n.contextType;"object"===typeof l&&null!==l?l=Ts(l):l=Pi(t,l=Oi(n)?Ai:xi.current);var u=n.getDerivedStateFromProps,h="function"===typeof u||"function"===typeof o.getSnapshotBeforeUpdate;h||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(a!==r||c!==l)&&Ks(t,o,r,l),As=!1;var d=t.memoizedState;o.state=d,Fs(t,r,o,i),c=t.memoizedState,a!==r||d!==c||Ni.current||As?("function"===typeof u&&(js(t,n,u,r),c=t.memoizedState),(a=As||Bs(t,n,a,r,d,c,l))?(h||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),o.props=r,o.state=c,o.context=l,r=a):("function"===typeof o.componentDidMount&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,Os(e,t),a=t.memoizedProps,l=t.type===t.elementType?a:gs(t.type,a),o.props=l,h=t.pendingProps,d=o.context,"object"===typeof(c=n.contextType)&&null!==c?c=Ts(c):c=Pi(t,c=Oi(n)?Ai:xi.current);var f=n.getDerivedStateFromProps;(u="function"===typeof f||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(a!==h||d!==c)&&Ks(t,o,r,c),As=!1,d=t.memoizedState,o.state=d,Fs(t,r,o,i);var p=t.memoizedState;a!==h||d!==p||Ni.current||As?("function"===typeof f&&(js(t,n,f,r),p=t.memoizedState),(l=As||Bs(t,n,l,r,d,p,c)||!1)?(u||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,p,c),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,p,c)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=c,r=l):("function"!==typeof o.componentDidUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),r=!1)}return Na(e,t,n,r,s,i)}function Na(e,t,n,r,i,s){ka(e,t);var o=0!==(128&t.flags);if(!r&&!o)return i&&Fi(t,n,!1),Ga(e,t,s);r=t.stateNode,wa.current=t;var a=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=$s(t,e.child,null,s),t.child=$s(t,null,a,s)):_a(e,t,a,s),t.memoizedState=r.state,i&&Fi(t,n,!0),t.child}function Aa(e){var t=e.stateNode;t.pendingContext?Di(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Di(0,t.context,!1),ro(e,t.containerInfo)}function Pa(e,t,n,r,i){return fs(),ps(i),t.flags|=256,_a(e,t,n,r),t.child}var Oa,Ra,Da,La,Ma={dehydrated:null,treeContext:null,retryLane:0};function Fa(e){return{baseLanes:e,cachePool:null,transitions:null}}function Ua(e,t,n){var r,i=t.pendingProps,o=ao.current,a=!1,c=0!==(128&t.flags);if((r=c)||(r=(null===e||null!==e.memoizedState)&&0!==(2&o)),r?(a=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),ki(ao,1&o),null===e)return ls(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(c=i.children,e=i.fallback,a?(i=t.mode,a=t.child,c={mode:"hidden",children:c},0===(1&i)&&null!==a?(a.childLanes=0,a.pendingProps=c):a=Fl(c,i,0,null),e=Ml(e,i,n,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=Fa(n),t.memoizedState=Ma,e):Va(t,c));if(null!==(o=e.memoizedState)&&null!==(r=o.dehydrated))return function(e,t,n,r,i,o,a){if(n)return 256&t.flags?(t.flags&=-257,ja(e,t,a,r=ha(Error(s(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(o=r.fallback,i=t.mode,r=Fl({mode:"visible",children:r.children},i,0,null),(o=Ml(o,i,a,null)).flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,0!==(1&t.mode)&&$s(t,e.child,null,a),t.child.memoizedState=Fa(a),t.memoizedState=Ma,o);if(0===(1&t.mode))return ja(e,t,a,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var c=r.dgst;return r=c,ja(e,t,a,r=ha(o=Error(s(419)),r,void 0))}if(c=0!==(a&e.childLanes),ba||c){if(null!==(r=Ac)){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|a))?0:i)&&i!==o.retryLane&&(o.retryLane=i,Ns(e,i),rl(r,e,i,-1))}return gl(),ja(e,t,a,r=ha(Error(s(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=xl.bind(null,e),i._reactRetry=t,null):(e=o.treeContext,rs=li(i.nextSibling),ns=t,is=!0,ss=null,null!==e&&(Hi[Qi++]=$i,Hi[Qi++]=Ji,Hi[Qi++]=Yi,$i=e.id,Ji=e.overflow,Yi=t),t=Va(t,r.children),t.flags|=4096,t)}(e,t,c,i,r,o,n);if(a){a=i.fallback,c=t.mode,r=(o=e.child).sibling;var l={mode:"hidden",children:i.children};return 0===(1&c)&&t.child!==o?((i=t.child).childLanes=0,i.pendingProps=l,t.deletions=null):(i=Dl(o,l)).subtreeFlags=14680064&o.subtreeFlags,null!==r?a=Dl(r,a):(a=Ml(a,c,n,null)).flags|=2,a.return=t,i.return=t,i.sibling=a,t.child=i,i=a,a=t.child,c=null===(c=e.child.memoizedState)?Fa(n):{baseLanes:c.baseLanes|n,cachePool:null,transitions:c.transitions},a.memoizedState=c,a.childLanes=e.childLanes&~n,t.memoizedState=Ma,i}return e=(a=e.child).sibling,i=Dl(a,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function Va(e,t){return(t=Fl({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function ja(e,t,n,r){return null!==r&&ps(r),$s(t,e.child,null,n),(e=Va(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function za(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Es(e.return,t,n)}function Ba(e,t,n,r,i){var s=e.memoizedState;null===s?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function qa(e,t,n){var r=t.pendingProps,i=r.revealOrder,s=r.tail;if(_a(e,t,r.children,n),0!==(2&(r=ao.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&za(e,n,t);else if(19===e.tag)za(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(ki(ao,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===co(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Ba(t,!1,i,n,s);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===co(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Ba(t,!0,n,null,s);break;case"together":Ba(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ka(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ga(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Fc|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(s(153));if(null!==t.child){for(n=Dl(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Dl(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Wa(e,t){if(!is)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Ha(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Qa(e,t,n){var r=t.pendingProps;switch(ts(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ha(t),null;case 1:case 17:return Oi(t.type)&&Ri(),Ha(t),null;case 3:return r=t.stateNode,io(),Ti(Ni),Ti(xi),uo(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(hs(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==ss&&(al(ss),ss=null))),Ra(e,t),Ha(t),null;case 5:oo(t);var i=no(to.current);if(n=t.type,null!==e&&null!=t.stateNode)Da(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(s(166));return Ha(t),null}if(e=no(Zs.current),hs(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[di]=t,r[fi]=o,e=0!==(1&t.mode),n){case"dialog":Vr("cancel",r),Vr("close",r);break;case"iframe":case"object":case"embed":Vr("load",r);break;case"video":case"audio":for(i=0;i<Lr.length;i++)Vr(Lr[i],r);break;case"source":Vr("error",r);break;case"img":case"image":case"link":Vr("error",r),Vr("load",r);break;case"details":Vr("toggle",r);break;case"input":$(r,o),Vr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Vr("invalid",r);break;case"textarea":ie(r,o),Vr("invalid",r)}for(var c in ve(n,o),i=null,o)if(o.hasOwnProperty(c)){var l=o[c];"children"===c?"string"===typeof l?r.textContent!==l&&(!0!==o.suppressHydrationWarning&&Xr(r.textContent,l,e),i=["children",l]):"number"===typeof l&&r.textContent!==""+l&&(!0!==o.suppressHydrationWarning&&Xr(r.textContent,l,e),i=["children",""+l]):a.hasOwnProperty(c)&&null!=l&&"onScroll"===c&&Vr("scroll",r)}switch(n){case"input":W(r),Z(r,o,!0);break;case"textarea":W(r),oe(r);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(r.onclick=Zr)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{c=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=ae(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=c.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=c.createElement(n,{is:r.is}):(e=c.createElement(n),"select"===n&&(c=e,r.multiple?c.multiple=!0:r.size&&(c.size=r.size))):e=c.createElementNS(e,n),e[di]=t,e[fi]=r,Oa(e,t,!1,!1),t.stateNode=e;e:{switch(c=we(n,r),n){case"dialog":Vr("cancel",e),Vr("close",e),i=r;break;case"iframe":case"object":case"embed":Vr("load",e),i=r;break;case"video":case"audio":for(i=0;i<Lr.length;i++)Vr(Lr[i],e);i=r;break;case"source":Vr("error",e),i=r;break;case"img":case"image":case"link":Vr("error",e),Vr("load",e),i=r;break;case"details":Vr("toggle",e),i=r;break;case"input":$(e,r),i=Y(e,r),Vr("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=F({},r,{value:void 0}),Vr("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),Vr("invalid",e)}for(o in ve(n,i),l=i)if(l.hasOwnProperty(o)){var u=l[o];"style"===o?ge(e,u):"dangerouslySetInnerHTML"===o?null!=(u=u?u.__html:void 0)&&he(e,u):"children"===o?"string"===typeof u?("textarea"!==n||""!==u)&&de(e,u):"number"===typeof u&&de(e,""+u):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(a.hasOwnProperty(o)?null!=u&&"onScroll"===o&&Vr("scroll",e):null!=u&&w(e,o,u,c))}switch(n){case"input":W(e),Z(e,r,!1);break;case"textarea":W(e),oe(e);break;case"option":null!=r.value&&e.setAttribute("value",""+K(r.value));break;case"select":e.multiple=!!r.multiple,null!=(o=r.value)?ne(e,!!r.multiple,o,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=Zr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Ha(t),null;case 6:if(e&&null!=t.stateNode)La(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(s(166));if(n=no(to.current),no(Zs.current),hs(t)){if(r=t.stateNode,n=t.memoizedProps,r[di]=t,(o=r.nodeValue!==n)&&null!==(e=ns))switch(e.tag){case 3:Xr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Xr(r.nodeValue,n,0!==(1&e.mode))}o&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[di]=t,t.stateNode=r}return Ha(t),null;case 13:if(Ti(ao),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(is&&null!==rs&&0!==(1&t.mode)&&0===(128&t.flags))ds(),fs(),t.flags|=98560,o=!1;else if(o=hs(t),null!==r&&null!==r.dehydrated){if(null===e){if(!o)throw Error(s(318));if(!(o=null!==(o=t.memoizedState)?o.dehydrated:null))throw Error(s(317));o[di]=t}else fs(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Ha(t),o=!1}else null!==ss&&(al(ss),ss=null),o=!0;if(!o)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&ao.current)?0===Lc&&(Lc=3):gl())),null!==t.updateQueue&&(t.flags|=4),Ha(t),null);case 4:return io(),Ra(e,t),null===e&&Br(t.stateNode.containerInfo),Ha(t),null;case 10:return Ss(t.type._context),Ha(t),null;case 19:if(Ti(ao),null===(o=t.memoizedState))return Ha(t),null;if(r=0!==(128&t.flags),null===(c=o.rendering))if(r)Wa(o,!1);else{if(0!==Lc||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(c=co(e))){for(t.flags|=128,Wa(o,!1),null!==(r=c.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(o=n).flags&=14680066,null===(c=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=c.childLanes,o.lanes=c.lanes,o.child=c.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=c.memoizedProps,o.memoizedState=c.memoizedState,o.updateQueue=c.updateQueue,o.type=c.type,e=c.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return ki(ao,1&ao.current|2),t.child}e=e.sibling}null!==o.tail&&Je()>qc&&(t.flags|=128,r=!0,Wa(o,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=co(c))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Wa(o,!0),null===o.tail&&"hidden"===o.tailMode&&!c.alternate&&!is)return Ha(t),null}else 2*Je()-o.renderingStartTime>qc&&1073741824!==n&&(t.flags|=128,r=!0,Wa(o,!1),t.lanes=4194304);o.isBackwards?(c.sibling=t.child,t.child=c):(null!==(n=o.last)?n.sibling=c:t.child=c,o.last=c)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Je(),t.sibling=null,n=ao.current,ki(ao,r?1&n|2:1&n),t):(Ha(t),null);case 22:case 23:return dl(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Rc)&&(Ha(t),6&t.subtreeFlags&&(t.flags|=8192)):Ha(t),null;case 24:case 25:return null}throw Error(s(156,t.tag))}function Ya(e,t){switch(ts(t),t.tag){case 1:return Oi(t.type)&&Ri(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return io(),Ti(Ni),Ti(xi),uo(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return oo(t),null;case 13:if(Ti(ao),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(s(340));fs()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Ti(ao),null;case 4:return io(),null;case 10:return Ss(t.type._context),null;case 22:case 23:return dl(),null;default:return null}}Oa=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Ra=function(){},Da=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,no(Zs.current);var s,o=null;switch(n){case"input":i=Y(e,i),r=Y(e,r),o=[];break;case"select":i=F({},i,{value:void 0}),r=F({},r,{value:void 0}),o=[];break;case"textarea":i=re(e,i),r=re(e,r),o=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=Zr)}for(u in ve(n,r),n=null,i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&null!=i[u])if("style"===u){var c=i[u];for(s in c)c.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(a.hasOwnProperty(u)?o||(o=[]):(o=o||[]).push(u,null));for(u in r){var l=r[u];if(c=null!=i?i[u]:void 0,r.hasOwnProperty(u)&&l!==c&&(null!=l||null!=c))if("style"===u)if(c){for(s in c)!c.hasOwnProperty(s)||l&&l.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in l)l.hasOwnProperty(s)&&c[s]!==l[s]&&(n||(n={}),n[s]=l[s])}else n||(o||(o=[]),o.push(u,n)),n=l;else"dangerouslySetInnerHTML"===u?(l=l?l.__html:void 0,c=c?c.__html:void 0,null!=l&&c!==l&&(o=o||[]).push(u,l)):"children"===u?"string"!==typeof l&&"number"!==typeof l||(o=o||[]).push(u,""+l):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(a.hasOwnProperty(u)?(null!=l&&"onScroll"===u&&Vr("scroll",e),o||c===l||(o=[])):(o=o||[]).push(u,l))}n&&(o=o||[]).push("style",n);var u=o;(t.updateQueue=u)&&(t.flags|=4)}},La=function(e,t,n,r){n!==r&&(t.flags|=4)};var $a=!1,Ja=!1,Xa="function"===typeof WeakSet?WeakSet:Set,Za=null;function ec(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Tl(e,t,r)}else n.current=null}function tc(e,t,n){try{n()}catch(r){Tl(e,t,r)}}var nc=!1;function rc(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var s=i.destroy;i.destroy=void 0,void 0!==s&&tc(t,n,s)}i=i.next}while(i!==r)}}function ic(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function sc(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function oc(e){var t=e.alternate;null!==t&&(e.alternate=null,oc(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[di],delete t[fi],delete t[mi],delete t[gi],delete t[yi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function ac(e){return 5===e.tag||3===e.tag||4===e.tag}function cc(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||ac(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function lc(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Zr));else if(4!==r&&null!==(e=e.child))for(lc(e,t,n),e=e.sibling;null!==e;)lc(e,t,n),e=e.sibling}function uc(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(uc(e,t,n),e=e.sibling;null!==e;)uc(e,t,n),e=e.sibling}var hc=null,dc=!1;function fc(e,t,n){for(n=n.child;null!==n;)pc(e,t,n),n=n.sibling}function pc(e,t,n){if(st&&"function"===typeof st.onCommitFiberUnmount)try{st.onCommitFiberUnmount(it,n)}catch(a){}switch(n.tag){case 5:Ja||ec(n,t);case 6:var r=hc,i=dc;hc=null,fc(e,t,n),dc=i,null!==(hc=r)&&(dc?(e=hc,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):hc.removeChild(n.stateNode));break;case 18:null!==hc&&(dc?(e=hc,n=n.stateNode,8===e.nodeType?ci(e.parentNode,n):1===e.nodeType&&ci(e,n),Bt(e)):ci(hc,n.stateNode));break;case 4:r=hc,i=dc,hc=n.stateNode.containerInfo,dc=!0,fc(e,t,n),hc=r,dc=i;break;case 0:case 11:case 14:case 15:if(!Ja&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,void 0!==o&&(0!==(2&s)||0!==(4&s))&&tc(n,t,o),i=i.next}while(i!==r)}fc(e,t,n);break;case 1:if(!Ja&&(ec(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Tl(n,t,a)}fc(e,t,n);break;case 21:fc(e,t,n);break;case 22:1&n.mode?(Ja=(r=Ja)||null!==n.memoizedState,fc(e,t,n),Ja=r):fc(e,t,n);break;default:fc(e,t,n)}}function mc(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Xa),t.forEach((function(t){var r=Nl.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function gc(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var o=e,a=t,c=a;e:for(;null!==c;){switch(c.tag){case 5:hc=c.stateNode,dc=!1;break e;case 3:case 4:hc=c.stateNode.containerInfo,dc=!0;break e}c=c.return}if(null===hc)throw Error(s(160));pc(o,a,i),hc=null,dc=!1;var l=i.alternate;null!==l&&(l.return=null),i.return=null}catch(u){Tl(i,t,u)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)yc(t,e),t=t.sibling}function yc(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(gc(t,e),vc(e),4&r){try{rc(3,e,e.return),ic(3,e)}catch(g){Tl(e,e.return,g)}try{rc(5,e,e.return)}catch(g){Tl(e,e.return,g)}}break;case 1:gc(t,e),vc(e),512&r&&null!==n&&ec(n,n.return);break;case 5:if(gc(t,e),vc(e),512&r&&null!==n&&ec(n,n.return),32&e.flags){var i=e.stateNode;try{de(i,"")}catch(g){Tl(e,e.return,g)}}if(4&r&&null!=(i=e.stateNode)){var o=e.memoizedProps,a=null!==n?n.memoizedProps:o,c=e.type,l=e.updateQueue;if(e.updateQueue=null,null!==l)try{"input"===c&&"radio"===o.type&&null!=o.name&&J(i,o),we(c,a);var u=we(c,o);for(a=0;a<l.length;a+=2){var h=l[a],d=l[a+1];"style"===h?ge(i,d):"dangerouslySetInnerHTML"===h?he(i,d):"children"===h?de(i,d):w(i,h,d,u)}switch(c){case"input":X(i,o);break;case"textarea":se(i,o);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var p=o.value;null!=p?ne(i,!!o.multiple,p,!1):f!==!!o.multiple&&(null!=o.defaultValue?ne(i,!!o.multiple,o.defaultValue,!0):ne(i,!!o.multiple,o.multiple?[]:"",!1))}i[fi]=o}catch(g){Tl(e,e.return,g)}}break;case 6:if(gc(t,e),vc(e),4&r){if(null===e.stateNode)throw Error(s(162));i=e.stateNode,o=e.memoizedProps;try{i.nodeValue=o}catch(g){Tl(e,e.return,g)}}break;case 3:if(gc(t,e),vc(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Bt(t.containerInfo)}catch(g){Tl(e,e.return,g)}break;case 4:default:gc(t,e),vc(e);break;case 13:gc(t,e),vc(e),8192&(i=e.child).flags&&(o=null!==i.memoizedState,i.stateNode.isHidden=o,!o||null!==i.alternate&&null!==i.alternate.memoizedState||(Bc=Je())),4&r&&mc(e);break;case 22:if(h=null!==n&&null!==n.memoizedState,1&e.mode?(Ja=(u=Ja)||h,gc(t,e),Ja=u):gc(t,e),vc(e),8192&r){if(u=null!==e.memoizedState,(e.stateNode.isHidden=u)&&!h&&0!==(1&e.mode))for(Za=e,h=e.child;null!==h;){for(d=Za=h;null!==Za;){switch(p=(f=Za).child,f.tag){case 0:case 11:case 14:case 15:rc(4,f,f.return);break;case 1:ec(f,f.return);var m=f.stateNode;if("function"===typeof m.componentWillUnmount){r=f,n=f.return;try{t=r,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(g){Tl(r,n,g)}}break;case 5:ec(f,f.return);break;case 22:if(null!==f.memoizedState){Sc(d);continue}}null!==p?(p.return=f,Za=p):Sc(d)}h=h.sibling}e:for(h=null,d=e;;){if(5===d.tag){if(null===h){h=d;try{i=d.stateNode,u?"function"===typeof(o=i.style).setProperty?o.setProperty("display","none","important"):o.display="none":(c=d.stateNode,a=void 0!==(l=d.memoizedProps.style)&&null!==l&&l.hasOwnProperty("display")?l.display:null,c.style.display=me("display",a))}catch(g){Tl(e,e.return,g)}}}else if(6===d.tag){if(null===h)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(g){Tl(e,e.return,g)}}else if((22!==d.tag&&23!==d.tag||null===d.memoizedState||d===e)&&null!==d.child){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;null===d.sibling;){if(null===d.return||d.return===e)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:gc(t,e),vc(e),4&r&&mc(e);case 21:}}function vc(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(ac(n)){var r=n;break e}n=n.return}throw Error(s(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(de(i,""),r.flags&=-33),uc(e,cc(e),i);break;case 3:case 4:var o=r.stateNode.containerInfo;lc(e,cc(e),o);break;default:throw Error(s(161))}}catch(a){Tl(e,e.return,a)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function wc(e,t,n){Za=e,bc(e,t,n)}function bc(e,t,n){for(var r=0!==(1&e.mode);null!==Za;){var i=Za,s=i.child;if(22===i.tag&&r){var o=null!==i.memoizedState||$a;if(!o){var a=i.alternate,c=null!==a&&null!==a.memoizedState||Ja;a=$a;var l=Ja;if($a=o,(Ja=c)&&!l)for(Za=i;null!==Za;)c=(o=Za).child,22===o.tag&&null!==o.memoizedState?Ec(i):null!==c?(c.return=o,Za=c):Ec(i);for(;null!==s;)Za=s,bc(s,t,n),s=s.sibling;Za=i,$a=a,Ja=l}_c(e)}else 0!==(8772&i.subtreeFlags)&&null!==s?(s.return=i,Za=s):_c(e)}}function _c(e){for(;null!==Za;){var t=Za;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Ja||ic(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Ja)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:gs(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&Us(t,o,r);break;case 3:var a=t.updateQueue;if(null!==a){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Us(t,a,n)}break;case 5:var c=t.stateNode;if(null===n&&4&t.flags){n=c;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var u=t.alternate;if(null!==u){var h=u.memoizedState;if(null!==h){var d=h.dehydrated;null!==d&&Bt(d)}}}break;default:throw Error(s(163))}Ja||512&t.flags&&sc(t)}catch(f){Tl(t,t.return,f)}}if(t===e){Za=null;break}if(null!==(n=t.sibling)){n.return=t.return,Za=n;break}Za=t.return}}function Sc(e){for(;null!==Za;){var t=Za;if(t===e){Za=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Za=n;break}Za=t.return}}function Ec(e){for(;null!==Za;){var t=Za;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{ic(4,t)}catch(c){Tl(t,n,c)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(c){Tl(t,i,c)}}var s=t.return;try{sc(t)}catch(c){Tl(t,s,c)}break;case 5:var o=t.return;try{sc(t)}catch(c){Tl(t,o,c)}}}catch(c){Tl(t,t.return,c)}if(t===e){Za=null;break}var a=t.sibling;if(null!==a){a.return=t.return,Za=a;break}Za=t.return}}var Ic,Tc=Math.ceil,kc=b.ReactCurrentDispatcher,Cc=b.ReactCurrentOwner,xc=b.ReactCurrentBatchConfig,Nc=0,Ac=null,Pc=null,Oc=0,Rc=0,Dc=Ii(0),Lc=0,Mc=null,Fc=0,Uc=0,Vc=0,jc=null,zc=null,Bc=0,qc=1/0,Kc=null,Gc=!1,Wc=null,Hc=null,Qc=!1,Yc=null,$c=0,Jc=0,Xc=null,Zc=-1,el=0;function tl(){return 0!==(6&Nc)?Je():-1!==Zc?Zc:Zc=Je()}function nl(e){return 0===(1&e.mode)?1:0!==(2&Nc)&&0!==Oc?Oc&-Oc:null!==ms.transition?(0===el&&(el=mt()),el):0!==(e=wt)?e:e=void 0===(e=window.event)?16:$t(e.type)}function rl(e,t,n,r){if(50<Jc)throw Jc=0,Xc=null,Error(s(185));yt(e,n,r),0!==(2&Nc)&&e===Ac||(e===Ac&&(0===(2&Nc)&&(Uc|=n),4===Lc&&cl(e,Oc)),il(e,r),1===n&&0===Nc&&0===(1&t.mode)&&(qc=Je()+500,Vi&&Bi()))}function il(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,s=e.pendingLanes;0<s;){var o=31-ot(s),a=1<<o,c=i[o];-1===c?0!==(a&n)&&0===(a&r)||(i[o]=ft(a,t)):c<=t&&(e.expiredLanes|=a),s&=~a}}(e,t);var r=dt(e,e===Ac?Oc:0);if(0===r)null!==n&&Qe(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Qe(n),1===t)0===e.tag?function(e){Vi=!0,zi(e)}(ll.bind(null,e)):zi(ll.bind(null,e)),oi((function(){0===(6&Nc)&&Bi()})),n=null;else{switch(bt(r)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Al(n,sl.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function sl(e,t){if(Zc=-1,el=0,0!==(6&Nc))throw Error(s(327));var n=e.callbackNode;if(El()&&e.callbackNode!==n)return null;var r=dt(e,e===Ac?Oc:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=yl(e,r);else{t=r;var i=Nc;Nc|=2;var o=ml();for(Ac===e&&Oc===t||(Kc=null,qc=Je()+500,fl(e,t));;)try{wl();break}catch(c){pl(e,c)}_s(),kc.current=o,Nc=i,null!==Pc?t=0:(Ac=null,Oc=0,t=Lc)}if(0!==t){if(2===t&&(0!==(i=pt(e))&&(r=i,t=ol(e,i))),1===t)throw n=Mc,fl(e,0),cl(e,r),il(e,Je()),n;if(6===t)cl(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!ar(s(),i))return!1}catch(a){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=yl(e,r))&&(0!==(o=pt(e))&&(r=o,t=ol(e,o))),1===t))throw n=Mc,fl(e,0),cl(e,r),il(e,Je()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(s(345));case 2:case 5:Sl(e,zc,Kc);break;case 3:if(cl(e,r),(130023424&r)===r&&10<(t=Bc+500-Je())){if(0!==dt(e,0))break;if(((i=e.suspendedLanes)&r)!==r){tl(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(Sl.bind(null,e,zc,Kc),t);break}Sl(e,zc,Kc);break;case 4:if(cl(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var a=31-ot(r);o=1<<a,(a=t[a])>i&&(i=a),r&=~o}if(r=i,10<(r=(120>(r=Je()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Tc(r/1960))-r)){e.timeoutHandle=ri(Sl.bind(null,e,zc,Kc),r);break}Sl(e,zc,Kc);break;default:throw Error(s(329))}}}return il(e,Je()),e.callbackNode===n?sl.bind(null,e):null}function ol(e,t){var n=jc;return e.current.memoizedState.isDehydrated&&(fl(e,t).flags|=256),2!==(e=yl(e,t))&&(t=zc,zc=n,null!==t&&al(t)),e}function al(e){null===zc?zc=e:zc.push.apply(zc,e)}function cl(e,t){for(t&=~Vc,t&=~Uc,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ot(t),r=1<<n;e[n]=-1,t&=~r}}function ll(e){if(0!==(6&Nc))throw Error(s(327));El();var t=dt(e,0);if(0===(1&t))return il(e,Je()),null;var n=yl(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=ol(e,r))}if(1===n)throw n=Mc,fl(e,0),cl(e,t),il(e,Je()),n;if(6===n)throw Error(s(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Sl(e,zc,Kc),il(e,Je()),null}function ul(e,t){var n=Nc;Nc|=1;try{return e(t)}finally{0===(Nc=n)&&(qc=Je()+500,Vi&&Bi())}}function hl(e){null!==Yc&&0===Yc.tag&&0===(6&Nc)&&El();var t=Nc;Nc|=1;var n=xc.transition,r=wt;try{if(xc.transition=null,wt=1,e)return e()}finally{wt=r,xc.transition=n,0===(6&(Nc=t))&&Bi()}}function dl(){Rc=Dc.current,Ti(Dc)}function fl(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==Pc)for(n=Pc.return;null!==n;){var r=n;switch(ts(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Ri();break;case 3:io(),Ti(Ni),Ti(xi),uo();break;case 5:oo(r);break;case 4:io();break;case 13:case 19:Ti(ao);break;case 10:Ss(r.type._context);break;case 22:case 23:dl()}n=n.return}if(Ac=e,Pc=e=Dl(e.current,null),Oc=Rc=t,Lc=0,Mc=null,Vc=Uc=Fc=0,zc=jc=null,null!==ks){for(t=0;t<ks.length;t++)if(null!==(r=(n=ks[t]).interleaved)){n.interleaved=null;var i=r.next,s=n.pending;if(null!==s){var o=s.next;s.next=i,r.next=o}n.pending=r}ks=null}return e}function pl(e,t){for(;;){var n=Pc;try{if(_s(),ho.current=oa,vo){for(var r=mo.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}vo=!1}if(po=0,yo=go=mo=null,wo=!1,bo=0,Cc.current=null,null===n||null===n.return){Lc=1,Mc=t,Pc=null;break}e:{var o=e,a=n.return,c=n,l=t;if(t=Oc,c.flags|=32768,null!==l&&"object"===typeof l&&"function"===typeof l.then){var u=l,h=c,d=h.tag;if(0===(1&h.mode)&&(0===d||11===d||15===d)){var f=h.alternate;f?(h.updateQueue=f.updateQueue,h.memoizedState=f.memoizedState,h.lanes=f.lanes):(h.updateQueue=null,h.memoizedState=null)}var p=ya(a);if(null!==p){p.flags&=-257,va(p,a,c,0,t),1&p.mode&&ga(o,u,t),l=u;var m=(t=p).updateQueue;if(null===m){var g=new Set;g.add(l),t.updateQueue=g}else m.add(l);break e}if(0===(1&t)){ga(o,u,t),gl();break e}l=Error(s(426))}else if(is&&1&c.mode){var y=ya(a);if(null!==y){0===(65536&y.flags)&&(y.flags|=256),va(y,a,c,0,t),ps(ua(l,c));break e}}o=l=ua(l,c),4!==Lc&&(Lc=2),null===jc?jc=[o]:jc.push(o),o=a;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t,Ms(o,pa(0,l,t));break e;case 1:c=l;var v=o.type,w=o.stateNode;if(0===(128&o.flags)&&("function"===typeof v.getDerivedStateFromError||null!==w&&"function"===typeof w.componentDidCatch&&(null===Hc||!Hc.has(w)))){o.flags|=65536,t&=-t,o.lanes|=t,Ms(o,ma(o,c,t));break e}}o=o.return}while(null!==o)}_l(n)}catch(b){t=b,Pc===n&&null!==n&&(Pc=n=n.return);continue}break}}function ml(){var e=kc.current;return kc.current=oa,null===e?oa:e}function gl(){0!==Lc&&3!==Lc&&2!==Lc||(Lc=4),null===Ac||0===(268435455&Fc)&&0===(268435455&Uc)||cl(Ac,Oc)}function yl(e,t){var n=Nc;Nc|=2;var r=ml();for(Ac===e&&Oc===t||(Kc=null,fl(e,t));;)try{vl();break}catch(i){pl(e,i)}if(_s(),Nc=n,kc.current=r,null!==Pc)throw Error(s(261));return Ac=null,Oc=0,Lc}function vl(){for(;null!==Pc;)bl(Pc)}function wl(){for(;null!==Pc&&!Ye();)bl(Pc)}function bl(e){var t=Ic(e.alternate,e,Rc);e.memoizedProps=e.pendingProps,null===t?_l(e):Pc=t,Cc.current=null}function _l(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Qa(n,t,Rc)))return void(Pc=n)}else{if(null!==(n=Ya(n,t)))return n.flags&=32767,void(Pc=n);if(null===e)return Lc=6,void(Pc=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Pc=t);Pc=t=e}while(null!==t);0===Lc&&(Lc=5)}function Sl(e,t,n){var r=wt,i=xc.transition;try{xc.transition=null,wt=1,function(e,t,n,r){do{El()}while(null!==Yc);if(0!==(6&Nc))throw Error(s(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(s(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-ot(n),s=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~s}}(e,o),e===Ac&&(Pc=Ac=null,Oc=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Qc||(Qc=!0,Al(tt,(function(){return El(),null}))),o=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||o){o=xc.transition,xc.transition=null;var a=wt;wt=1;var c=Nc;Nc|=4,Cc.current=null,function(e,t){if(ei=Kt,fr(e=dr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(_){n=null;break e}var a=0,c=-1,l=-1,u=0,h=0,d=e,f=null;t:for(;;){for(var p;d!==n||0!==i&&3!==d.nodeType||(c=a+i),d!==o||0!==r&&3!==d.nodeType||(l=a+r),3===d.nodeType&&(a+=d.nodeValue.length),null!==(p=d.firstChild);)f=d,d=p;for(;;){if(d===e)break t;if(f===n&&++u===i&&(c=a),f===o&&++h===r&&(l=a),null!==(p=d.nextSibling))break;f=(d=f).parentNode}d=p}n=-1===c||-1===l?null:{start:c,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},Kt=!1,Za=t;null!==Za;)if(e=(t=Za).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Za=e;else for(;null!==Za;){t=Za;try{var m=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==m){var g=m.memoizedProps,y=m.memoizedState,v=t.stateNode,w=v.getSnapshotBeforeUpdate(t.elementType===t.type?g:gs(t.type,g),y);v.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var b=t.stateNode.containerInfo;1===b.nodeType?b.textContent="":9===b.nodeType&&b.documentElement&&b.removeChild(b.documentElement);break;default:throw Error(s(163))}}catch(_){Tl(t,t.return,_)}if(null!==(e=t.sibling)){e.return=t.return,Za=e;break}Za=t.return}m=nc,nc=!1}(e,n),yc(n,e),pr(ti),Kt=!!ei,ti=ei=null,e.current=n,wc(n,e,i),$e(),Nc=c,wt=a,xc.transition=o}else e.current=n;if(Qc&&(Qc=!1,Yc=e,$c=i),o=e.pendingLanes,0===o&&(Hc=null),function(e){if(st&&"function"===typeof st.onCommitFiberRoot)try{st.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),il(e,Je()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Gc)throw Gc=!1,e=Wc,Wc=null,e;0!==(1&$c)&&0!==e.tag&&El(),o=e.pendingLanes,0!==(1&o)?e===Xc?Jc++:(Jc=0,Xc=e):Jc=0,Bi()}(e,t,n,r)}finally{xc.transition=i,wt=r}return null}function El(){if(null!==Yc){var e=bt($c),t=xc.transition,n=wt;try{if(xc.transition=null,wt=16>e?16:e,null===Yc)var r=!1;else{if(e=Yc,Yc=null,$c=0,0!==(6&Nc))throw Error(s(331));var i=Nc;for(Nc|=4,Za=e.current;null!==Za;){var o=Za,a=o.child;if(0!==(16&Za.flags)){var c=o.deletions;if(null!==c){for(var l=0;l<c.length;l++){var u=c[l];for(Za=u;null!==Za;){var h=Za;switch(h.tag){case 0:case 11:case 15:rc(8,h,o)}var d=h.child;if(null!==d)d.return=h,Za=d;else for(;null!==Za;){var f=(h=Za).sibling,p=h.return;if(oc(h),h===u){Za=null;break}if(null!==f){f.return=p,Za=f;break}Za=p}}}var m=o.alternate;if(null!==m){var g=m.child;if(null!==g){m.child=null;do{var y=g.sibling;g.sibling=null,g=y}while(null!==g)}}Za=o}}if(0!==(2064&o.subtreeFlags)&&null!==a)a.return=o,Za=a;else e:for(;null!==Za;){if(0!==(2048&(o=Za).flags))switch(o.tag){case 0:case 11:case 15:rc(9,o,o.return)}var v=o.sibling;if(null!==v){v.return=o.return,Za=v;break e}Za=o.return}}var w=e.current;for(Za=w;null!==Za;){var b=(a=Za).child;if(0!==(2064&a.subtreeFlags)&&null!==b)b.return=a,Za=b;else e:for(a=w;null!==Za;){if(0!==(2048&(c=Za).flags))try{switch(c.tag){case 0:case 11:case 15:ic(9,c)}}catch(S){Tl(c,c.return,S)}if(c===a){Za=null;break e}var _=c.sibling;if(null!==_){_.return=c.return,Za=_;break e}Za=c.return}}if(Nc=i,Bi(),st&&"function"===typeof st.onPostCommitFiberRoot)try{st.onPostCommitFiberRoot(it,e)}catch(S){}r=!0}return r}finally{wt=n,xc.transition=t}}return!1}function Il(e,t,n){e=Ds(e,t=pa(0,t=ua(n,t),1),1),t=tl(),null!==e&&(yt(e,1,t),il(e,t))}function Tl(e,t,n){if(3===e.tag)Il(e,e,n);else for(;null!==t;){if(3===t.tag){Il(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Hc||!Hc.has(r))){t=Ds(t,e=ma(t,e=ua(n,e),1),1),e=tl(),null!==t&&(yt(t,1,e),il(t,e));break}}t=t.return}}function kl(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=tl(),e.pingedLanes|=e.suspendedLanes&n,Ac===e&&(Oc&n)===n&&(4===Lc||3===Lc&&(130023424&Oc)===Oc&&500>Je()-Bc?fl(e,0):Vc|=n),il(e,t)}function Cl(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ut,0===(130023424&(ut<<=1))&&(ut=4194304)));var n=tl();null!==(e=Ns(e,t))&&(yt(e,t,n),il(e,n))}function xl(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Cl(e,n)}function Nl(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(s(314))}null!==r&&r.delete(t),Cl(e,n)}function Al(e,t){return He(e,t)}function Pl(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ol(e,t,n,r){return new Pl(e,t,n,r)}function Rl(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Dl(e,t){var n=e.alternate;return null===n?((n=Ol(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Ll(e,t,n,r,i,o){var a=2;if(r=e,"function"===typeof e)Rl(e)&&(a=1);else if("string"===typeof e)a=5;else e:switch(e){case E:return Ml(n.children,i,o,t);case I:a=8,i|=8;break;case T:return(e=Ol(12,n,t,2|i)).elementType=T,e.lanes=o,e;case N:return(e=Ol(13,n,t,i)).elementType=N,e.lanes=o,e;case A:return(e=Ol(19,n,t,i)).elementType=A,e.lanes=o,e;case R:return Fl(n,i,o,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case k:a=10;break e;case C:a=9;break e;case x:a=11;break e;case P:a=14;break e;case O:a=16,r=null;break e}throw Error(s(130,null==e?e:typeof e,""))}return(t=Ol(a,n,t,i)).elementType=e,t.type=r,t.lanes=o,t}function Ml(e,t,n,r){return(e=Ol(7,e,r,t)).lanes=n,e}function Fl(e,t,n,r){return(e=Ol(22,e,r,t)).elementType=R,e.lanes=n,e.stateNode={isHidden:!1},e}function Ul(e,t,n){return(e=Ol(6,e,null,t)).lanes=n,e}function Vl(e,t,n){return(t=Ol(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function jl(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gt(0),this.expirationTimes=gt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function zl(e,t,n,r,i,s,o,a,c){return e=new jl(e,t,n,a,c),1===t?(t=1,!0===s&&(t|=8)):t=0,s=Ol(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ps(s),e}function Bl(e){if(!e)return Ci;e:{if(Be(e=e._reactInternals)!==e||1!==e.tag)throw Error(s(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Oi(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(s(171))}if(1===e.tag){var n=e.type;if(Oi(n))return Li(e,n,t)}return t}function ql(e,t,n,r,i,s,o,a,c){return(e=zl(n,r,!0,e,0,s,0,a,c)).context=Bl(null),n=e.current,(s=Rs(r=tl(),i=nl(n))).callback=void 0!==t&&null!==t?t:null,Ds(n,s,i),e.current.lanes=i,yt(e,i,r),il(e,r),e}function Kl(e,t,n,r){var i=t.current,s=tl(),o=nl(i);return n=Bl(n),null===t.context?t.context=n:t.pendingContext=n,(t=Rs(s,o)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Ds(i,t,o))&&(rl(e,i,o,s),Ls(e,i,o)),o}function Gl(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Wl(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Hl(e,t){Wl(e,t),(e=e.alternate)&&Wl(e,t)}Ic=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ni.current)ba=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return ba=!1,function(e,t,n){switch(t.tag){case 3:Aa(t),fs();break;case 5:so(t);break;case 1:Oi(t.type)&&Mi(t);break;case 4:ro(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;ki(ys,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(ki(ao,1&ao.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Ua(e,t,n):(ki(ao,1&ao.current),null!==(e=Ga(e,t,n))?e.sibling:null);ki(ao,1&ao.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return qa(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),ki(ao,ao.current),r)break;return null;case 22:case 23:return t.lanes=0,Ta(e,t,n)}return Ga(e,t,n)}(e,t,n);ba=0!==(131072&e.flags)}else ba=!1,is&&0!==(1048576&t.flags)&&Zi(t,Wi,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Ka(e,t),e=t.pendingProps;var i=Pi(t,xi.current);Is(t,n),i=Io(null,t,r,e,i,n);var o=To();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Oi(r)?(o=!0,Mi(t)):o=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Ps(t),i.updater=zs,t.stateNode=i,i._reactInternals=t,Gs(t,r,e,n),t=Na(null,t,r,!0,o,n)):(t.tag=0,is&&o&&es(t),_a(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Ka(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Rl(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===x)return 11;if(e===P)return 14}return 2}(r),e=gs(r,e),i){case 0:t=Ca(null,t,r,e,n);break e;case 1:t=xa(null,t,r,e,n);break e;case 11:t=Sa(null,t,r,e,n);break e;case 14:t=Ea(null,t,r,gs(r.type,e),n);break e}throw Error(s(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,Ca(e,t,r,i=t.elementType===r?i:gs(r,i),n);case 1:return r=t.type,i=t.pendingProps,xa(e,t,r,i=t.elementType===r?i:gs(r,i),n);case 3:e:{if(Aa(t),null===e)throw Error(s(387));r=t.pendingProps,i=(o=t.memoizedState).element,Os(e,t),Fs(t,r,null,n);var a=t.memoizedState;if(r=a.element,o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Pa(e,t,r,n,i=ua(Error(s(423)),t));break e}if(r!==i){t=Pa(e,t,r,n,i=ua(Error(s(424)),t));break e}for(rs=li(t.stateNode.containerInfo.firstChild),ns=t,is=!0,ss=null,n=Js(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(fs(),r===i){t=Ga(e,t,n);break e}_a(e,t,r,n)}t=t.child}return t;case 5:return so(t),null===e&&ls(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,a=i.children,ni(r,i)?a=null:null!==o&&ni(r,o)&&(t.flags|=32),ka(e,t),_a(e,t,a,n),t.child;case 6:return null===e&&ls(t),null;case 13:return Ua(e,t,n);case 4:return ro(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=$s(t,null,r,n):_a(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,Sa(e,t,r,i=t.elementType===r?i:gs(r,i),n);case 7:return _a(e,t,t.pendingProps,n),t.child;case 8:case 12:return _a(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,a=i.value,ki(ys,r._currentValue),r._currentValue=a,null!==o)if(ar(o.value,a)){if(o.children===i.children&&!Ni.current){t=Ga(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var c=o.dependencies;if(null!==c){a=o.child;for(var l=c.firstContext;null!==l;){if(l.context===r){if(1===o.tag){(l=Rs(-1,n&-n)).tag=2;var u=o.updateQueue;if(null!==u){var h=(u=u.shared).pending;null===h?l.next=l:(l.next=h.next,h.next=l),u.pending=l}}o.lanes|=n,null!==(l=o.alternate)&&(l.lanes|=n),Es(o.return,n,t),c.lanes|=n;break}l=l.next}}else if(10===o.tag)a=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(a=o.return))throw Error(s(341));a.lanes|=n,null!==(c=a.alternate)&&(c.lanes|=n),Es(a,n,t),a=o.sibling}else a=o.child;if(null!==a)a.return=o;else for(a=o;null!==a;){if(a===t){a=null;break}if(null!==(o=a.sibling)){o.return=a.return,a=o;break}a=a.return}o=a}_a(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Is(t,n),r=r(i=Ts(i)),t.flags|=1,_a(e,t,r,n),t.child;case 14:return i=gs(r=t.type,t.pendingProps),Ea(e,t,r,i=gs(r.type,i),n);case 15:return Ia(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:gs(r,i),Ka(e,t),t.tag=1,Oi(r)?(e=!0,Mi(t)):e=!1,Is(t,n),qs(t,r,i),Gs(t,r,i,n),Na(null,t,r,!0,e,n);case 19:return qa(e,t,n);case 22:return Ta(e,t,n)}throw Error(s(156,t.tag))};var Ql="function"===typeof reportError?reportError:function(e){console.error(e)};function Yl(e){this._internalRoot=e}function $l(e){this._internalRoot=e}function Jl(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Xl(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Zl(){}function eu(e,t,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if("function"===typeof i){var a=i;i=function(){var e=Gl(o);a.call(e)}}Kl(t,o,e,i)}else o=function(e,t,n,r,i){if(i){if("function"===typeof r){var s=r;r=function(){var e=Gl(o);s.call(e)}}var o=ql(t,r,e,0,null,!1,0,"",Zl);return e._reactRootContainer=o,e[pi]=o.current,Br(8===e.nodeType?e.parentNode:e),hl(),o}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var a=r;r=function(){var e=Gl(c);a.call(e)}}var c=zl(e,0,!1,null,0,!1,0,"",Zl);return e._reactRootContainer=c,e[pi]=c.current,Br(8===e.nodeType?e.parentNode:e),hl((function(){Kl(t,c,n,r)})),c}(n,t,e,i,r);return Gl(o)}$l.prototype.render=Yl.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(s(409));Kl(e,t,null,null)},$l.prototype.unmount=Yl.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;hl((function(){Kl(null,e,null,null)})),t[pi]=null}},$l.prototype.unstable_scheduleHydration=function(e){if(e){var t=It();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Rt.length&&0!==t&&t<Rt[n].priority;n++);Rt.splice(n,0,e),0===n&&Ft(e)}},_t=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ht(t.pendingLanes);0!==n&&(vt(t,1|n),il(t,Je()),0===(6&Nc)&&(qc=Je()+500,Bi()))}break;case 13:hl((function(){var t=Ns(e,1);if(null!==t){var n=tl();rl(t,e,1,n)}})),Hl(e,1)}},St=function(e){if(13===e.tag){var t=Ns(e,134217728);if(null!==t)rl(t,e,134217728,tl());Hl(e,134217728)}},Et=function(e){if(13===e.tag){var t=nl(e),n=Ns(e,t);if(null!==n)rl(n,e,t,tl());Hl(e,t)}},It=function(){return wt},Tt=function(e,t){var n=wt;try{return wt=e,t()}finally{wt=n}},Se=function(e,t,n){switch(t){case"input":if(X(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=_i(r);if(!i)throw Error(s(90));H(r),X(r,i)}}}break;case"textarea":se(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},xe=ul,Ne=hl;var tu={usingClientEntryPoint:!1,Events:[wi,bi,_i,ke,Ce,ul]},nu={findFiberByHostInstance:vi,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},ru={bundleType:nu.bundleType,version:nu.version,rendererPackageName:nu.rendererPackageName,rendererConfig:nu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:b.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ge(e))?null:e.stateNode},findFiberByHostInstance:nu.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var iu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!iu.isDisabled&&iu.supportsFiber)try{it=iu.inject(ru),st=iu}catch(ue){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tu,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Jl(t))throw Error(s(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:S,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Jl(e))throw Error(s(299));var n=!1,r="",i=Ql;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=zl(e,1,!1,null,0,n,0,r,i),e[pi]=t.current,Br(8===e.nodeType?e.parentNode:e),new Yl(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(s(188));throw e=Object.keys(e).join(","),Error(s(268,e))}return e=null===(e=Ge(t))?null:e.stateNode},t.flushSync=function(e){return hl(e)},t.hydrate=function(e,t,n){if(!Xl(t))throw Error(s(200));return eu(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Jl(e))throw Error(s(405));var r=null!=n&&n.hydratedSources||null,i=!1,o="",a=Ql;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(a=n.onRecoverableError)),t=ql(t,null,e,1,null!=n?n:null,i,0,o,a),e[pi]=t.current,Br(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new $l(t)},t.render=function(e,t,n){if(!Xl(t))throw Error(s(200));return eu(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Xl(e))throw Error(s(40));return!!e._reactRootContainer&&(hl((function(){eu(null,null,e,!1,(function(){e._reactRootContainer=null,e[pi]=null}))})),!0)},t.unstable_batchedUpdates=ul,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Xl(n))throw Error(s(200));if(null==e||void 0===e._reactInternals)throw Error(s(38));return eu(e,t,n,!1,r)},t.version="18.2.0-next-9e3b772b8-20220608"},391:(e,t,n)=>{"use strict";var r=n(950);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},950:(e,t,n)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(730)},403:e=>{e.exports=Array.isArray||function(e){return"[object Array]"==Object.prototype.toString.call(e)}},221:(e,t,n)=>{var r=n(403);e.exports=f,e.exports.parse=s,e.exports.compile=function(e,t){return a(s(e,t),t)},e.exports.tokensToFunction=a,e.exports.tokensToRegExp=d;var i=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?|(\\*))"].join("|"),"g");function s(e,t){for(var n,r=[],s=0,o=0,a="",u=t&&t.delimiter||"/";null!=(n=i.exec(e));){var h=n[0],d=n[1],f=n.index;if(a+=e.slice(o,f),o=f+h.length,d)a+=d[1];else{var p=e[o],m=n[2],g=n[3],y=n[4],v=n[5],w=n[6],b=n[7];a&&(r.push(a),a="");var _=null!=m&&null!=p&&p!==m,S="+"===w||"*"===w,E="?"===w||"*"===w,I=n[2]||u,T=y||v;r.push({name:g||s++,prefix:m||"",delimiter:I,optional:E,repeat:S,partial:_,asterisk:!!b,pattern:T?l(T):b?".*":"[^"+c(I)+"]+?"})}}return o<e.length&&(a+=e.substr(o)),a&&r.push(a),r}function o(e){return encodeURI(e).replace(/[\/?#]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()}))}function a(e,t){for(var n=new Array(e.length),i=0;i<e.length;i++)"object"===typeof e[i]&&(n[i]=new RegExp("^(?:"+e[i].pattern+")$",h(t)));return function(t,i){for(var s="",a=t||{},c=(i||{}).pretty?o:encodeURIComponent,l=0;l<e.length;l++){var u=e[l];if("string"!==typeof u){var h,d=a[u.name];if(null==d){if(u.optional){u.partial&&(s+=u.prefix);continue}throw new TypeError('Expected "'+u.name+'" to be defined')}if(r(d)){if(!u.repeat)throw new TypeError('Expected "'+u.name+'" to not repeat, but received `'+JSON.stringify(d)+"`");if(0===d.length){if(u.optional)continue;throw new TypeError('Expected "'+u.name+'" to not be empty')}for(var f=0;f<d.length;f++){if(h=c(d[f]),!n[l].test(h))throw new TypeError('Expected all "'+u.name+'" to match "'+u.pattern+'", but received `'+JSON.stringify(h)+"`");s+=(0===f?u.prefix:u.delimiter)+h}}else{if(h=u.asterisk?encodeURI(d).replace(/[?#]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})):c(d),!n[l].test(h))throw new TypeError('Expected "'+u.name+'" to match "'+u.pattern+'", but received "'+h+'"');s+=u.prefix+h}}else s+=u}return s}}function c(e){return e.replace(/([.+*?=^!:${}()[\]|\/\\])/g,"\\$1")}function l(e){return e.replace(/([=!:$\/()])/g,"\\$1")}function u(e,t){return e.keys=t,e}function h(e){return e&&e.sensitive?"":"i"}function d(e,t,n){r(t)||(n=t||n,t=[]);for(var i=(n=n||{}).strict,s=!1!==n.end,o="",a=0;a<e.length;a++){var l=e[a];if("string"===typeof l)o+=c(l);else{var d=c(l.prefix),f="(?:"+l.pattern+")";t.push(l),l.repeat&&(f+="(?:"+d+f+")*"),o+=f=l.optional?l.partial?d+"("+f+")?":"(?:"+d+"("+f+"))?":d+"("+f+")"}}var p=c(n.delimiter||"/"),m=o.slice(-p.length)===p;return i||(o=(m?o.slice(0,-p.length):o)+"(?:"+p+"(?=$))?"),o+=s?"$":i&&m?"":"(?="+p+"|$)",u(new RegExp("^"+o,h(n)),t)}function f(e,t,n){return r(t)||(n=t||n,t=[]),n=n||{},e instanceof RegExp?function(e,t){var n=e.source.match(/\((?!\?)/g);if(n)for(var r=0;r<n.length;r++)t.push({name:r,prefix:null,delimiter:null,optional:!1,repeat:!1,partial:!1,asterisk:!1,pattern:null});return u(e,t)}(e,t):r(e)?function(e,t,n){for(var r=[],i=0;i<e.length;i++)r.push(f(e[i],t,n).source);return u(new RegExp("(?:"+r.join("|")+")",h(n)),t)}(e,t,n):function(e,t,n){return d(s(e,n),t,n)}(e,t,n)}},116:(e,t)=>{"use strict";var n="function"===typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,i=n?Symbol.for("react.portal"):60106,s=n?Symbol.for("react.fragment"):60107,o=n?Symbol.for("react.strict_mode"):60108,a=n?Symbol.for("react.profiler"):60114,c=n?Symbol.for("react.provider"):60109,l=n?Symbol.for("react.context"):60110,u=n?Symbol.for("react.async_mode"):60111,h=n?Symbol.for("react.concurrent_mode"):60111,d=n?Symbol.for("react.forward_ref"):60112,f=n?Symbol.for("react.suspense"):60113,p=n?Symbol.for("react.suspense_list"):60120,m=n?Symbol.for("react.memo"):60115,g=n?Symbol.for("react.lazy"):60116,y=n?Symbol.for("react.block"):60121,v=n?Symbol.for("react.fundamental"):60117,w=n?Symbol.for("react.responder"):60118,b=n?Symbol.for("react.scope"):60119;function _(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case u:case h:case s:case a:case o:case f:return e;default:switch(e=e&&e.$$typeof){case l:case d:case g:case m:case c:return e;default:return t}}case i:return t}}}function S(e){return _(e)===h}},808:(e,t,n)=>{"use strict";n(116)},153:(e,t,n)=>{"use strict";var r=n(43),i=Symbol.for("react.element"),s=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,a=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,c={key:!0,ref:!0,__self:!0,__source:!0};function l(e,t,n){var r,s={},l=null,u=null;for(r in void 0!==n&&(l=""+n),void 0!==t.key&&(l=""+t.key),void 0!==t.ref&&(u=t.ref),t)o.call(t,r)&&!c.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===s[r]&&(s[r]=t[r]);return{$$typeof:i,type:e,key:l,ref:u,props:s,_owner:a.current}}t.Fragment=s,t.jsx=l,t.jsxs=l},202:(e,t)=>{"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),c=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),f=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,g={};function y(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}function v(){}function w(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},v.prototype=y.prototype;var b=w.prototype=new v;b.constructor=w,m(b,y.prototype),b.isPureReactComponent=!0;var _=Array.isArray,S=Object.prototype.hasOwnProperty,E={current:null},I={key:!0,ref:!0,__self:!0,__source:!0};function T(e,t,r){var i,s={},o=null,a=null;if(null!=t)for(i in void 0!==t.ref&&(a=t.ref),void 0!==t.key&&(o=""+t.key),t)S.call(t,i)&&!I.hasOwnProperty(i)&&(s[i]=t[i]);var c=arguments.length-2;if(1===c)s.children=r;else if(1<c){for(var l=Array(c),u=0;u<c;u++)l[u]=arguments[u+2];s.children=l}if(e&&e.defaultProps)for(i in c=e.defaultProps)void 0===s[i]&&(s[i]=c[i]);return{$$typeof:n,type:e,key:o,ref:a,props:s,_owner:E.current}}function k(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var C=/\/+/g;function x(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function N(e,t,i,s,o){var a=typeof e;"undefined"!==a&&"boolean"!==a||(e=null);var c=!1;if(null===e)c=!0;else switch(a){case"string":case"number":c=!0;break;case"object":switch(e.$$typeof){case n:case r:c=!0}}if(c)return o=o(c=e),e=""===s?"."+x(c,0):s,_(o)?(i="",null!=e&&(i=e.replace(C,"$&/")+"/"),N(o,t,i,"",(function(e){return e}))):null!=o&&(k(o)&&(o=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,i+(!o.key||c&&c.key===o.key?"":(""+o.key).replace(C,"$&/")+"/")+e)),t.push(o)),1;if(c=0,s=""===s?".":s+":",_(e))for(var l=0;l<e.length;l++){var u=s+x(a=e[l],l);c+=N(a,t,i,u,o)}else if(u=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=f&&e[f]||e["@@iterator"])?e:null}(e),"function"===typeof u)for(e=u.call(e),l=0;!(a=e.next()).done;)c+=N(a=a.value,t,i,u=s+x(a,l++),o);else if("object"===a)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return c}function A(e,t,n){if(null==e)return e;var r=[],i=0;return N(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function P(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var O={current:null},R={transition:null},D={ReactCurrentDispatcher:O,ReactCurrentBatchConfig:R,ReactCurrentOwner:E};t.Children={map:A,forEach:function(e,t,n){A(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return A(e,(function(){t++})),t},toArray:function(e){return A(e,(function(e){return e}))||[]},only:function(e){if(!k(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=y,t.Fragment=i,t.Profiler=o,t.PureComponent=w,t.StrictMode=s,t.Suspense=u,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=D,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=m({},e.props),s=e.key,o=e.ref,a=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,a=E.current),void 0!==t.key&&(s=""+t.key),e.type&&e.type.defaultProps)var c=e.type.defaultProps;for(l in t)S.call(t,l)&&!I.hasOwnProperty(l)&&(i[l]=void 0===t[l]&&void 0!==c?c[l]:t[l])}var l=arguments.length-2;if(1===l)i.children=r;else if(1<l){c=Array(l);for(var u=0;u<l;u++)c[u]=arguments[u+2];i.children=c}return{$$typeof:n,type:e.type,key:s,ref:o,props:i,_owner:a}},t.createContext=function(e){return(e={$$typeof:c,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:a,_context:e},e.Consumer=e},t.createElement=T,t.createFactory=function(e){var t=T.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:l,render:e}},t.isValidElement=k,t.lazy=function(e){return{$$typeof:d,_payload:{_status:-1,_result:e},_init:P}},t.memo=function(e,t){return{$$typeof:h,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=R.transition;R.transition={};try{e()}finally{R.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return O.current.useCallback(e,t)},t.useContext=function(e){return O.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return O.current.useDeferredValue(e)},t.useEffect=function(e,t){return O.current.useEffect(e,t)},t.useId=function(){return O.current.useId()},t.useImperativeHandle=function(e,t,n){return O.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return O.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return O.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return O.current.useMemo(e,t)},t.useReducer=function(e,t,n){return O.current.useReducer(e,t,n)},t.useRef=function(e){return O.current.useRef(e)},t.useState=function(e){return O.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return O.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return O.current.useTransition()},t.version="18.2.0"},43:(e,t,n)=>{"use strict";e.exports=n(202)},579:(e,t,n)=>{"use strict";e.exports=n(153)},234:(e,t)=>{"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<s(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,o=i>>>1;r<o;){var a=2*(r+1)-1,c=e[a],l=a+1,u=e[l];if(0>s(c,n))l<i&&0>s(u,c)?(e[r]=u,e[l]=n,r=l):(e[r]=c,e[a]=n,r=a);else{if(!(l<i&&0>s(u,n)))break e;e[r]=u,e[l]=n,r=l}}}return t}function s(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var a=Date,c=a.now();t.unstable_now=function(){return a.now()-c}}var l=[],u=[],h=1,d=null,f=3,p=!1,m=!1,g=!1,y="function"===typeof setTimeout?setTimeout:null,v="function"===typeof clearTimeout?clearTimeout:null,w="undefined"!==typeof setImmediate?setImmediate:null;function b(e){for(var t=r(u);null!==t;){if(null===t.callback)i(u);else{if(!(t.startTime<=e))break;i(u),t.sortIndex=t.expirationTime,n(l,t)}t=r(u)}}function _(e){if(g=!1,b(e),!m)if(null!==r(l))m=!0,R(S);else{var t=r(u);null!==t&&D(_,t.startTime-e)}}function S(e,n){m=!1,g&&(g=!1,v(k),k=-1),p=!0;var s=f;try{for(b(n),d=r(l);null!==d&&(!(d.expirationTime>n)||e&&!N());){var o=d.callback;if("function"===typeof o){d.callback=null,f=d.priorityLevel;var a=o(d.expirationTime<=n);n=t.unstable_now(),"function"===typeof a?d.callback=a:d===r(l)&&i(l),b(n)}else i(l);d=r(l)}if(null!==d)var c=!0;else{var h=r(u);null!==h&&D(_,h.startTime-n),c=!1}return c}finally{d=null,f=s,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var E,I=!1,T=null,k=-1,C=5,x=-1;function N(){return!(t.unstable_now()-x<C)}function A(){if(null!==T){var e=t.unstable_now();x=e;var n=!0;try{n=T(!0,e)}finally{n?E():(I=!1,T=null)}}else I=!1}if("function"===typeof w)E=function(){w(A)};else if("undefined"!==typeof MessageChannel){var P=new MessageChannel,O=P.port2;P.port1.onmessage=A,E=function(){O.postMessage(null)}}else E=function(){y(A,0)};function R(e){T=e,I||(I=!0,E())}function D(e,n){k=y((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){m||p||(m=!0,R(S))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return r(l)},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},t.unstable_scheduleCallback=function(e,i,s){var o=t.unstable_now();switch("object"===typeof s&&null!==s?s="number"===typeof(s=s.delay)&&0<s?o+s:o:s=o,e){case 1:var a=-1;break;case 2:a=250;break;case 5:a=1073741823;break;case 4:a=1e4;break;default:a=5e3}return e={id:h++,callback:i,priorityLevel:e,startTime:s,expirationTime:a=s+a,sortIndex:-1},s>o?(e.sortIndex=s,n(u,e),null===r(l)&&e===r(u)&&(g?(v(k),k=-1):g=!0,D(_,s-o))):(e.sortIndex=a,n(l,e),m||p||(m=!0,R(S))),e},t.unstable_shouldYield=N,t.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}},853:(e,t,n)=>{"use strict";e.exports=n(234)},895:(e,t,n)=>{"use strict";var r=n(43);var i="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},s=r.useSyncExternalStore,o=r.useRef,a=r.useEffect,c=r.useMemo,l=r.useDebugValue;t.useSyncExternalStoreWithSelector=function(e,t,n,r,u){var h=o(null);if(null===h.current){var d={hasValue:!1,value:null};h.current=d}else d=h.current;h=c((function(){function e(e){if(!a){if(a=!0,s=e,e=r(e),void 0!==u&&d.hasValue){var t=d.value;if(u(t,e))return o=t}return o=e}if(t=o,i(s,e))return t;var n=r(e);return void 0!==u&&u(t,n)?t:(s=e,o=n)}var s,o,a=!1,c=void 0===n?null:n;return[function(){return e(t())},null===c?void 0:function(){return e(c())}]}),[t,n,r,u]);var f=s(e,h[0],h[1]);return a((function(){d.hasValue=!0,d.value=f}),[f]),l(f),f}},237:(e,t,n)=>{"use strict";e.exports=n(895)}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var s=t[r]={exports:{}};return e[r](s,s.exports,n),s.exports}n.m=e,n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;n.t=function(r,i){if(1&i&&(r=this(r)),8&i)return r;if("object"===typeof r&&r){if(4&i&&r.__esModule)return r;if(16&i&&"function"===typeof r.then)return r}var s=Object.create(null);n.r(s);var o={};e=e||[null,t({}),t([]),t(t)];for(var a=2&i&&r;"object"==typeof a&&!~e.indexOf(a);a=t(a))Object.getOwnPropertyNames(a).forEach((e=>o[e]=()=>r[e]));return o.default=()=>r,n.d(s,o),s}})(),n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.f={},n.e=e=>Promise.all(Object.keys(n.f).reduce(((t,r)=>(n.f[r](e,t),t)),[])),n.u=e=>"static/js/"+e+".03bc88bc.chunk.js",n.miniCssF=e=>{},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={},t="netflixnew:";n.l=(r,i,s,o)=>{if(e[r])e[r].push(i);else{var a,c;if(void 0!==s)for(var l=document.getElementsByTagName("script"),u=0;u<l.length;u++){var h=l[u];if(h.getAttribute("src")==r||h.getAttribute("data-webpack")==t+s){a=h;break}}a||(c=!0,(a=document.createElement("script")).charset="utf-8",a.timeout=120,n.nc&&a.setAttribute("nonce",n.nc),a.setAttribute("data-webpack",t+s),a.src=r),e[r]=[i];var d=(t,n)=>{a.onerror=a.onload=null,clearTimeout(f);var i=e[r];if(delete e[r],a.parentNode&&a.parentNode.removeChild(a),i&&i.forEach((e=>e(n))),t)return t(n)},f=setTimeout(d.bind(null,void 0,{type:"timeout",target:a}),12e4);a.onerror=d.bind(null,a.onerror),a.onload=d.bind(null,a.onload),c&&document.head.appendChild(a)}}})(),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/",(()=>{var e={792:0};n.f.j=(t,r)=>{var i=n.o(e,t)?e[t]:void 0;if(0!==i)if(i)r.push(i[2]);else{var s=new Promise(((n,r)=>i=e[t]=[n,r]));r.push(i[2]=s);var o=n.p+n.u(t),a=new Error;n.l(o,(r=>{if(n.o(e,t)&&(0!==(i=e[t])&&(e[t]=void 0),i)){var s=r&&("load"===r.type?"missing":r.type),o=r&&r.target&&r.target.src;a.message="Loading chunk "+t+" failed.\n("+s+": "+o+")",a.name="ChunkLoadError",a.type=s,a.request=o,i[1](a)}}),"chunk-"+t,t)}};var t=(t,r)=>{var i,s,o=r[0],a=r[1],c=r[2],l=0;if(o.some((t=>0!==e[t]))){for(i in a)n.o(a,i)&&(n.m[i]=a[i]);if(c)c(n)}for(t&&t(r);l<o.length;l++)s=o[l],n.o(e,s)&&e[s]&&e[s][0](),e[s]=0},r=self.webpackChunknetflixnew=self.webpackChunknetflixnew||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})(),(()=>{"use strict";var e={};n.r(e),n.d(e,{hasBrowserEnv:()=>Pt,hasStandardBrowserEnv:()=>Ot,hasStandardBrowserWebWorkerEnv:()=>Dt});var t={};n.r(t),n.d(t,{FirebaseError:()=>Gn,SDK_VERSION:()=>Qr,_DEFAULT_ENTRY_NAME:()=>Mr,_addComponent:()=>jr,_addOrOverwriteComponent:()=>zr,_apps:()=>Ur,_clearComponents:()=>Gr,_components:()=>Vr,_getProvider:()=>qr,_registerComponent:()=>Br,_removeServiceInstance:()=>Kr,deleteApp:()=>Xr,getApp:()=>$r,getApps:()=>Jr,initializeApp:()=>Yr,onLog:()=>ei,registerVersion:()=>Zr,setLogLevel:()=>ti});var r=n(43),i=n(391),s=n(237),o=r,a=Symbol.for("react-redux-context"),c="undefined"!==typeof globalThis?globalThis:{};function l(){var e;if(!o.createContext)return{};const t=null!==(e=c[a])&&void 0!==e?e:c[a]=new Map;let n=t.get(o.createContext);return n||(n=o.createContext(null),t.set(o.createContext,n)),n}var u=l(),h=()=>{throw new Error("uSES not initialized!")};function d(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u;return function(){return o.useContext(e)}}var f=d(),p=h,m=(e,t)=>e===t;function g(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u;const t=e===u?f:d(e),n=function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{equalityFn:r=m,devModeChecks:i={}}="function"===typeof n?{equalityFn:n}:n;const{store:s,subscription:a,getServerState:c,stabilityCheck:l,identityFunctionCheck:u}=t(),h=(o.useRef(!0),o.useCallback({[e.name]:t=>e(t)}[e.name],[e,l,i.stabilityCheck])),d=p(a.addNestedSub,s.getState,c||s.getState,h,r);return o.useDebugValue(d),d};return Object.assign(n,{withTypes:()=>n}),n}var y=g();Symbol.for("react.element"),Symbol.for("react.portal"),Symbol.for("react.fragment"),Symbol.for("react.strict_mode"),Symbol.for("react.profiler"),Symbol.for("react.provider"),Symbol.for("react.context"),Symbol.for("react.server_context"),Symbol.for("react.forward_ref"),Symbol.for("react.suspense"),Symbol.for("react.suspense_list"),Symbol.for("react.memo"),Symbol.for("react.lazy"),Symbol.for("react.offscreen"),Symbol.for("react.client.reference");function v(e){e()}var w={notify(){},get:()=>[]};function b(e,t){let n,r=w,i=0,s=!1;function o(){l.onStateChange&&l.onStateChange()}function a(){i++,n||(n=t?t.addNestedSub(o):e.subscribe(o),r=function(){let e=null,t=null;return{clear(){e=null,t=null},notify(){v((()=>{let t=e;for(;t;)t.callback(),t=t.next}))},get(){const t=[];let n=e;for(;n;)t.push(n),n=n.next;return t},subscribe(n){let r=!0;const i=t={callback:n,next:null,prev:t};return i.prev?i.prev.next=i:e=i,function(){r&&null!==e&&(r=!1,i.next?i.next.prev=i.prev:t=i.prev,i.prev?i.prev.next=i.next:e=i.next)}}}}())}function c(){i--,n&&0===i&&(n(),n=void 0,r.clear(),r=w)}const l={addNestedSub:function(e){a();const t=r.subscribe(e);let n=!1;return()=>{n||(n=!0,t(),c())}},notifyNestedSubs:function(){r.notify()},handleChangeWrapper:o,isSubscribed:function(){return s},trySubscribe:function(){s||(s=!0,a())},tryUnsubscribe:function(){s&&(s=!1,c())},getListeners:()=>r};return l}var _=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement)?o.useLayoutEffect:o.useEffect;Object.defineProperty,Object.getOwnPropertyNames,Object.getOwnPropertySymbols,Object.getOwnPropertyDescriptor,Object.getPrototypeOf,Object.prototype;var S=function(e){let{store:t,context:n,children:r,serverState:i,stabilityCheck:s="once",identityFunctionCheck:a="once"}=e;const c=o.useMemo((()=>{const e=b(t);return{store:t,subscription:e,getServerState:i?()=>i:void 0,stabilityCheck:s,identityFunctionCheck:a}}),[t,i,s,a]),l=o.useMemo((()=>t.getState()),[t]);_((()=>{const{subscription:e}=c;return e.onStateChange=e.notifyNestedSubs,e.trySubscribe(),l!==t.getState()&&e.notifyNestedSubs(),()=>{e.tryUnsubscribe(),e.onStateChange=void 0}}),[c,l]);const h=n||u;return o.createElement(h.Provider,{value:c},r)};function E(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u;const t=e===u?f:d(e),n=()=>{const{store:e}=t();return e};return Object.assign(n,{withTypes:()=>n}),n}var I=E();function T(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u;const t=e===u?I:E(e),n=()=>t().dispatch;return Object.assign(n,{withTypes:()=>n}),n}var k,C=T();function x(e,t){return x=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},x(e,t)}function N(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,x(e,t)}function A(){return A=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},A.apply(this,arguments)}function P(e){return"/"===e.charAt(0)}function O(e,t){for(var n=t,r=n+1,i=e.length;r<i;n+=1,r+=1)e[n]=e[r];e.pop()}k=s.useSyncExternalStoreWithSelector,p=k,(e=>{e})(r.useSyncExternalStore);const R=function(e,t){void 0===t&&(t="");var n,r=e&&e.split("/")||[],i=t&&t.split("/")||[],s=e&&P(e),o=t&&P(t),a=s||o;if(e&&P(e)?i=r:r.length&&(i.pop(),i=i.concat(r)),!i.length)return"/";if(i.length){var c=i[i.length-1];n="."===c||".."===c||""===c}else n=!1;for(var l=0,u=i.length;u>=0;u--){var h=i[u];"."===h?O(i,u):".."===h?(O(i,u),l++):l&&(O(i,u),l--)}if(!a)for(;l--;l)i.unshift("..");!a||""===i[0]||i[0]&&P(i[0])||i.unshift("");var d=i.join("/");return n&&"/"!==d.substr(-1)&&(d+="/"),d};var D=!0,L="Invariant failed";function M(e,t){if(!e){if(D)throw new Error(L);var n="function"===typeof t?t():t,r=n?"".concat(L,": ").concat(n):L;throw new Error(r)}}function F(e){return"/"===e.charAt(0)?e:"/"+e}function U(e){return"/"===e.charAt(0)?e.substr(1):e}function V(e,t){return function(e,t){return 0===e.toLowerCase().indexOf(t.toLowerCase())&&-1!=="/?#".indexOf(e.charAt(t.length))}(e,t)?e.substr(t.length):e}function j(e){return"/"===e.charAt(e.length-1)?e.slice(0,-1):e}function z(e){var t=e.pathname,n=e.search,r=e.hash,i=t||"/";return n&&"?"!==n&&(i+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(i+="#"===r.charAt(0)?r:"#"+r),i}function B(e,t,n,r){var i;"string"===typeof e?(i=function(e){var t=e||"/",n="",r="",i=t.indexOf("#");-1!==i&&(r=t.substr(i),t=t.substr(0,i));var s=t.indexOf("?");return-1!==s&&(n=t.substr(s),t=t.substr(0,s)),{pathname:t,search:"?"===n?"":n,hash:"#"===r?"":r}}(e),i.state=t):(void 0===(i=A({},e)).pathname&&(i.pathname=""),i.search?"?"!==i.search.charAt(0)&&(i.search="?"+i.search):i.search="",i.hash?"#"!==i.hash.charAt(0)&&(i.hash="#"+i.hash):i.hash="",void 0!==t&&void 0===i.state&&(i.state=t));try{i.pathname=decodeURI(i.pathname)}catch(s){throw s instanceof URIError?new URIError('Pathname "'+i.pathname+'" could not be decoded. This is likely caused by an invalid percent-encoding.'):s}return n&&(i.key=n),r?i.pathname?"/"!==i.pathname.charAt(0)&&(i.pathname=R(i.pathname,r.pathname)):i.pathname=r.pathname:i.pathname||(i.pathname="/"),i}function q(){var e=null;var t=[];return{setPrompt:function(t){return e=t,function(){e===t&&(e=null)}},confirmTransitionTo:function(t,n,r,i){if(null!=e){var s="function"===typeof e?e(t,n):e;"string"===typeof s?"function"===typeof r?r(s,i):i(!0):i(!1!==s)}else i(!0)},appendListener:function(e){var n=!0;function r(){n&&e.apply(void 0,arguments)}return t.push(r),function(){n=!1,t=t.filter((function(e){return e!==r}))}},notifyListeners:function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t.forEach((function(e){return e.apply(void 0,n)}))}}}var K=!("undefined"===typeof window||!window.document||!window.document.createElement);function G(e,t){t(window.confirm(e))}var W="popstate",H="hashchange";function Q(){try{return window.history.state||{}}catch(e){return{}}}function Y(e){void 0===e&&(e={}),K||M(!1);var t=window.history,n=function(){var e=window.navigator.userAgent;return(-1===e.indexOf("Android 2.")&&-1===e.indexOf("Android 4.0")||-1===e.indexOf("Mobile Safari")||-1!==e.indexOf("Chrome")||-1!==e.indexOf("Windows Phone"))&&window.history&&"pushState"in window.history}(),r=!(-1===window.navigator.userAgent.indexOf("Trident")),i=e,s=i.forceRefresh,o=void 0!==s&&s,a=i.getUserConfirmation,c=void 0===a?G:a,l=i.keyLength,u=void 0===l?6:l,h=e.basename?j(F(e.basename)):"";function d(e){var t=e||{},n=t.key,r=t.state,i=window.location,s=i.pathname+i.search+i.hash;return h&&(s=V(s,h)),B(s,r,n)}function f(){return Math.random().toString(36).substr(2,u)}var p=q();function m(e){A(C,e),C.length=t.length,p.notifyListeners(C.location,C.action)}function g(e){(function(e){return void 0===e.state&&-1===navigator.userAgent.indexOf("CriOS")})(e)||w(d(e.state))}function y(){w(d(Q()))}var v=!1;function w(e){if(v)v=!1,m();else{p.confirmTransitionTo(e,"POP",c,(function(t){t?m({action:"POP",location:e}):function(e){var t=C.location,n=_.indexOf(t.key);-1===n&&(n=0);var r=_.indexOf(e.key);-1===r&&(r=0);var i=n-r;i&&(v=!0,E(i))}(e)}))}}var b=d(Q()),_=[b.key];function S(e){return h+z(e)}function E(e){t.go(e)}var I=0;function T(e){1===(I+=e)&&1===e?(window.addEventListener(W,g),r&&window.addEventListener(H,y)):0===I&&(window.removeEventListener(W,g),r&&window.removeEventListener(H,y))}var k=!1;var C={length:t.length,action:"POP",location:b,createHref:S,push:function(e,r){var i="PUSH",s=B(e,r,f(),C.location);p.confirmTransitionTo(s,i,c,(function(e){if(e){var r=S(s),a=s.key,c=s.state;if(n)if(t.pushState({key:a,state:c},null,r),o)window.location.href=r;else{var l=_.indexOf(C.location.key),u=_.slice(0,l+1);u.push(s.key),_=u,m({action:i,location:s})}else window.location.href=r}}))},replace:function(e,r){var i="REPLACE",s=B(e,r,f(),C.location);p.confirmTransitionTo(s,i,c,(function(e){if(e){var r=S(s),a=s.key,c=s.state;if(n)if(t.replaceState({key:a,state:c},null,r),o)window.location.replace(r);else{var l=_.indexOf(C.location.key);-1!==l&&(_[l]=s.key),m({action:i,location:s})}else window.location.replace(r)}}))},go:E,goBack:function(){E(-1)},goForward:function(){E(1)},block:function(e){void 0===e&&(e=!1);var t=p.setPrompt(e);return k||(T(1),k=!0),function(){return k&&(k=!1,T(-1)),t()}},listen:function(e){var t=p.appendListener(e);return T(1),function(){T(-1),t()}}};return C}var $="hashchange",J={hashbang:{encodePath:function(e){return"!"===e.charAt(0)?e:"!/"+U(e)},decodePath:function(e){return"!"===e.charAt(0)?e.substr(1):e}},noslash:{encodePath:U,decodePath:F},slash:{encodePath:F,decodePath:F}};function X(e){var t=e.indexOf("#");return-1===t?e:e.slice(0,t)}function Z(){var e=window.location.href,t=e.indexOf("#");return-1===t?"":e.substring(t+1)}function ee(e){window.location.replace(X(window.location.href)+"#"+e)}function te(e){void 0===e&&{},K||M(!1);var t=window.history,n=(window.navigator.userAgent.indexOf("Firefox"),e),r=n.getUserConfirmation,i=void 0===r?G:r,s=n.hashType,o=void 0===s?"slash":s,a=e.basename?j(F(e.basename)):"",c=J[o],l=c.encodePath,u=c.decodePath;function h(){var e=u(Z());return a&&V(e,a),B(e)}var d=q();function f(e){A(T,e),T.length=t.length,d.notifyListeners(T.location,T.action)}var p=!1,m=null;function g(){var e=Z(),t=l(e);if(e!==t)ee(t);else{var n=h(),r=T.location;if(!p&&function(e,t){return e.pathname===t.pathname&&e.search===t.search&&e.hash===t.hash}(r,n))return;if(m===z(n))return;null,function(e){if(p)!1,f();else{var t="POP";d.confirmTransitionTo(e,t,i,(function(n){n?f({action:t,location:e}):function(e){var t=T.location,n=b.lastIndexOf(z(t));-1===n&&0;var r=b.lastIndexOf(z(e));-1===r&&0;var i=n-r;i&&(!0,_(i))}(e)}))}}(n)}}var y=Z(),v=l(y);y!==v&&ee(v);var w=h(),b=[z(w)];function _(e){t.go(e)}var S=0;function E(e){1===(S+=e)&&1===e?window.addEventListener($,g):0===S&&window.removeEventListener($,g)}var I=!1;var T={length:t.length,action:"POP",location:w,createHref:function(e){var t=document.querySelector("base"),n="";return t&&t.getAttribute("href")&&X(window.location.href),n+"#"+l(a+z(e))},push:function(e,t){var n="PUSH",r=B(e,void 0,void 0,T.location);d.confirmTransitionTo(r,n,i,(function(e){if(e){var t=z(r),i=l(a+t);if(Z()!==i){t,function(e){window.location.hash=e}(i);var s=b.lastIndexOf(z(T.location)),o=b.slice(0,s+1);o.push(t),o,f({action:n,location:r})}else f()}}))},replace:function(e,t){var n="REPLACE",r=B(e,void 0,void 0,T.location);d.confirmTransitionTo(r,n,i,(function(e){if(e){var t=z(r),i=l(a+t);Z()!==i&&(t,ee(i));var s=b.indexOf(z(T.location));-1!==s&&(b[s]=t),f({action:n,location:r})}}))},go:_,goBack:function(){_(-1)},goForward:function(){_(1)},block:function(e){void 0===e&&!1;var t=d.setPrompt(e);return I||(E(1),!0),function(){return I&&(!1,E(-1)),t()}},listen:function(e){var t=d.appendListener(e);return E(1),function(){E(-1),t()}}};return T}function ne(e,t,n){return Math.min(Math.max(e,t),n)}var re=n(173),ie=n.n(re),se=1073741823,oe="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:{};var ae=r.createContext||function(e,t){var n,i,s="__create-react-context-"+function(){var e="__global_unique_id__";return oe[e]=(oe[e]||0)+1}()+"__",o=function(e){function n(){var t;return(t=e.apply(this,arguments)||this).emitter=function(e){var t=[];return{on:function(e){t.push(e)},off:function(e){t=t.filter((function(t){return t!==e}))},get:function(){return e},set:function(n,r){e=n,t.forEach((function(t){return t(e,r)}))}}}(t.props.value),t}N(n,e);var r=n.prototype;return r.getChildContext=function(){var e;return(e={})[s]=this.emitter,e},r.componentWillReceiveProps=function(e){if(this.props.value!==e.value){var n,r=this.props.value,i=e.value;!function(e,t){return e===t?0!==e||1/e===1/t:e!==e&&t!==t}(r,i)?(n="function"===typeof t?t(r,i):se,0!==(n|=0)&&this.emitter.set(e.value,n)):n=0}},r.render=function(){return this.props.children},n}(r.Component);o.childContextTypes=((n={})[s]=ie().object.isRequired,n);var a=function(t){function n(){var e;return(e=t.apply(this,arguments)||this).state={value:e.getValue()},e.onUpdate=function(t,n){0!==((0|e.observedBits)&n)&&e.setState({value:e.getValue()})},e}N(n,t);var r=n.prototype;return r.componentWillReceiveProps=function(e){var t=e.observedBits;this.observedBits=void 0===t||null===t?se:t},r.componentDidMount=function(){this.context[s]&&this.context[s].on(this.onUpdate);var e=this.props.observedBits;this.observedBits=void 0===e||null===e?se:e},r.componentWillUnmount=function(){this.context[s]&&this.context[s].off(this.onUpdate)},r.getValue=function(){return this.context[s]?this.context[s].get():e},r.render=function(){return(e=this.props.children,Array.isArray(e)?e[0]:e)(this.state.value);var e},n}(r.Component);return a.contextTypes=((i={})[s]=ie().object,i),{Provider:o,Consumer:a}};const ce=ae;var le=n(221),ue=n.n(le);n(808);function he(e,t){if(null==e)return{};var n,r,i={},s=Object.keys(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}n(219);var de=function(e){var t=ce();return t.displayName=e,t},fe=de("Router-History"),pe=function(e){var t=ce();return t.displayName=e,t},me=pe("Router"),ge=function(e){function t(t){var n;return(n=e.call(this,t)||this).state={location:t.history.location},n._isMounted=!1,n._pendingLocation=null,t.staticContext||(n.unlisten=t.history.listen((function(e){n._isMounted?n.setState({location:e}):n._pendingLocation=e}))),n}N(t,e),t.computeRootMatch=function(e){return{path:"/",url:"/",params:{},isExact:"/"===e}};var n=t.prototype;return n.componentDidMount=function(){this._isMounted=!0,this._pendingLocation&&this.setState({location:this._pendingLocation})},n.componentWillUnmount=function(){this.unlisten&&this.unlisten()},n.render=function(){return r.createElement(me.Provider,{value:{history:this.props.history,location:this.state.location,match:t.computeRootMatch(this.state.location.pathname),staticContext:this.props.staticContext}},r.createElement(fe.Provider,{children:this.props.children||null,value:this.props.history}))},t}(r.Component);r.Component;r.Component;var ye={},ve=1e4,we=0;function be(e,t){void 0===t&&(t={}),("string"===typeof t||Array.isArray(t))&&(t={path:t});var n=t,r=n.path,i=n.exact,s=void 0!==i&&i,o=n.strict,a=void 0!==o&&o,c=n.sensitive,l=void 0!==c&&c;return[].concat(r).reduce((function(t,n){if(!n&&""!==n)return null;if(t)return t;var r=function(e,t){var n=""+t.end+t.strict+t.sensitive,r=ye[n]||(ye[n]={});if(r[e])return r[e];var i=[],s={regexp:ue()(e,i,t),keys:i};return we<ve&&(r[e]=s,we++),s}(n,{end:s,strict:a,sensitive:l}),i=r.regexp,o=r.keys,c=i.exec(e);if(!c)return null;var u=c[0],h=c.slice(1),d=e===u;return s&&!d?null:{path:n,url:"/"===n&&""===u?"/":u,isExact:d,params:o.reduce((function(e,t,n){return e[t.name]=h[n],e}),{})}}),null)}var _e=function(e){function t(){return e.apply(this,arguments)||this}return N(t,e),t.prototype.render=function(){var e=this;return r.createElement(me.Consumer,null,(function(t){t||M(!1);var n=e.props.location||t.location,i=A({},t,{location:n,match:e.props.computedMatch?e.props.computedMatch:e.props.path?be(n.pathname,e.props):t.match}),s=e.props,o=s.children,a=s.component,c=s.render;return Array.isArray(o)&&0===o.length&&(o=null),r.createElement(me.Provider,{value:i},i.match?o?"function"===typeof o?o(i):o:a?r.createElement(a,i):c?c(i):null:"function"===typeof o?o(i):null)}))},t}(r.Component);function Se(e){return"/"===e.charAt(0)?e:"/"+e}function Ee(e,t){if(!e)return t;var n=Se(e);return 0!==t.pathname.indexOf(n)?t:A({},t,{pathname:t.pathname.substr(n.length)})}function Ie(e){return"string"===typeof e?e:z(e)}function Te(e){return function(){M(!1)}}function ke(){}r.Component;var Ce=function(e){function t(){return e.apply(this,arguments)||this}return N(t,e),t.prototype.render=function(){var e=this;return r.createElement(me.Consumer,null,(function(t){t||M(!1);var n,i,s=e.props.location||t.location;return r.Children.forEach(e.props.children,(function(e){if(null==i&&r.isValidElement(e)){n=e;var o=e.props.path||e.props.from;i=o?be(s.pathname,A({},e.props,{path:o})):t.match}})),i?r.cloneElement(n,{location:s,computedMatch:i}):null}))},t}(r.Component);var xe=r.useContext;var Ne=n(579);const Ae=function(){const[e,t]=(0,r.useState)(!1),n=xe(fe);return(0,r.useEffect)((()=>(window.addEventListener("scroll",t(window.scrollY>100)),()=>window.removeEventListener("scroll",t(window.scrollY>100)))),[]),(0,Ne.jsx)("div",{className:"nav ".concat(e&&"nav__black"),children:(0,Ne.jsxs)("div",{className:"nav__contents",children:[(0,Ne.jsx)("img",{onClick:()=>n.push("/"),className:"nav__logo",src:"https://pngimg.com/d/netflix_PNG10.png",alt:""}),(0,Ne.jsx)("img",{onClick:()=>n.push("/profile"),className:"nav__avatar",src:"https://i.pinimg.com/474x/44/78/1b/44781ba4ac0c63f2ecf0793a533bf8dc.jpg",alt:""})]})})},Pe="a36aa38689ae790f821e4c67b72e79d2",Oe={fetchTrending:"/trending/all/week?api_key=".concat(Pe,"&\nlanguage=en-US"),fetchNetflixOriginals:"/discover/tv?api_key=".concat(Pe,"&with_networks=213"),fetchTopRated:"/movie/top_rated?api_key=".concat(Pe,"&language=en-Us"),fetchActionMovies:"/discover/movie?api_key=".concat(Pe,"&with_genres=28"),fetchComedyMovies:"/discover/movie?api_key=".concat(Pe,"&with_genres=35"),fetchHorrorMovies:"/discover/movie?api_key=".concat(Pe,"&with_genres=27"),fetchRomanceMovies:"/discover/movie?api_key=".concat(Pe,"&with_genres=10749"),fetchDocumentaries:"/discover/movie?api_key=".concat(Pe,"&with_genres=99")};function Re(e,t){return function(){return e.apply(t,arguments)}}const{toString:De}=Object.prototype,{getPrototypeOf:Le}=Object,Me=(e=>t=>{const n=De.call(t);return e[n]||(e[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),Fe=e=>(e=e.toLowerCase(),t=>Me(t)===e),Ue=e=>t=>typeof t===e,{isArray:Ve}=Array,je=Ue("undefined");const ze=Fe("ArrayBuffer");const Be=Ue("string"),qe=Ue("function"),Ke=Ue("number"),Ge=e=>null!==e&&"object"===typeof e,We=e=>{if("object"!==Me(e))return!1;const t=Le(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},He=Fe("Date"),Qe=Fe("File"),Ye=Fe("Blob"),$e=Fe("FileList"),Je=Fe("URLSearchParams");function Xe(e,t){let n,r,{allOwnKeys:i=!1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(null!==e&&"undefined"!==typeof e)if("object"!==typeof e&&(e=[e]),Ve(e))for(n=0,r=e.length;n<r;n++)t.call(null,e[n],n,e);else{const r=i?Object.getOwnPropertyNames(e):Object.keys(e),s=r.length;let o;for(n=0;n<s;n++)o=r[n],t.call(null,e[o],o,e)}}function Ze(e,t){t=t.toLowerCase();const n=Object.keys(e);let r,i=n.length;for(;i-- >0;)if(r=n[i],t===r.toLowerCase())return r;return null}const et="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:"undefined"!==typeof window?window:global,tt=e=>!je(e)&&e!==et;const nt=(rt="undefined"!==typeof Uint8Array&&Le(Uint8Array),e=>rt&&e instanceof rt);var rt;const it=Fe("HTMLFormElement"),st=(e=>{let{hasOwnProperty:t}=e;return(e,n)=>t.call(e,n)})(Object.prototype),ot=Fe("RegExp"),at=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),r={};Xe(n,((n,i)=>{let s;!1!==(s=t(n,i,e))&&(r[i]=s||n)})),Object.defineProperties(e,r)},ct="abcdefghijklmnopqrstuvwxyz",lt="0123456789",ut={DIGIT:lt,ALPHA:ct,ALPHA_DIGIT:ct+ct.toUpperCase()+lt};const ht=Fe("AsyncFunction"),dt={isArray:Ve,isArrayBuffer:ze,isBuffer:function(e){return null!==e&&!je(e)&&null!==e.constructor&&!je(e.constructor)&&qe(e.constructor.isBuffer)&&e.constructor.isBuffer(e)},isFormData:e=>{let t;return e&&("function"===typeof FormData&&e instanceof FormData||qe(e.append)&&("formdata"===(t=Me(e))||"object"===t&&qe(e.toString)&&"[object FormData]"===e.toString()))},isArrayBufferView:function(e){let t;return t="undefined"!==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&ze(e.buffer),t},isString:Be,isNumber:Ke,isBoolean:e=>!0===e||!1===e,isObject:Ge,isPlainObject:We,isUndefined:je,isDate:He,isFile:Qe,isBlob:Ye,isRegExp:ot,isFunction:qe,isStream:e=>Ge(e)&&qe(e.pipe),isURLSearchParams:Je,isTypedArray:nt,isFileList:$e,forEach:Xe,merge:function e(){const{caseless:t}=tt(this)&&this||{},n={},r=(r,i)=>{const s=t&&Ze(n,i)||i;We(n[s])&&We(r)?n[s]=e(n[s],r):We(r)?n[s]=e({},r):Ve(r)?n[s]=r.slice():n[s]=r};for(let i=0,s=arguments.length;i<s;i++)arguments[i]&&Xe(arguments[i],r);return n},extend:function(e,t,n){let{allOwnKeys:r}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return Xe(t,((t,r)=>{n&&qe(t)?e[r]=Re(t,n):e[r]=t}),{allOwnKeys:r}),e},trim:e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),stripBOM:e=>(65279===e.charCodeAt(0)&&(e=e.slice(1)),e),inherits:(e,t,n,r)=>{e.prototype=Object.create(t.prototype,r),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},toFlatObject:(e,t,n,r)=>{let i,s,o;const a={};if(t=t||{},null==e)return t;do{for(i=Object.getOwnPropertyNames(e),s=i.length;s-- >0;)o=i[s],r&&!r(o,e,t)||a[o]||(t[o]=e[o],a[o]=!0);e=!1!==n&&Le(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},kindOf:Me,kindOfTest:Fe,endsWith:(e,t,n)=>{e=String(e),(void 0===n||n>e.length)&&(n=e.length),n-=t.length;const r=e.indexOf(t,n);return-1!==r&&r===n},toArray:e=>{if(!e)return null;if(Ve(e))return e;let t=e.length;if(!Ke(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},forEachEntry:(e,t)=>{const n=(e&&e[Symbol.iterator]).call(e);let r;for(;(r=n.next())&&!r.done;){const n=r.value;t.call(e,n[0],n[1])}},matchAll:(e,t)=>{let n;const r=[];for(;null!==(n=e.exec(t));)r.push(n);return r},isHTMLForm:it,hasOwnProperty:st,hasOwnProp:st,reduceDescriptors:at,freezeMethods:e=>{at(e,((t,n)=>{if(qe(e)&&-1!==["arguments","caller","callee"].indexOf(n))return!1;const r=e[n];qe(r)&&(t.enumerable=!1,"writable"in t?t.writable=!1:t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")}))}))},toObjectSet:(e,t)=>{const n={},r=e=>{e.forEach((e=>{n[e]=!0}))};return Ve(e)?r(e):r(String(e).split(t)),n},toCamelCase:e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,(function(e,t,n){return t.toUpperCase()+n})),noop:()=>{},toFiniteNumber:(e,t)=>(e=+e,Number.isFinite(e)?e:t),findKey:Ze,global:et,isContextDefined:tt,ALPHABET:ut,generateString:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:16,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ut.ALPHA_DIGIT,n="";const{length:r}=t;for(;e--;)n+=t[Math.random()*r|0];return n},isSpecCompliantForm:function(e){return!!(e&&qe(e.append)&&"FormData"===e[Symbol.toStringTag]&&e[Symbol.iterator])},toJSONObject:e=>{const t=new Array(10),n=(e,r)=>{if(Ge(e)){if(t.indexOf(e)>=0)return;if(!("toJSON"in e)){t[r]=e;const i=Ve(e)?[]:{};return Xe(e,((e,t)=>{const s=n(e,r+1);!je(s)&&(i[t]=s)})),t[r]=void 0,i}}return e};return n(e,0)},isAsyncFn:ht,isThenable:e=>e&&(Ge(e)||qe(e))&&qe(e.then)&&qe(e.catch)};function ft(e,t,n,r,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),r&&(this.request=r),i&&(this.response=i)}dt.inherits(ft,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:dt.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const pt=ft.prototype,mt={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach((e=>{mt[e]={value:e}})),Object.defineProperties(ft,mt),Object.defineProperty(pt,"isAxiosError",{value:!0}),ft.from=(e,t,n,r,i,s)=>{const o=Object.create(pt);return dt.toFlatObject(e,o,(function(e){return e!==Error.prototype}),(e=>"isAxiosError"!==e)),ft.call(o,e.message,t,n,r,i),o.cause=e,o.name=e.name,s&&Object.assign(o,s),o};const gt=ft;function yt(e){return dt.isPlainObject(e)||dt.isArray(e)}function vt(e){return dt.endsWith(e,"[]")?e.slice(0,-2):e}function wt(e,t,n){return e?e.concat(t).map((function(e,t){return e=vt(e),!n&&t?"["+e+"]":e})).join(n?".":""):t}const bt=dt.toFlatObject(dt,{},null,(function(e){return/^is[A-Z]/.test(e)}));const _t=function(e,t,n){if(!dt.isObject(e))throw new TypeError("target must be an object");t=t||new FormData;const r=(n=dt.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,(function(e,t){return!dt.isUndefined(t[e])}))).metaTokens,i=n.visitor||l,s=n.dots,o=n.indexes,a=(n.Blob||"undefined"!==typeof Blob&&Blob)&&dt.isSpecCompliantForm(t);if(!dt.isFunction(i))throw new TypeError("visitor must be a function");function c(e){if(null===e)return"";if(dt.isDate(e))return e.toISOString();if(!a&&dt.isBlob(e))throw new gt("Blob is not supported. Use a Buffer instead.");return dt.isArrayBuffer(e)||dt.isTypedArray(e)?a&&"function"===typeof Blob?new Blob([e]):Buffer.from(e):e}function l(e,n,i){let a=e;if(e&&!i&&"object"===typeof e)if(dt.endsWith(n,"{}"))n=r?n:n.slice(0,-2),e=JSON.stringify(e);else if(dt.isArray(e)&&function(e){return dt.isArray(e)&&!e.some(yt)}(e)||(dt.isFileList(e)||dt.endsWith(n,"[]"))&&(a=dt.toArray(e)))return n=vt(n),a.forEach((function(e,r){!dt.isUndefined(e)&&null!==e&&t.append(!0===o?wt([n],r,s):null===o?n:n+"[]",c(e))})),!1;return!!yt(e)||(t.append(wt(i,n,s),c(e)),!1)}const u=[],h=Object.assign(bt,{defaultVisitor:l,convertValue:c,isVisitable:yt});if(!dt.isObject(e))throw new TypeError("data must be an object");return function e(n,r){if(!dt.isUndefined(n)){if(-1!==u.indexOf(n))throw Error("Circular reference detected in "+r.join("."));u.push(n),dt.forEach(n,(function(n,s){!0===(!(dt.isUndefined(n)||null===n)&&i.call(t,n,dt.isString(s)?s.trim():s,r,h))&&e(n,r?r.concat(s):[s])})),u.pop()}}(e),t};function St(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,(function(e){return t[e]}))}function Et(e,t){this._pairs=[],e&&_t(e,this,t)}const It=Et.prototype;It.append=function(e,t){this._pairs.push([e,t])},It.toString=function(e){const t=e?function(t){return e.call(this,t,St)}:St;return this._pairs.map((function(e){return t(e[0])+"="+t(e[1])}),"").join("&")};const Tt=Et;function kt(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Ct(e,t,n){if(!t)return e;const r=n&&n.encode||kt,i=n&&n.serialize;let s;if(s=i?i(t,n):dt.isURLSearchParams(t)?t.toString():new Tt(t,n).toString(r),s){const t=e.indexOf("#");-1!==t&&(e=e.slice(0,t)),e+=(-1===e.indexOf("?")?"?":"&")+s}return e}const xt=class{constructor(){this.handlers=[]}use(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){dt.forEach(this.handlers,(function(t){null!==t&&e(t)}))}},Nt={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},At={isBrowser:!0,classes:{URLSearchParams:"undefined"!==typeof URLSearchParams?URLSearchParams:Tt,FormData:"undefined"!==typeof FormData?FormData:null,Blob:"undefined"!==typeof Blob?Blob:null},protocols:["http","https","file","blob","url","data"]},Pt="undefined"!==typeof window&&"undefined"!==typeof document,Ot=(Rt="undefined"!==typeof navigator&&navigator.product,Pt&&["ReactNative","NativeScript","NS"].indexOf(Rt)<0);var Rt;const Dt="undefined"!==typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"===typeof self.importScripts,Lt={...e,...At};const Mt=function(e){function t(e,n,r,i){let s=e[i++];if("__proto__"===s)return!0;const o=Number.isFinite(+s),a=i>=e.length;if(s=!s&&dt.isArray(r)?r.length:s,a)return dt.hasOwnProp(r,s)?r[s]=[r[s],n]:r[s]=n,!o;r[s]&&dt.isObject(r[s])||(r[s]=[]);return t(e,n,r[s],i)&&dt.isArray(r[s])&&(r[s]=function(e){const t={},n=Object.keys(e);let r;const i=n.length;let s;for(r=0;r<i;r++)s=n[r],t[s]=e[s];return t}(r[s])),!o}if(dt.isFormData(e)&&dt.isFunction(e.entries)){const n={};return dt.forEachEntry(e,((e,r)=>{t(function(e){return dt.matchAll(/\w+|\[(\w*)]/g,e).map((e=>"[]"===e[0]?"":e[1]||e[0]))}(e),r,n,0)})),n}return null};const Ft={transitional:Nt,adapter:["xhr","http"],transformRequest:[function(e,t){const n=t.getContentType()||"",r=n.indexOf("application/json")>-1,i=dt.isObject(e);i&&dt.isHTMLForm(e)&&(e=new FormData(e));if(dt.isFormData(e))return r?JSON.stringify(Mt(e)):e;if(dt.isArrayBuffer(e)||dt.isBuffer(e)||dt.isStream(e)||dt.isFile(e)||dt.isBlob(e))return e;if(dt.isArrayBufferView(e))return e.buffer;if(dt.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let s;if(i){if(n.indexOf("application/x-www-form-urlencoded")>-1)return function(e,t){return _t(e,new Lt.classes.URLSearchParams,Object.assign({visitor:function(e,t,n,r){return Lt.isNode&&dt.isBuffer(e)?(this.append(t,e.toString("base64")),!1):r.defaultVisitor.apply(this,arguments)}},t))}(e,this.formSerializer).toString();if((s=dt.isFileList(e))||n.indexOf("multipart/form-data")>-1){const t=this.env&&this.env.FormData;return _t(s?{"files[]":e}:e,t&&new t,this.formSerializer)}}return i||r?(t.setContentType("application/json",!1),function(e,t,n){if(dt.isString(e))try{return(t||JSON.parse)(e),dt.trim(e)}catch(r){if("SyntaxError"!==r.name)throw r}return(n||JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){const t=this.transitional||Ft.transitional,n=t&&t.forcedJSONParsing,r="json"===this.responseType;if(e&&dt.isString(e)&&(n&&!this.responseType||r)){const n=!(t&&t.silentJSONParsing)&&r;try{return JSON.parse(e)}catch(i){if(n){if("SyntaxError"===i.name)throw gt.from(i,gt.ERR_BAD_RESPONSE,this,null,this.response);throw i}}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Lt.classes.FormData,Blob:Lt.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};dt.forEach(["delete","get","head","post","put","patch"],(e=>{Ft.headers[e]={}}));const Ut=Ft,Vt=dt.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),jt=Symbol("internals");function zt(e){return e&&String(e).trim().toLowerCase()}function Bt(e){return!1===e||null==e?e:dt.isArray(e)?e.map(Bt):String(e)}function qt(e,t,n,r,i){return dt.isFunction(r)?r.call(this,t,n):(i&&(t=n),dt.isString(t)?dt.isString(r)?-1!==t.indexOf(r):dt.isRegExp(r)?r.test(t):void 0:void 0)}class Kt{constructor(e){e&&this.set(e)}set(e,t,n){const r=this;function i(e,t,n){const i=zt(t);if(!i)throw new Error("header name must be a non-empty string");const s=dt.findKey(r,i);(!s||void 0===r[s]||!0===n||void 0===n&&!1!==r[s])&&(r[s||t]=Bt(e))}const s=(e,t)=>dt.forEach(e,((e,n)=>i(e,n,t)));return dt.isPlainObject(e)||e instanceof this.constructor?s(e,t):dt.isString(e)&&(e=e.trim())&&!/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim())?s((e=>{const t={};let n,r,i;return e&&e.split("\n").forEach((function(e){i=e.indexOf(":"),n=e.substring(0,i).trim().toLowerCase(),r=e.substring(i+1).trim(),!n||t[n]&&Vt[n]||("set-cookie"===n?t[n]?t[n].push(r):t[n]=[r]:t[n]=t[n]?t[n]+", "+r:r)})),t})(e),t):null!=e&&i(t,e,n),this}get(e,t){if(e=zt(e)){const n=dt.findKey(this,e);if(n){const e=this[n];if(!t)return e;if(!0===t)return function(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(e);)t[r[1]]=r[2];return t}(e);if(dt.isFunction(t))return t.call(this,e,n);if(dt.isRegExp(t))return t.exec(e);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=zt(e)){const n=dt.findKey(this,e);return!(!n||void 0===this[n]||t&&!qt(0,this[n],n,t))}return!1}delete(e,t){const n=this;let r=!1;function i(e){if(e=zt(e)){const i=dt.findKey(n,e);!i||t&&!qt(0,n[i],i,t)||(delete n[i],r=!0)}}return dt.isArray(e)?e.forEach(i):i(e),r}clear(e){const t=Object.keys(this);let n=t.length,r=!1;for(;n--;){const i=t[n];e&&!qt(0,this[i],i,e,!0)||(delete this[i],r=!0)}return r}normalize(e){const t=this,n={};return dt.forEach(this,((r,i)=>{const s=dt.findKey(n,i);if(s)return t[s]=Bt(r),void delete t[i];const o=e?function(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,((e,t,n)=>t.toUpperCase()+n))}(i):String(i).trim();o!==i&&delete t[i],t[o]=Bt(r),n[o]=!0})),this}concat(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.constructor.concat(this,...t)}toJSON(e){const t=Object.create(null);return dt.forEach(this,((n,r)=>{null!=n&&!1!==n&&(t[r]=e&&dt.isArray(n)?n.join(", "):n)})),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map((e=>{let[t,n]=e;return t+": "+n})).join("\n")}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e){const t=new this(e);for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return r.forEach((e=>t.set(e))),t}static accessor(e){const t=(this[jt]=this[jt]={accessors:{}}).accessors,n=this.prototype;function r(e){const r=zt(e);t[r]||(!function(e,t){const n=dt.toCamelCase(" "+t);["get","set","has"].forEach((r=>{Object.defineProperty(e,r+n,{value:function(e,n,i){return this[r].call(this,t,e,n,i)},configurable:!0})}))}(n,e),t[r]=!0)}return dt.isArray(e)?e.forEach(r):r(e),this}}Kt.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),dt.reduceDescriptors(Kt.prototype,((e,t)=>{let{value:n}=e,r=t[0].toUpperCase()+t.slice(1);return{get:()=>n,set(e){this[r]=e}}})),dt.freezeMethods(Kt);const Gt=Kt;function Wt(e,t){const n=this||Ut,r=t||n,i=Gt.from(r.headers);let s=r.data;return dt.forEach(e,(function(e){s=e.call(n,s,i.normalize(),t?t.status:void 0)})),i.normalize(),s}function Ht(e){return!(!e||!e.__CANCEL__)}function Qt(e,t,n){gt.call(this,null==e?"canceled":e,gt.ERR_CANCELED,t,n),this.name="CanceledError"}dt.inherits(Qt,gt,{__CANCEL__:!0});const Yt=Qt;const $t=Lt.hasStandardBrowserEnv?{write(e,t,n,r,i,s){const o=[e+"="+encodeURIComponent(t)];dt.isNumber(n)&&o.push("expires="+new Date(n).toGMTString()),dt.isString(r)&&o.push("path="+r),dt.isString(i)&&o.push("domain="+i),!0===s&&o.push("secure"),document.cookie=o.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read:()=>null,remove(){}};function Jt(e,t){return e&&!/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)?function(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}(e,t):t}const Xt=Lt.hasStandardBrowserEnv?function(){const e=/(msie|trident)/i.test(navigator.userAgent),t=document.createElement("a");let n;function r(n){let r=n;return e&&(t.setAttribute("href",r),r=t.href),t.setAttribute("href",r),{href:t.href,protocol:t.protocol?t.protocol.replace(/:$/,""):"",host:t.host,search:t.search?t.search.replace(/^\?/,""):"",hash:t.hash?t.hash.replace(/^#/,""):"",hostname:t.hostname,port:t.port,pathname:"/"===t.pathname.charAt(0)?t.pathname:"/"+t.pathname}}return n=r(window.location.href),function(e){const t=dt.isString(e)?r(e):e;return t.protocol===n.protocol&&t.host===n.host}}():function(){return!0};const Zt=function(e,t){e=e||10;const n=new Array(e),r=new Array(e);let i,s=0,o=0;return t=void 0!==t?t:1e3,function(a){const c=Date.now(),l=r[o];i||(i=c),n[s]=a,r[s]=c;let u=o,h=0;for(;u!==s;)h+=n[u++],u%=e;if(s=(s+1)%e,s===o&&(o=(o+1)%e),c-i<t)return;const d=l&&c-l;return d?Math.round(1e3*h/d):void 0}};function en(e,t){let n=0;const r=Zt(50,250);return i=>{const s=i.loaded,o=i.lengthComputable?i.total:void 0,a=s-n,c=r(a);n=s;const l={loaded:s,total:o,progress:o?s/o:void 0,bytes:a,rate:c||void 0,estimated:c&&o&&s<=o?(o-s)/c:void 0,event:i};l[t?"download":"upload"]=!0,e(l)}}const tn="undefined"!==typeof XMLHttpRequest&&function(e){return new Promise((function(t,n){let r=e.data;const i=Gt.from(e.headers).normalize();let s,o,{responseType:a,withXSRFToken:c}=e;function l(){e.cancelToken&&e.cancelToken.unsubscribe(s),e.signal&&e.signal.removeEventListener("abort",s)}if(dt.isFormData(r))if(Lt.hasStandardBrowserEnv||Lt.hasStandardBrowserWebWorkerEnv)i.setContentType(!1);else if(!1!==(o=i.getContentType())){const[e,...t]=o?o.split(";").map((e=>e.trim())).filter(Boolean):[];i.setContentType([e||"multipart/form-data",...t].join("; "))}let u=new XMLHttpRequest;if(e.auth){const t=e.auth.username||"",n=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";i.set("Authorization","Basic "+btoa(t+":"+n))}const h=Jt(e.baseURL,e.url);function d(){if(!u)return;const r=Gt.from("getAllResponseHeaders"in u&&u.getAllResponseHeaders());!function(e,t,n){const r=n.config.validateStatus;n.status&&r&&!r(n.status)?t(new gt("Request failed with status code "+n.status,[gt.ERR_BAD_REQUEST,gt.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n)):e(n)}((function(e){t(e),l()}),(function(e){n(e),l()}),{data:a&&"text"!==a&&"json"!==a?u.response:u.responseText,status:u.status,statusText:u.statusText,headers:r,config:e,request:u}),u=null}if(u.open(e.method.toUpperCase(),Ct(h,e.params,e.paramsSerializer),!0),u.timeout=e.timeout,"onloadend"in u?u.onloadend=d:u.onreadystatechange=function(){u&&4===u.readyState&&(0!==u.status||u.responseURL&&0===u.responseURL.indexOf("file:"))&&setTimeout(d)},u.onabort=function(){u&&(n(new gt("Request aborted",gt.ECONNABORTED,e,u)),u=null)},u.onerror=function(){n(new gt("Network Error",gt.ERR_NETWORK,e,u)),u=null},u.ontimeout=function(){let t=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded";const r=e.transitional||Nt;e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),n(new gt(t,r.clarifyTimeoutError?gt.ETIMEDOUT:gt.ECONNABORTED,e,u)),u=null},Lt.hasStandardBrowserEnv&&(c&&dt.isFunction(c)&&(c=c(e)),c||!1!==c&&Xt(h))){const t=e.xsrfHeaderName&&e.xsrfCookieName&&$t.read(e.xsrfCookieName);t&&i.set(e.xsrfHeaderName,t)}void 0===r&&i.setContentType(null),"setRequestHeader"in u&&dt.forEach(i.toJSON(),(function(e,t){u.setRequestHeader(t,e)})),dt.isUndefined(e.withCredentials)||(u.withCredentials=!!e.withCredentials),a&&"json"!==a&&(u.responseType=e.responseType),"function"===typeof e.onDownloadProgress&&u.addEventListener("progress",en(e.onDownloadProgress,!0)),"function"===typeof e.onUploadProgress&&u.upload&&u.upload.addEventListener("progress",en(e.onUploadProgress)),(e.cancelToken||e.signal)&&(s=t=>{u&&(n(!t||t.type?new Yt(null,e,u):t),u.abort(),u=null)},e.cancelToken&&e.cancelToken.subscribe(s),e.signal&&(e.signal.aborted?s():e.signal.addEventListener("abort",s)));const f=function(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}(h);f&&-1===Lt.protocols.indexOf(f)?n(new gt("Unsupported protocol "+f+":",gt.ERR_BAD_REQUEST,e)):u.send(r||null)}))},nn={http:null,xhr:tn};dt.forEach(nn,((e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch(n){}Object.defineProperty(e,"adapterName",{value:t})}}));const rn=e=>"- ".concat(e),sn=e=>dt.isFunction(e)||null===e||!1===e,on=e=>{e=dt.isArray(e)?e:[e];const{length:t}=e;let n,r;const i={};for(let s=0;s<t;s++){let t;if(n=e[s],r=n,!sn(n)&&(r=nn[(t=String(n)).toLowerCase()],void 0===r))throw new gt("Unknown adapter '".concat(t,"'"));if(r)break;i[t||"#"+s]=r}if(!r){const e=Object.entries(i).map((e=>{let[t,n]=e;return"adapter ".concat(t," ")+(!1===n?"is not supported by the environment":"is not available in the build")}));let n=t?e.length>1?"since :\n"+e.map(rn).join("\n"):" "+rn(e[0]):"as no adapter specified";throw new gt("There is no suitable adapter to dispatch the request "+n,"ERR_NOT_SUPPORT")}return r};function an(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Yt(null,e)}function cn(e){an(e),e.headers=Gt.from(e.headers),e.data=Wt.call(e,e.transformRequest),-1!==["post","put","patch"].indexOf(e.method)&&e.headers.setContentType("application/x-www-form-urlencoded",!1);return on(e.adapter||Ut.adapter)(e).then((function(t){return an(e),t.data=Wt.call(e,e.transformResponse,t),t.headers=Gt.from(t.headers),t}),(function(t){return Ht(t)||(an(e),t&&t.response&&(t.response.data=Wt.call(e,e.transformResponse,t.response),t.response.headers=Gt.from(t.response.headers))),Promise.reject(t)}))}const ln=e=>e instanceof Gt?e.toJSON():e;function un(e,t){t=t||{};const n={};function r(e,t,n){return dt.isPlainObject(e)&&dt.isPlainObject(t)?dt.merge.call({caseless:n},e,t):dt.isPlainObject(t)?dt.merge({},t):dt.isArray(t)?t.slice():t}function i(e,t,n){return dt.isUndefined(t)?dt.isUndefined(e)?void 0:r(void 0,e,n):r(e,t,n)}function s(e,t){if(!dt.isUndefined(t))return r(void 0,t)}function o(e,t){return dt.isUndefined(t)?dt.isUndefined(e)?void 0:r(void 0,e):r(void 0,t)}function a(n,i,s){return s in t?r(n,i):s in e?r(void 0,n):void 0}const c={url:s,method:s,data:s,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:a,headers:(e,t)=>i(ln(e),ln(t),!0)};return dt.forEach(Object.keys(Object.assign({},e,t)),(function(r){const s=c[r]||i,o=s(e[r],t[r],r);dt.isUndefined(o)&&s!==a||(n[r]=o)})),n}const hn="1.6.7",dn={};["object","boolean","number","function","string","symbol"].forEach(((e,t)=>{dn[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}}));const fn={};dn.transitional=function(e,t,n){function r(e,t){return"[Axios v1.6.7] Transitional option '"+e+"'"+t+(n?". "+n:"")}return(n,i,s)=>{if(!1===e)throw new gt(r(i," has been removed"+(t?" in "+t:"")),gt.ERR_DEPRECATED);return t&&!fn[i]&&(fn[i]=!0,console.warn(r(i," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(n,i,s)}};const pn={assertOptions:function(e,t,n){if("object"!==typeof e)throw new gt("options must be an object",gt.ERR_BAD_OPTION_VALUE);const r=Object.keys(e);let i=r.length;for(;i-- >0;){const s=r[i],o=t[s];if(o){const t=e[s],n=void 0===t||o(t,s,e);if(!0!==n)throw new gt("option "+s+" must be "+n,gt.ERR_BAD_OPTION_VALUE)}else if(!0!==n)throw new gt("Unknown option "+s,gt.ERR_BAD_OPTION)}},validators:dn},mn=pn.validators;class gn{constructor(e){this.defaults=e,this.interceptors={request:new xt,response:new xt}}async request(e,t){try{return await this._request(e,t)}catch(n){if(n instanceof Error){let e;Error.captureStackTrace?Error.captureStackTrace(e={}):e=new Error;const t=e.stack?e.stack.replace(/^.+\n/,""):"";n.stack?t&&!String(n.stack).endsWith(t.replace(/^.+\n.+\n/,""))&&(n.stack+="\n"+t):n.stack=t}throw n}}_request(e,t){"string"===typeof e?(t=t||{}).url=e:t=e||{},t=un(this.defaults,t);const{transitional:n,paramsSerializer:r,headers:i}=t;void 0!==n&&pn.assertOptions(n,{silentJSONParsing:mn.transitional(mn.boolean),forcedJSONParsing:mn.transitional(mn.boolean),clarifyTimeoutError:mn.transitional(mn.boolean)},!1),null!=r&&(dt.isFunction(r)?t.paramsSerializer={serialize:r}:pn.assertOptions(r,{encode:mn.function,serialize:mn.function},!0)),t.method=(t.method||this.defaults.method||"get").toLowerCase();let s=i&&dt.merge(i.common,i[t.method]);i&&dt.forEach(["delete","get","head","post","put","patch","common"],(e=>{delete i[e]})),t.headers=Gt.concat(s,i);const o=[];let a=!0;this.interceptors.request.forEach((function(e){"function"===typeof e.runWhen&&!1===e.runWhen(t)||(a=a&&e.synchronous,o.unshift(e.fulfilled,e.rejected))}));const c=[];let l;this.interceptors.response.forEach((function(e){c.push(e.fulfilled,e.rejected)}));let u,h=0;if(!a){const e=[cn.bind(this),void 0];for(e.unshift.apply(e,o),e.push.apply(e,c),u=e.length,l=Promise.resolve(t);h<u;)l=l.then(e[h++],e[h++]);return l}u=o.length;let d=t;for(h=0;h<u;){const e=o[h++],t=o[h++];try{d=e(d)}catch(f){t.call(this,f);break}}try{l=cn.call(this,d)}catch(f){return Promise.reject(f)}for(h=0,u=c.length;h<u;)l=l.then(c[h++],c[h++]);return l}getUri(e){return Ct(Jt((e=un(this.defaults,e)).baseURL,e.url),e.params,e.paramsSerializer)}}dt.forEach(["delete","get","head","options"],(function(e){gn.prototype[e]=function(t,n){return this.request(un(n||{},{method:e,url:t,data:(n||{}).data}))}})),dt.forEach(["post","put","patch"],(function(e){function t(t){return function(n,r,i){return this.request(un(i||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:n,data:r}))}}gn.prototype[e]=t(),gn.prototype[e+"Form"]=t(!0)}));const yn=gn;class vn{constructor(e){if("function"!==typeof e)throw new TypeError("executor must be a function.");let t;this.promise=new Promise((function(e){t=e}));const n=this;this.promise.then((e=>{if(!n._listeners)return;let t=n._listeners.length;for(;t-- >0;)n._listeners[t](e);n._listeners=null})),this.promise.then=e=>{let t;const r=new Promise((e=>{n.subscribe(e),t=e})).then(e);return r.cancel=function(){n.unsubscribe(t)},r},e((function(e,r,i){n.reason||(n.reason=new Yt(e,r,i),t(n.reason))}))}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}static source(){let e;return{token:new vn((function(t){e=t})),cancel:e}}}const wn=vn;const bn={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(bn).forEach((e=>{let[t,n]=e;bn[n]=t}));const _n=bn;const Sn=function e(t){const n=new yn(t),r=Re(yn.prototype.request,n);return dt.extend(r,yn.prototype,n,{allOwnKeys:!0}),dt.extend(r,n,null,{allOwnKeys:!0}),r.create=function(n){return e(un(t,n))},r}(Ut);Sn.Axios=yn,Sn.CanceledError=Yt,Sn.CancelToken=wn,Sn.isCancel=Ht,Sn.VERSION=hn,Sn.toFormData=_t,Sn.AxiosError=gt,Sn.Cancel=Sn.CanceledError,Sn.all=function(e){return Promise.all(e)},Sn.spread=function(e){return function(t){return e.apply(null,t)}},Sn.isAxiosError=function(e){return dt.isObject(e)&&!0===e.isAxiosError},Sn.mergeConfig=un,Sn.AxiosHeaders=Gt,Sn.formToJSON=e=>Mt(dt.isHTMLForm(e)?new FormData(e):e),Sn.getAdapter=on,Sn.HttpStatusCode=_n,Sn.default=Sn;const En=Sn.create({baseURL:"https://api.themoviedb.org/3"});const In=function(){const[e,t]=(0,r.useState)([]);(0,r.useEffect)((()=>{!async function(){const e=await En.get(Oe.fetchNetflixOriginals);t(e.data.results[Math.floor(Math.random()*e.data.results.length-1)])}()}),[]);{const t=(e,t)=>(null===e||void 0===e?void 0:e.length)>t?e.substr(0,t-1)+"...":e;return(0,Ne.jsxs)("header",{className:"banner",style:{backgroundImage:'url("https://image.tmdb.org/t/p/original/'.concat(null===e||void 0===e?void 0:e.backdrop_path,'")'),backgroundSize:"cover",backgroundPosition:"center center"},children:[(0,Ne.jsxs)("div",{className:"banner__contents",children:[(0,Ne.jsx)("h1",{className:"banner__title",children:(null===e||void 0===e?void 0:e.title)||(null===e||void 0===e?void 0:e.name)||(null===e||void 0===e?void 0:e.original_name)}),(0,Ne.jsxs)("div",{className:"banner__buttons",children:[(0,Ne.jsx)("button",{className:"banner__button",children:"Play"}),(0,Ne.jsx)("button",{className:"banner__button",children:"My List"})]}),(0,Ne.jsx)("h1",{className:"banner__description",children:t(null===e||void 0===e?void 0:e.overview,150)})]}),(0,Ne.jsx)("div",{className:"banner--fadeBottom"})]})}};const Tn=function(e){let{title:t,fetchUrl:n,isLargeRow:i=!1}=e;const[s,o]=(0,r.useState)([]);return(0,r.useEffect)((()=>{!async function(){const e=await En.get(n);o(e.data.results)}()}),[n]),(0,Ne.jsxs)("div",{className:"row",children:[(0,Ne.jsx)("h2",{children:t}),(0,Ne.jsx)("div",{className:"row__posters",children:s.map((e=>(i&&e.poster_path||!i&&e.backdrop_path)&&(0,Ne.jsx)("img",{className:"row__poster ".concat(i&&"row__posterLarge"),src:"".concat("https://image.tmdb.org/t/p/original/").concat(i?e.poster_path:e.backdrop_path),alt:e.name},e.id)))})]})};const kn=function(){return(0,Ne.jsxs)("div",{className:"homeScreen",children:[(0,Ne.jsx)(Ae,{}),(0,Ne.jsx)(In,{}),(0,Ne.jsx)(Tn,{title:"Netflix Originals",fetchUrl:Oe.fetchNetflixOriginals,isLargeRow:!0}),(0,Ne.jsx)(Tn,{title:"Trending Now",fetchUrl:Oe.fetchTrending}),(0,Ne.jsx)(Tn,{title:"Top Rated",fetchUrl:Oe.fetchTopRated}),(0,Ne.jsx)(Tn,{title:"Action Movies",fetchUrl:Oe.fetchActionMovies}),(0,Ne.jsx)(Tn,{title:"Comedy Movies",fetchUrl:Oe.fetchComedyMovies}),(0,Ne.jsx)(Tn,{title:"Horror Movies",fetchUrl:Oe.fetchHorrorMovies}),(0,Ne.jsx)(Tn,{title:"Romance Movies",fetchUrl:Oe.fetchRomanceMovies}),(0,Ne.jsx)(Tn,{title:"Documentaries",fetchUrl:Oe.fetchDocumentaries})]})},Cn=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},xn={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const t=e[i],s=i+1<e.length,o=s?e[i+1]:0,a=i+2<e.length,c=a?e[i+2]:0,l=t>>2,u=(3&t)<<4|o>>4;let h=(15&o)<<2|c>>6,d=63&c;a||(d=64,s||(h=64)),r.push(n[l],n[u],n[h],n[d])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(Cn(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&s)}else if(i>239&&i<365){const s=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(s>>10)),t[r++]=String.fromCharCode(56320+(1023&s))}else{const s=e[n++],o=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&o)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const t=n[e.charAt(i++)],s=i<e.length?n[e.charAt(i)]:0;++i;const o=i<e.length?n[e.charAt(i)]:64;++i;const a=i<e.length?n[e.charAt(i)]:64;if(++i,null==t||null==s||null==o||null==a)throw new Nn;const c=t<<2|s>>4;if(r.push(c),64!==o){const e=s<<4&240|o>>2;if(r.push(e),64!==a){const e=o<<6&192|a;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class Nn extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const An=function(e){return function(e){const t=Cn(e);return xn.encodeByteArray(t,!0)}(e).replace(/\./g,"")},Pn=function(e){try{return xn.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function On(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(const n in t)t.hasOwnProperty(n)&&Rn(n)&&(e[n]=On(e[n],t[n]));return e}function Rn(e){return"__proto__"!==e}const Dn=()=>function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__,Ln=()=>{try{return Dn()||(()=>{if("undefined"===typeof process)return;const e={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"===typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}const t=e&&Pn(e[1]);return t&&JSON.parse(t)})()}catch(e){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(e))}},Mn=()=>{var e;return null===(e=Ln())||void 0===e?void 0:e.config};class Fn{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"===typeof e&&(this.promise.catch((()=>{})),1===e.length?e(t):e(t,n))}}}function Un(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function Vn(){var e;const t=null===(e=Ln())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(r){return!1}}function jn(){const e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}function zn(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function Bn(){const e=Un();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function qn(){return!Vn()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Kn(){try{return"object"===typeof indexedDB}catch(e){return!1}}class Gn extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,Gn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Wn.prototype.create)}}class Wn{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e){const t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?function(e,t){return e.replace(Hn,((e,n)=>{const r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}(r,t):"Error",s="".concat(this.serviceName,": ").concat(i," (").concat(n,").");return new Gn(n,s,t)}}const Hn=/\{\$([^}]+)}/g;function Qn(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Yn(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const n=e[i],s=t[i];if($n(n)&&$n(s)){if(!Yn(n,s))return!1}else if(n!==s)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function $n(e){return null!==e&&"object"===typeof e}function Jn(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach((e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function Xn(e){const t={};return e.replace(/^\?/,"").split("&").forEach((e=>{if(e){const[n,r]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(r)}})),t}function Zn(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}function er(e,t){const n=new tr(e,t);return n.subscribe.bind(n)}class tr{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then((()=>{e(this)})).catch((e=>{this.error(e)}))}next(e){this.forEachObserver((t=>{t.next(e)}))}error(e){this.forEachObserver((t=>{t.error(e)})),this.close(e)}complete(){this.forEachObserver((e=>{e.complete()})),this.close()}subscribe(e,t,n){let r;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=function(e,t){if("object"!==typeof e||null===e)return!1;for(const n of t)if(n in e&&"function"===typeof e[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=nr),void 0===r.error&&(r.error=nr),void 0===r.complete&&(r.complete=nr);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(e){}})),this.observers.push(r),i}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then((()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(n){"undefined"!==typeof console&&console.error&&console.error(n)}}))}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((()=>{this.observers=void 0,this.onNoObservers=void 0})))}}function nr(){}function rr(e){return e&&e._delegate?e._delegate:e}class ir{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const sr="[DEFAULT]";class or{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new Fn;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(n){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:sr})}catch(t){}for(const[e,n]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:r});n.resolve(e)}catch(t){}}}}clearInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:sr;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter((e=>"INTERNAL"in e)).map((e=>e.INTERNAL.delete())),...e.filter((e=>"_delete"in e)).map((e=>e._delete()))])}isComponentSet(){return null!=this.component}isInitialized(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:sr;return this.instances.has(e)}getOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:sr;return this.instancesOptions.get(e)||{}}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error("".concat(this.name,"(").concat(n,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[i,s]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(i)&&s.resolve(r)}return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&e(s,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const i of n)try{i(e,t)}catch(r){}}getOrInitializeService(e){let{instanceIdentifier:t,options:n={}}=e,r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(i=t,i===sr?void 0:i),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch(s){}var i;return r||null}normalizeInstanceIdentifier(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:sr;return this.component?this.component.multipleInstances?e:sr:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class ar{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new or(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const cr=[];var lr;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(lr||(lr={}));const ur={debug:lr.DEBUG,verbose:lr.VERBOSE,info:lr.INFO,warn:lr.WARN,error:lr.ERROR,silent:lr.SILENT},hr=lr.INFO,dr={[lr.DEBUG]:"log",[lr.VERBOSE]:"log",[lr.INFO]:"info",[lr.WARN]:"warn",[lr.ERROR]:"error"},fr=function(e,t){if(t<e.logLevel)return;const n=(new Date).toISOString(),r=dr[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i=arguments.length,s=new Array(i>2?i-2:0),o=2;o<i;o++)s[o-2]=arguments[o];console[r]("[".concat(n,"]  ").concat(e.name,":"),...s)};class pr{constructor(e){this.name=e,this._logLevel=hr,this._logHandler=fr,this._userLogHandler=null,cr.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in lr))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}setLogLevel(e){this._logLevel="string"===typeof e?ur[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,lr.DEBUG,...t),this._logHandler(this,lr.DEBUG,...t)}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,lr.VERBOSE,...t),this._logHandler(this,lr.VERBOSE,...t)}info(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,lr.INFO,...t),this._logHandler(this,lr.INFO,...t)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,lr.WARN,...t),this._logHandler(this,lr.WARN,...t)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,lr.ERROR,...t),this._logHandler(this,lr.ERROR,...t)}}const mr=(e,t)=>t.some((t=>e instanceof t));let gr,yr;const vr=new WeakMap,wr=new WeakMap,br=new WeakMap,_r=new WeakMap,Sr=new WeakMap;let Er={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return wr.get(e);if("objectStoreNames"===t)return e.objectStoreNames||br.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return kr(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function Ir(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(yr||(yr=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(Cr(this),n),kr(vr.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return kr(e.apply(Cr(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];const s=e.call(Cr(this),t,...r);return br.set(s,t.sort?t.sort():[t]),kr(s)}}function Tr(e){return"function"===typeof e?Ir(e):(e instanceof IDBTransaction&&function(e){if(wr.has(e))return;const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",s),e.removeEventListener("abort",s)},i=()=>{t(),r()},s=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",s),e.addEventListener("abort",s)}));wr.set(e,t)}(e),mr(e,gr||(gr=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(e,Er):e)}function kr(e){if(e instanceof IDBRequest)return function(e){const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("success",i),e.removeEventListener("error",s)},i=()=>{t(kr(e.result)),r()},s=()=>{n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",s)}));return t.then((t=>{t instanceof IDBCursor&&vr.set(t,e)})).catch((()=>{})),Sr.set(t,e),t}(e);if(_r.has(e))return _r.get(e);const t=Tr(e);return t!==e&&(_r.set(e,t),Sr.set(t,e)),t}const Cr=e=>Sr.get(e);const xr=["get","getKey","getAll","getAllKeys","count"],Nr=["put","add","delete","clear"],Ar=new Map;function Pr(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if(Ar.get(t))return Ar.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=Nr.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!xr.includes(n))return;const s=async function(e){const t=this.transaction(e,i?"readwrite":"readonly");let s=t.store;for(var o=arguments.length,a=new Array(o>1?o-1:0),c=1;c<o;c++)a[c-1]=arguments[c];return r&&(s=s.index(a.shift())),(await Promise.all([s[n](...a),i&&t.done]))[0]};return Ar.set(t,s),s}Er=(e=>({...e,get:(t,n,r)=>Pr(t,n)||e.get(t,n,r),has:(t,n)=>!!Pr(t,n)||e.has(t,n)}))(Er);class Or{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map((e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){const t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((e=>e)).join(" ")}}const Rr="@firebase/app",Dr="0.9.29",Lr=new pr("@firebase/app"),Mr="[DEFAULT]",Fr={[Rr]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Ur=new Map,Vr=new Map;function jr(e,t){try{e.container.addComponent(t)}catch(n){Lr.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function zr(e,t){e.container.addOrOverwriteComponent(t)}function Br(e){const t=e.name;if(Vr.has(t))return Lr.debug("There were multiple attempts to register component ".concat(t,".")),!1;Vr.set(t,e);for(const n of Ur.values())jr(n,e);return!0}function qr(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function Kr(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Mr;qr(e,t).clearInstance(n)}function Gr(){Vr.clear()}const Wr=new Wn("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class Hr{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new ir("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Wr.create("app-deleted",{appName:this._name})}}const Qr="10.9.0";function Yr(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){t={name:t}}const r=Object.assign({name:Mr,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!==typeof i||!i)throw Wr.create("bad-app-name",{appName:String(i)});if(n||(n=Mn()),!n)throw Wr.create("no-options");const s=Ur.get(i);if(s){if(Yn(n,s.options)&&Yn(r,s.config))return s;throw Wr.create("duplicate-app",{appName:i})}const o=new ar(i);for(const c of Vr.values())o.addComponent(c);const a=new Hr(n,r,o);return Ur.set(i,a),a}function $r(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Mr;const t=Ur.get(e);if(!t&&e===Mr&&Mn())return Yr();if(!t)throw Wr.create("no-app",{appName:e});return t}function Jr(){return Array.from(Ur.values())}async function Xr(e){const t=e.name;Ur.has(t)&&(Ur.delete(t),await Promise.all(e.container.getProviders().map((e=>e.delete()))),e.isDeleted=!0)}function Zr(e,t,n){var r;let i=null!==(r=Fr[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));const s=i.match(/\s|\//),o=t.match(/\s|\//);if(s||o){const e=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return s&&e.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),s&&o&&e.push("and"),o&&e.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void Lr.warn(e.join(" "))}Br(new ir("".concat(i,"-version"),(()=>({library:i,version:t})),"VERSION"))}function ei(e,t){if(null!==e&&"function"!==typeof e)throw Wr.create("invalid-log-argument");!function(e,t){for(const n of cr){let r=null;t&&t.level&&(r=ur[t.level]),n.userLogHandler=null===e?null:function(t,n){for(var i=arguments.length,s=new Array(i>2?i-2:0),o=2;o<i;o++)s[o-2]=arguments[o];const a=s.map((e=>{if(null==e)return null;if("string"===typeof e)return e;if("number"===typeof e||"boolean"===typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(t){return null}})).filter((e=>e)).join(" ");n>=(null!==r&&void 0!==r?r:t.logLevel)&&e({level:lr[n].toLowerCase(),message:a,args:s,type:t.name})}}}(e,t)}function ti(e){var t;t=e,cr.forEach((e=>{e.setLogLevel(t)}))}const ni="firebase-heartbeat-database",ri=1,ii="firebase-heartbeat-store";let si=null;function oi(){return si||(si=function(e,t){let{blocked:n,upgrade:r,blocking:i,terminated:s}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const o=indexedDB.open(e,t),a=kr(o);return r&&o.addEventListener("upgradeneeded",(e=>{r(kr(o.result),e.oldVersion,e.newVersion,kr(o.transaction),e)})),n&&o.addEventListener("blocked",(e=>n(e.oldVersion,e.newVersion,e))),a.then((e=>{s&&e.addEventListener("close",(()=>s())),i&&e.addEventListener("versionchange",(e=>i(e.oldVersion,e.newVersion,e)))})).catch((()=>{})),a}(ni,ri,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(ii)}catch(n){console.warn(n)}}}).catch((e=>{throw Wr.create("idb-open",{originalErrorMessage:e.message})}))),si}async function ai(e,t){try{const n=(await oi()).transaction(ii,"readwrite"),r=n.objectStore(ii);await r.put(t,ci(e)),await n.done}catch(n){if(n instanceof Gn)Lr.warn(n.message);else{const e=Wr.create("idb-set",{originalErrorMessage:null===n||void 0===n?void 0:n.message});Lr.warn(e.message)}}}function ci(e){return"".concat(e.name,"!").concat(e.options.appId)}class li{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new hi(t),this._heartbeatsCachePromise=this._storage.read().then((e=>(this._heartbeatsCache=e,e)))}async triggerHeartbeat(){var e,t;const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=ui();if((null!=(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||(this._heartbeatsCache=await this._heartbeatsCachePromise,null!=(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)))&&this._heartbeatsCache.lastSentHeartbeatDate!==r&&!this._heartbeatsCache.heartbeats.some((e=>e.date===r)))return this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((e=>{const t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var e;if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const t=ui(),{heartbeatsToSend:n,unsentEntries:r}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const n=[];let r=e.slice();for(const i of e){const e=n.find((e=>e.agent===i.agent));if(e){if(e.dates.push(i.date),di(n)>t){e.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),di(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),i=An(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}}function ui(){return(new Date).toISOString().substring(0,10)}class hi{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!Kn()&&new Promise(((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(n){t(n)}})).then((()=>!0)).catch((()=>!1))}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=(await oi()).transaction(ii),n=await t.objectStore(ii).get(ci(e));return await t.done,n}catch(t){if(t instanceof Gn)Lr.warn(t.message);else{const e=Wr.create("idb-get",{originalErrorMessage:null===t||void 0===t?void 0:t.message});Lr.warn(e.message)}}}(this.app);return(null===e||void 0===e?void 0:e.heartbeats)?e:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return ai(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return ai(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function di(e){return An(JSON.stringify({version:2,heartbeats:e})).length}var fi;fi="",Br(new ir("platform-logger",(e=>new Or(e)),"PRIVATE")),Br(new ir("heartbeat",(e=>new li(e)),"PRIVATE")),Zr(Rr,Dr,fi),Zr(Rr,Dr,"esm2017"),Zr("fire-js","");class pi{constructor(e,t){this._delegate=e,this.firebase=t,jr(e,new ir("app-compat",(()=>this),"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise((e=>{this._delegate.checkDestroyed(),e()})).then((()=>(this.firebase.INTERNAL.removeApp(this.name),Xr(this._delegate))))}_getService(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Mr;var n;this._delegate.checkDestroyed();const r=this._delegate.container.getProvider(e);return r.isInitialized()||"EXPLICIT"!==(null===(n=r.getComponent())||void 0===n?void 0:n.instantiationMode)||r.initialize(),r.getImmediate({identifier:t})}_removeServiceInstance(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Mr;this._delegate.container.getProvider(e).clearInstance(t)}_addComponent(e){jr(this._delegate,e)}_addOrOverwriteComponent(e){zr(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const mi=new Wn("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."});const gi=function e(){const n=function(e){const n={},r={__esModule:!0,initializeApp:function(t){const i=Yr(t,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{});if(Qn(n,i.name))return n[i.name];const s=new e(i,r);return n[i.name]=s,s},app:i,registerVersion:Zr,setLogLevel:ti,onLog:ei,apps:null,SDK_VERSION:Qr,INTERNAL:{registerComponent:function(t){const n=t.name,s=n.replace("-compat","");if(Br(t)&&"PUBLIC"===t.type){const o=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i();if("function"!==typeof e[s])throw mi.create("invalid-app-argument",{appName:n});return e[s]()};void 0!==t.serviceProps&&On(o,t.serviceProps),r[s]=o,e.prototype[s]=function(){const e=this._getService.bind(this,n);for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return e.apply(this,t.multipleInstances?i:[])}}return"PUBLIC"===t.type?r[s]:null},removeApp:function(e){delete n[e]},useAsService:function(e,t){return"serverAuth"===t?null:t},modularAPIs:t}};function i(e){if(!Qn(n,e=e||Mr))throw mi.create("no-app",{appName:e});return n[e]}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(n).map((e=>n[e]))}}),i.App=e,r}(pi);return n.INTERNAL=Object.assign(Object.assign({},n.INTERNAL),{createFirebaseNamespace:e,extendNamespace:function(e){On(n,e)},createSubscribe:er,ErrorFactory:Wn,deepExtend:On}),n}(),yi=new pr("@firebase/app-compat");if("object"===typeof self&&self.self===self&&void 0!==self.firebase){yi.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const e=self.firebase.SDK_VERSION;e&&e.indexOf("LITE")>=0&&yi.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const vi=gi;!function(e){Zr("@firebase/app-compat","0.2.29",e)}();vi.registerVersion("firebase","10.9.0","app-compat");var wi,bi="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},_i={},Si=Si||{},Ei=bi||self;function Ii(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function Ti(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var ki="closure_uid_"+(1e9*Math.random()>>>0),Ci=0;function xi(e,t,n){return e.call.apply(e.bind,arguments)}function Ni(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function Ai(e,t,n){return(Ai=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?xi:Ni).apply(null,arguments)}function Pi(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function Oi(e,t){function n(){}n.prototype=t.prototype,e.$=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.ac=function(e,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return t.prototype[n].apply(e,i)}}function Ri(){this.s=this.s,this.o=this.o}Ri.prototype.s=!1,Ri.prototype.sa=function(){var e;!this.s&&(this.s=!0,this.N(),0)&&(e=this,Object.prototype.hasOwnProperty.call(e,ki)&&e[ki]||(e[ki]=++Ci))},Ri.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Di=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(let n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1};function Li(e){const t=e.length;if(0<t){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function Mi(e,t){for(let n=1;n<arguments.length;n++){const t=arguments[n];if(Ii(t)){const n=e.length||0,r=t.length||0;e.length=n+r;for(let i=0;i<r;i++)e[n+i]=t[i]}else e.push(t)}}function Fi(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}Fi.prototype.h=function(){this.defaultPrevented=!0};var Ui=function(){if(!Ei.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{const e=()=>{};Ei.addEventListener("test",e,t),Ei.removeEventListener("test",e,t)}catch(n){}return e}();function Vi(e){return/^[\s\xa0]*$/.test(e)}function ji(){var e=Ei.navigator;return e&&(e=e.userAgent)?e:""}function zi(e){return-1!=ji().indexOf(e)}function Bi(e){return Bi[" "](e),e}Bi[" "]=function(){};var qi,Ki,Gi=zi("Opera"),Wi=zi("Trident")||zi("MSIE"),Hi=zi("Edge"),Qi=Hi||Wi,Yi=zi("Gecko")&&!(-1!=ji().toLowerCase().indexOf("webkit")&&!zi("Edge"))&&!(zi("Trident")||zi("MSIE"))&&!zi("Edge"),$i=-1!=ji().toLowerCase().indexOf("webkit")&&!zi("Edge");function Ji(){var e=Ei.document;return e?e.documentMode:void 0}e:{var Xi="",Zi=function(){var e=ji();return Yi?/rv:([^\);]+)(\)|;)/.exec(e):Hi?/Edge\/([\d\.]+)/.exec(e):Wi?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):$i?/WebKit\/(\S+)/.exec(e):Gi?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(Zi&&(Xi=Zi?Zi[1]:""),Wi){var es=Ji();if(null!=es&&es>parseFloat(Xi)){qi=String(es);break e}}qi=Xi}if(Ei.document&&Wi){var ts=Ji();Ki=ts||(parseInt(qi,10)||void 0)}else Ki=void 0;var ns=Ki;function rs(e,t){if(Fi.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(Yi){e:{try{Bi(t.nodeName);var i=!0;break e}catch(s){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:is[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&rs.$.h.call(this)}}Oi(rs,Fi);var is={2:"touch",3:"pen",4:"mouse"};rs.prototype.h=function(){rs.$.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var ss="closure_listenable_"+(1e6*Math.random()|0),os=0;function as(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.la=i,this.key=++os,this.fa=this.ia=!1}function cs(e){e.fa=!0,e.listener=null,e.proxy=null,e.src=null,e.la=null}function ls(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function us(e){const t={};for(const n in e)t[n]=e[n];return t}const hs="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ds(e,t){let n,r;for(let i=1;i<arguments.length;i++){for(n in r=arguments[i],r)e[n]=r[n];for(let t=0;t<hs.length;t++)n=hs[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function fs(e){this.src=e,this.g={},this.h=0}function ps(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],s=Di(i,t);(r=0<=s)&&Array.prototype.splice.call(i,s,1),r&&(cs(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function ms(e,t,n,r){for(var i=0;i<e.length;++i){var s=e[i];if(!s.fa&&s.listener==t&&s.capture==!!n&&s.la==r)return i}return-1}fs.prototype.add=function(e,t,n,r,i){var s=e.toString();(e=this.g[s])||(e=this.g[s]=[],this.h++);var o=ms(e,t,r,i);return-1<o?(t=e[o],n||(t.ia=!1)):((t=new as(t,this.src,s,!!r,i)).ia=n,e.push(t)),t};var gs="closure_lm_"+(1e6*Math.random()|0),ys={};function vs(e,t,n,r,i){if(r&&r.once)return bs(e,t,n,r,i);if(Array.isArray(t)){for(var s=0;s<t.length;s++)vs(e,t[s],n,r,i);return null}return n=Cs(n),e&&e[ss]?e.O(t,n,Ti(r)?!!r.capture:!!r,i):ws(e,t,n,!1,r,i)}function ws(e,t,n,r,i,s){if(!t)throw Error("Invalid event type");var o=Ti(i)?!!i.capture:!!i,a=Ts(e);if(a||(e[gs]=a=new fs(e)),(n=a.add(t,n,r,o,s)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}const t=Is;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)Ui||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(Es(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function bs(e,t,n,r,i){if(Array.isArray(t)){for(var s=0;s<t.length;s++)bs(e,t[s],n,r,i);return null}return n=Cs(n),e&&e[ss]?e.P(t,n,Ti(r)?!!r.capture:!!r,i):ws(e,t,n,!0,r,i)}function _s(e,t,n,r,i){if(Array.isArray(t))for(var s=0;s<t.length;s++)_s(e,t[s],n,r,i);else r=Ti(r)?!!r.capture:!!r,n=Cs(n),e&&e[ss]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=ms(s=e.g[t],n,r,i))&&(cs(s[n]),Array.prototype.splice.call(s,n,1),0==s.length&&(delete e.g[t],e.h--)))):e&&(e=Ts(e))&&(t=e.g[t.toString()],e=-1,t&&(e=ms(t,n,r,i)),(n=-1<e?t[e]:null)&&Ss(n))}function Ss(e){if("number"!==typeof e&&e&&!e.fa){var t=e.src;if(t&&t[ss])ps(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(Es(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Ts(t))?(ps(n,e),0==n.h&&(n.src=null,t[gs]=null)):cs(e)}}}function Es(e){return e in ys?ys[e]:ys[e]="on"+e}function Is(e,t){if(e.fa)e=!0;else{t=new rs(t,this);var n=e.listener,r=e.la||e.src;e.ia&&Ss(e),e=n.call(r,t)}return e}function Ts(e){return(e=e[gs])instanceof fs?e:null}var ks="__closure_events_fn_"+(1e9*Math.random()>>>0);function Cs(e){return"function"===typeof e?e:(e[ks]||(e[ks]=function(t){return e.handleEvent(t)}),e[ks])}function xs(){Ri.call(this),this.i=new fs(this),this.S=this,this.J=null}function Ns(e,t){var n,r=e.J;if(r)for(n=[];r;r=r.J)n.push(r);if(e=e.S,r=t.type||t,"string"===typeof t)t=new Fi(t,e);else if(t instanceof Fi)t.target=t.target||e;else{var i=t;ds(t=new Fi(r,e),i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var o=t.g=n[s];i=As(o,r,!0,t)&&i}if(i=As(o=t.g=e,r,!0,t)&&i,i=As(o,r,!1,t)&&i,n)for(s=0;s<n.length;s++)i=As(o=t.g=n[s],r,!1,t)&&i}function As(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,s=0;s<t.length;++s){var o=t[s];if(o&&!o.fa&&o.capture==n){var a=o.listener,c=o.la||o.src;o.ia&&ps(e.i,o),i=!1!==a.call(c,r)&&i}}return i&&!r.defaultPrevented}Oi(xs,Ri),xs.prototype[ss]=!0,xs.prototype.removeEventListener=function(e,t,n,r){_s(this,e,t,n,r)},xs.prototype.N=function(){if(xs.$.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)cs(n[r]);delete t.g[e],t.h--}}this.J=null},xs.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},xs.prototype.P=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var Ps=Ei.JSON.stringify;function Os(){var e=Vs;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var Rs=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}((()=>new Ds),(e=>e.reset()));class Ds{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function Ls(e){var t=1;e=e.split(":");const n=[];for(;0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function Ms(e){Ei.setTimeout((()=>{throw e}),0)}let Fs,Us=!1,Vs=new class{constructor(){this.h=this.g=null}add(e,t){const n=Rs.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},js=()=>{const e=Ei.Promise.resolve(void 0);Fs=()=>{e.then(zs)}};var zs=()=>{for(var e;e=Os();){try{e.h.call(e.g)}catch(n){Ms(n)}var t=Rs;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}Us=!1};function Bs(e,t){xs.call(this),this.h=e||1,this.g=t||Ei,this.j=Ai(this.qb,this),this.l=Date.now()}function qs(e){e.ga=!1,e.T&&(e.g.clearTimeout(e.T),e.T=null)}function Ks(e,t,n){if("function"===typeof e)n&&(e=Ai(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=Ai(e.handleEvent,e)}return 2147483647<Number(t)?-1:Ei.setTimeout(e,t||0)}function Gs(e){e.g=Ks((()=>{e.g=null,e.i&&(e.i=!1,Gs(e))}),e.j);const t=e.h;e.h=null,e.m.apply(null,t)}Oi(Bs,xs),(wi=Bs.prototype).ga=!1,wi.T=null,wi.qb=function(){if(this.ga){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-e):(this.T&&(this.g.clearTimeout(this.T),this.T=null),Ns(this,"tick"),this.ga&&(qs(this),this.start()))}},wi.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},wi.N=function(){Bs.$.N.call(this),qs(this),delete this.g};class Ws extends Ri{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:Gs(this)}N(){super.N(),this.g&&(Ei.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Hs(e){Ri.call(this),this.h=e,this.g={}}Oi(Hs,Ri);var Qs=[];function Ys(e,t,n,r){Array.isArray(n)||(n&&(Qs[0]=n.toString()),n=Qs);for(var i=0;i<n.length;i++){var s=vs(t,n[i],r||e.handleEvent,!1,e.h||e);if(!s)break;e.g[s.key]=s}}function $s(e){ls(e.g,(function(e,t){this.g.hasOwnProperty(t)&&Ss(e)}),e),e.g={}}function Js(){this.g=!0}function Xs(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var o=1;o<i.length;o++)i[o]=""}}}return Ps(n)}catch(a){return t}}(e,n)+(r?" "+r:"")}))}Hs.prototype.N=function(){Hs.$.N.call(this),$s(this)},Hs.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Js.prototype.Ea=function(){this.g=!1},Js.prototype.info=function(){};var Zs={},eo=null;function to(){return eo=eo||new xs}function no(e){Fi.call(this,Zs.Ta,e)}function ro(e){const t=to();Ns(t,new no(t))}function io(e,t){Fi.call(this,Zs.STAT_EVENT,e),this.stat=t}function so(e){const t=to();Ns(t,new io(t,e))}function oo(e,t){Fi.call(this,Zs.Ua,e),this.size=t}function ao(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return Ei.setTimeout((function(){e()}),t)}Zs.Ta="serverreachability",Oi(no,Fi),Zs.STAT_EVENT="statevent",Oi(io,Fi),Zs.Ua="timingevent",Oi(oo,Fi);var co={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},lo={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function uo(){}function ho(e){return e.h||(e.h=e.i())}function fo(){}uo.prototype.h=null;var po,mo={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function go(){Fi.call(this,"d")}function yo(){Fi.call(this,"c")}function vo(){}function wo(e,t,n,r){this.l=e,this.j=t,this.m=n,this.W=r||1,this.U=new Hs(this),this.P=_o,e=Qi?125:void 0,this.V=new Bs(e),this.I=null,this.i=!1,this.u=this.B=this.A=this.L=this.G=this.Y=this.C=null,this.F=[],this.g=null,this.o=0,this.s=this.v=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new bo}function bo(){this.i=null,this.g="",this.h=!1}Oi(go,Fi),Oi(yo,Fi),Oi(vo,uo),vo.prototype.g=function(){return new XMLHttpRequest},vo.prototype.i=function(){return{}},po=new vo;var _o=45e3,So={},Eo={};function Io(e,t,n){e.L=1,e.A=qo(Uo(t)),e.u=n,e.S=!0,To(e,null)}function To(e,t){e.G=Date.now(),No(e),e.B=Uo(e.A);var n=e.B,r=e.W;Array.isArray(r)||(r=[String(r)]),na(n.i,"t",r),e.o=0,n=e.l.J,e.h=new bo,e.g=rc(e.l,n?t:null,!e.u),0<e.O&&(e.M=new Ws(Ai(e.Pa,e,e.g),e.O)),Ys(e.U,e.g,"readystatechange",e.nb),t=e.I?us(e.I):{},e.u?(e.v||(e.v="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ha(e.B,e.v,e.u,t)):(e.v="GET",e.g.ha(e.B,e.v,null,t)),ro(),function(e,t,n,r,i,s){e.info((function(){if(e.g)if(s)for(var o="",a=s.split("&"),c=0;c<a.length;c++){var l=a[c].split("=");if(1<l.length){var u=l[0];l=l[1];var h=u.split("_");o=2<=h.length&&"type"==h[1]?o+(u+"=")+l+"&":o+(u+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o}))}(e.j,e.v,e.B,e.m,e.W,e.u)}function ko(e){return!!e.g&&("GET"==e.v&&2!=e.L&&e.l.Ha)}function Co(e,t,n){let r,i=!0;for(;!e.J&&e.o<n.length;){if(r=xo(e,n),r==Eo){4==t&&(e.s=4,so(14),i=!1),Xs(e.j,e.m,null,"[Incomplete Response]");break}if(r==So){e.s=4,so(15),Xs(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}Xs(e.j,e.m,r,null),Do(e,r)}ko(e)&&0!=e.o&&(e.h.g=e.h.g.slice(e.o),e.o=0),4!=t||0!=n.length||e.h.h||(e.s=1,so(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.ba&&(e.ba=!0,(t=e.l).g==e&&t.ca&&!t.M&&(t.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),Ya(t),t.M=!0,so(11))):(Xs(e.j,e.m,n,"[Invalid Chunked Response]"),Ro(e),Oo(e))}function xo(e,t){var n=e.o,r=t.indexOf("\n",n);return-1==r?Eo:(n=Number(t.substring(n,r)),isNaN(n)?So:(r+=1)+n>t.length?Eo:(t=t.slice(r,r+n),e.o=r+n,t))}function No(e){e.Y=Date.now()+e.P,Ao(e,e.P)}function Ao(e,t){if(null!=e.C)throw Error("WatchDog timer not null");e.C=ao(Ai(e.lb,e),t)}function Po(e){e.C&&(Ei.clearTimeout(e.C),e.C=null)}function Oo(e){0==e.l.H||e.J||Xa(e.l,e)}function Ro(e){Po(e);var t=e.M;t&&"function"==typeof t.sa&&t.sa(),e.M=null,qs(e.V),$s(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.sa())}function Do(e,t){try{var n=e.l;if(0!=n.H&&(n.g==e||la(n.i,e)))if(!e.K&&la(n.i,e)&&3==n.H){try{var r=n.Ja.g.parse(t)}catch(l){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.G+3e3<e.G))break e;Ja(n),za(n)}Qa(n),so(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.G&&0==n.A&&!n.v&&(n.v=ao(Ai(n.ib,n),6e3));if(1>=ca(n.i)&&n.oa){try{n.oa()}catch(l){}n.oa=void 0}}else ec(n,11)}else if((e.K||n.g==e)&&Ja(n),!Vi(t))for(i=n.Ja.g.parse(t),t=0;t<i.length;t++){let l=i[t];if(n.V=l[0],l=l[1],2==n.H)if("c"==l[0]){n.K=l[1],n.pa=l[2];const t=l[3];null!=t&&(n.ra=t,n.l.info("VER="+n.ra));const i=l[4];null!=i&&(n.Ga=i,n.l.info("SVER="+n.Ga));const u=l[5];null!=u&&"number"===typeof u&&0<u&&(r=1.5*u,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;const h=e.g;if(h){const e=h.g?h.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var s=r.i;s.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(ua(s,s.h),s.h=null))}if(r.F){const e=h.g?h.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.Da=e,Bo(r.I,r.F,e))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-e.G,n.l.info("Handshake RTT: "+n.S+"ms"));var o=e;if((r=n).wa=nc(r,r.J?r.pa:null,r.Y),o.K){ha(r.i,o);var a=o,c=r.L;c&&a.setTimeout(c),a.C&&(Po(a),No(a)),r.g=o}else Ha(r);0<n.j.length&&qa(n)}else"stop"!=l[0]&&"close"!=l[0]||ec(n,7);else 3==n.H&&("stop"==l[0]||"close"==l[0]?"stop"==l[0]?ec(n,7):ja(n):"noop"!=l[0]&&n.h&&n.h.Aa(l),n.A=0)}ro()}catch(l){}}function Lo(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(Ii(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.ta&&"function"==typeof e.ta)return e.ta();if(!e.Z||"function"!=typeof e.Z){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(Ii(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}t=[],n=0;for(const r in e)t[n++]=r;return t}}}(e),r=function(e){if(e.Z&&"function"==typeof e.Z)return e.Z();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(Ii(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length,s=0;s<i;s++)t.call(void 0,r[s],n&&n[s],e)}(wi=wo.prototype).setTimeout=function(e){this.P=e},wi.nb=function(e){e=e.target;const t=this.M;t&&3==Da(e)?t.l():this.Pa(e)},wi.Pa=function(e){try{if(e==this.g)e:{const u=Da(this.g);var t=this.g.Ia();this.g.da();if(!(3>u)&&(3!=u||Qi||this.g&&(this.h.h||this.g.ja()||La(this.g)))){this.J||4!=u||7==t||ro(),Po(this);var n=this.g.da();this.ca=n;t:if(ko(this)){var r=La(this.g);e="";var i=r.length,s=4==Da(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){Ro(this),Oo(this);var o="";break t}this.h.i=new Ei.TextDecoder}for(t=0;t<i;t++)this.h.h=!0,e+=this.h.i.decode(r[t],{stream:s&&t==i-1});r.length=0,this.h.g+=e,this.o=0,o=this.h.g}else o=this.g.ja();if(this.i=200==n,function(e,t,n,r,i,s,o){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+s+" "+o}))}(this.j,this.v,this.B,this.m,this.W,u,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,c=this.g;if((a=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Vi(a)){var l=a;break t}}l=null}if(!(n=l)){this.i=!1,this.s=3,so(12),Ro(this),Oo(this);break e}Xs(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Do(this,n)}this.S?(Co(this,u,o),Qi&&this.i&&3==u&&(Ys(this.U,this.V,"tick",this.mb),this.V.start())):(Xs(this.j,this.m,o,null),Do(this,o)),4==u&&Ro(this),this.i&&!this.J&&(4==u?Xa(this.l,this):(this.i=!1,No(this)))}else(function(e){const t={};e=(e.g&&2<=Da(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<e.length;r++){if(Vi(e[r]))continue;var n=Ls(e[r]);const i=n[0];if("string"!==typeof(n=n[1]))continue;n=n.trim();const s=t[i]||[];t[i]=s,s.push(n)}!function(e,t){for(const n in e)t.call(void 0,e[n],n,e)}(t,(function(e){return e.join(", ")}))})(this.g),400==n&&0<o.indexOf("Unknown SID")?(this.s=3,so(12)):(this.s=0,so(13)),Ro(this),Oo(this)}}}catch(u){}},wi.mb=function(){if(this.g){var e=Da(this.g),t=this.g.ja();this.o<t.length&&(Po(this),Co(this,e,t),this.i&&4!=e&&No(this))}},wi.cancel=function(){this.J=!0,Ro(this)},wi.lb=function(){this.C=null;const e=Date.now();0<=e-this.Y?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.B),2!=this.L&&(ro(),so(17)),Ro(this),this.s=2,Oo(this)):Ao(this,this.Y-e)};var Mo=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Fo(e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,e instanceof Fo){this.h=e.h,Vo(this,e.j),this.s=e.s,this.g=e.g,jo(this,e.m),this.l=e.l;var t=e.i,n=new Xo;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),zo(this,n),this.o=e.o}else e&&(t=String(e).match(Mo))?(this.h=!1,Vo(this,t[1]||"",!0),this.s=Ko(t[2]||""),this.g=Ko(t[3]||"",!0),jo(this,t[4]),this.l=Ko(t[5]||"",!0),zo(this,t[6]||"",!0),this.o=Ko(t[7]||"")):(this.h=!1,this.i=new Xo(null,this.h))}function Uo(e){return new Fo(e)}function Vo(e,t,n){e.j=n?Ko(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function jo(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function zo(e,t,n){t instanceof Xo?(e.i=t,function(e,t){t&&!e.j&&(Zo(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(ea(this,t),na(this,n,e))}),e)),e.j=t}(e.i,e.h)):(n||(t=Go(t,$o)),e.i=new Xo(t,e.h))}function Bo(e,t,n){e.i.set(t,n)}function qo(e){return Bo(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function Ko(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function Go(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,Wo),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function Wo(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}Fo.prototype.toString=function(){var e=[],t=this.j;t&&e.push(Go(t,Ho,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(Go(t,Ho,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(Go(n,"/"==n.charAt(0)?Yo:Qo,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.o)&&e.push("#",Go(n,Jo)),e.join("")};var Ho=/[#\/\?@]/g,Qo=/[#\?:]/g,Yo=/[#\?]/g,$o=/[#\?@]/g,Jo=/#/g;function Xo(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function Zo(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var s=e[n].substring(0,r);i=e[n].substring(r+1)}else s=e[n];t(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function ea(e,t){Zo(e),t=ra(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function ta(e,t){return Zo(e),t=ra(e,t),e.g.has(t)}function na(e,t,n){ea(e,t),0<n.length&&(e.i=null,e.g.set(ra(e,t),Li(n)),e.h+=n.length)}function ra(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(wi=Xo.prototype).add=function(e,t){Zo(this),this.i=null,e=ra(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},wi.forEach=function(e,t){Zo(this),this.g.forEach((function(n,r){n.forEach((function(n){e.call(t,n,r,this)}),this)}),this)},wi.ta=function(){Zo(this);const e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[];for(let r=0;r<t.length;r++){const i=e[r];for(let e=0;e<i.length;e++)n.push(t[r])}return n},wi.Z=function(e){Zo(this);let t=[];if("string"===typeof e)ta(this,e)&&(t=t.concat(this.g.get(ra(this,e))));else{e=Array.from(this.g.values());for(let n=0;n<e.length;n++)t=t.concat(e[n])}return t},wi.set=function(e,t){return Zo(this),this.i=null,ta(this,e=ra(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},wi.get=function(e,t){return e&&0<(e=this.Z(e)).length?String(e[0]):t},wi.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(var n=0;n<t.length;n++){var r=t[n];const s=encodeURIComponent(String(r)),o=this.Z(r);for(r=0;r<o.length;r++){var i=s;""!==o[r]&&(i+="="+encodeURIComponent(String(o[r]))),e.push(i)}}return this.i=e.join("&")};var ia=class{constructor(e,t){this.g=e,this.map=t}};function sa(e){this.l=e||oa,Ei.PerformanceNavigationTiming?e=0<(e=Ei.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(Ei.g&&Ei.g.Ka&&Ei.g.Ka()&&Ei.g.Ka().dc),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var oa=10;function aa(e){return!!e.h||!!e.g&&e.g.size>=e.j}function ca(e){return e.h?1:e.g?e.g.size:0}function la(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function ua(e,t){e.g?e.g.add(t):e.h=t}function ha(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function da(e){if(null!=e.h)return e.i.concat(e.h.F);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.F);return t}return Li(e.i)}sa.prototype.cancel=function(){if(this.i=da(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var fa,pa=class{stringify(e){return Ei.JSON.stringify(e,void 0)}parse(e){return Ei.JSON.parse(e,void 0)}};function ma(){this.g=new pa}function ga(e,t,n){const r=n||"";try{Lo(e,(function(e,n){let i=e;Ti(e)&&(i=Ps(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function ya(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(s){}}function va(e){this.l=e.ec||null,this.j=e.ob||!1}function wa(e,t){xs.call(this),this.F=e,this.u=t,this.m=void 0,this.readyState=ba,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Oi(va,uo),va.prototype.g=function(){return new wa(this.l,this.j)},va.prototype.i=(fa={},function(){return fa}),Oi(wa,xs);var ba=0;function _a(e){e.j.read().then(e.Xa.bind(e)).catch(e.ka.bind(e))}function Sa(e){e.readyState=4,e.l=null,e.j=null,e.A=null,Ea(e)}function Ea(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(wi=wa.prototype).open=function(e,t){if(this.readyState!=ba)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,Ea(this)},wi.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.F||Ei).fetch(new Request(this.B,t)).then(this.$a.bind(this),this.ka.bind(this))},wi.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((()=>{})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Sa(this)),this.readyState=ba},wi.$a=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Ea(this)),this.g&&(this.readyState=3,Ea(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if("undefined"!==typeof Ei.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;_a(this)}else e.text().then(this.Za.bind(this),this.ka.bind(this))},wi.Xa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Sa(this):Ea(this),3==this.readyState&&_a(this)}},wi.Za=function(e){this.g&&(this.response=this.responseText=e,Sa(this))},wi.Ya=function(e){this.g&&(this.response=e,Sa(this))},wi.ka=function(){this.g&&Sa(this)},wi.setRequestHeader=function(e,t){this.v.append(e,t)},wi.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},wi.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(wa.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var Ia=Ei.JSON.parse;function Ta(e){xs.call(this),this.headers=new Map,this.u=e||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=ka,this.L=this.M=!1}Oi(Ta,xs);var ka="",Ca=/^https?$/i,xa=["POST","PUT"];function Na(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,Aa(e),Oa(e)}function Aa(e){e.F||(e.F=!0,Ns(e,"complete"),Ns(e,"error"))}function Pa(e){if(e.h&&"undefined"!=typeof Si&&(!e.C[1]||4!=Da(e)||2!=e.da()))if(e.v&&4==Da(e))Ks(e.La,0,e);else if(Ns(e,"readystatechange"),4==Da(e)){e.h=!1;try{const a=e.da();e:switch(a){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var r;if(r=0===a){var i=String(e.I).match(Mo)[1]||null;!i&&Ei.self&&Ei.self.location&&(i=Ei.self.location.protocol.slice(0,-1)),r=!Ca.test(i?i.toLowerCase():"")}n=r}if(n)Ns(e,"complete"),Ns(e,"success");else{e.m=6;try{var s=2<Da(e)?e.g.statusText:""}catch(o){s=""}e.j=s+" ["+e.da()+"]",Aa(e)}}finally{Oa(e)}}}function Oa(e,t){if(e.g){Ra(e);const r=e.g,i=e.C[0]?()=>{}:null;e.g=null,e.C=null,t||Ns(e,"ready");try{r.onreadystatechange=i}catch(n){}}}function Ra(e){e.g&&e.L&&(e.g.ontimeout=null),e.A&&(Ei.clearTimeout(e.A),e.A=null)}function Da(e){return e.g?e.g.readyState:0}function La(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.K){case ka:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(Bc){return null}}function Ma(e){let t="";return ls(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}function Fa(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=Ma(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):Bo(e,t,n))}function Ua(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Va(e){this.Ga=0,this.j=[],this.l=new Js,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Ua("failFast",!1,e),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Ua("baseRetryDelayMs",5e3,e),this.hb=Ua("retryDelaySeedMs",1e4,e),this.eb=Ua("forwardChannelMaxRetries",2,e),this.xa=Ua("forwardChannelRequestTimeoutMs",2e4,e),this.va=e&&e.xmlHttpFactory||void 0,this.Ha=e&&e.useFetchStreams||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.i=new sa(e&&e.concurrentRequestLimit),this.Ja=new ma,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=e&&e.bc||!1,e&&e.Ea&&this.l.Ea(),e&&e.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&e&&e.detectBufferingProxy||!1,this.qa=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.qa=e.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function ja(e){if(Ba(e),3==e.H){var t=e.W++,n=Uo(e.I);if(Bo(n,"SID",e.K),Bo(n,"RID",t),Bo(n,"TYPE","terminate"),Ga(e,n),(t=new wo(e,e.l,t)).L=2,t.A=qo(Uo(n)),n=!1,Ei.navigator&&Ei.navigator.sendBeacon)try{n=Ei.navigator.sendBeacon(t.A.toString(),"")}catch(r){}!n&&Ei.Image&&((new Image).src=t.A,n=!0),n||(t.g=rc(t.l,null),t.g.ha(t.A)),t.G=Date.now(),No(t)}tc(e)}function za(e){e.g&&(Ya(e),e.g.cancel(),e.g=null)}function Ba(e){za(e),e.u&&(Ei.clearTimeout(e.u),e.u=null),Ja(e),e.i.cancel(),e.m&&("number"===typeof e.m&&Ei.clearTimeout(e.m),e.m=null)}function qa(e){if(!aa(e.i)&&!e.m){e.m=!0;var t=e.Na;Fs||js(),Us||(Fs(),Us=!0),Vs.add(t,e),e.C=0}}function Ka(e,t){var n;n=t?t.m:e.W++;const r=Uo(e.I);Bo(r,"SID",e.K),Bo(r,"RID",n),Bo(r,"AID",e.V),Ga(e,r),e.o&&e.s&&Fa(r,e.o,e.s),n=new wo(e,e.l,n,e.C+1),null===e.o&&(n.I=e.s),t&&(e.j=t.F.concat(e.j)),t=Wa(e,n,1e3),n.setTimeout(Math.round(.5*e.xa)+Math.round(.5*e.xa*Math.random())),ua(e.i,n),Io(n,r,t)}function Ga(e,t){e.na&&ls(e.na,(function(e,n){Bo(t,n,e)})),e.h&&Lo({},(function(e,n){Bo(t,n,e)}))}function Wa(e,t,n){n=Math.min(e.j.length,n);var r=e.h?Ai(e.h.Va,e.h,e):null;e:{var i=e.j;let t=-1;for(;;){const e=["count="+n];-1==t?0<n?(t=i[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let s=!0;for(let o=0;o<n;o++){let n=i[o].g;const a=i[o].map;if(n-=t,0>n)t=Math.max(0,i[o].g-100),s=!1;else try{ga(a,e,"req"+n+"_")}catch(iu){r&&r(a)}}if(s){r=e.join("&");break e}}}return e=e.j.splice(0,n),t.F=e,r}function Ha(e){if(!e.g&&!e.u){e.ba=1;var t=e.Ma;Fs||js(),Us||(Fs(),Us=!0),Vs.add(t,e),e.A=0}}function Qa(e){return!(e.g||e.u||3<=e.A)&&(e.ba++,e.u=ao(Ai(e.Ma,e),Za(e,e.A)),e.A++,!0)}function Ya(e){null!=e.B&&(Ei.clearTimeout(e.B),e.B=null)}function $a(e){e.g=new wo(e,e.l,"rpc",e.ba),null===e.o&&(e.g.I=e.s),e.g.O=0;var t=Uo(e.wa);Bo(t,"RID","rpc"),Bo(t,"SID",e.K),Bo(t,"AID",e.V),Bo(t,"CI",e.G?"0":"1"),!e.G&&e.qa&&Bo(t,"TO",e.qa),Bo(t,"TYPE","xmlhttp"),Ga(e,t),e.o&&e.s&&Fa(t,e.o,e.s),e.L&&e.g.setTimeout(e.L);var n=e.g;e=e.pa,n.L=1,n.A=qo(Uo(t)),n.u=null,n.S=!0,To(n,e)}function Ja(e){null!=e.v&&(Ei.clearTimeout(e.v),e.v=null)}function Xa(e,t){var n=null;if(e.g==t){Ja(e),Ya(e),e.g=null;var r=2}else{if(!la(e.i,t))return;n=t.F,ha(e.i,t),r=1}if(0!=e.H)if(t.i)if(1==r){n=t.u?t.u.length:0,t=Date.now()-t.G;var i=e.C;Ns(r=to(),new oo(r,n)),qa(e)}else Ha(e);else if(3==(i=t.s)||0==i&&0<t.ca||!(1==r&&function(e,t){return!(ca(e.i)>=e.i.j-(e.m?1:0))&&(e.m?(e.j=t.F.concat(e.j),!0):!(1==e.H||2==e.H||e.C>=(e.cb?0:e.eb))&&(e.m=ao(Ai(e.Na,e,t),Za(e,e.C)),e.C++,!0))}(e,t)||2==r&&Qa(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),i){case 1:ec(e,5);break;case 4:ec(e,10);break;case 3:ec(e,6);break;default:ec(e,2)}}function Za(e,t){let n=e.ab+Math.floor(Math.random()*e.hb);return e.isActive()||(n*=2),n*t}function ec(e,t){if(e.l.info("Error code "+t),2==t){var n=null;e.h&&(n=null);var r=Ai(e.pb,e);n||(n=new Fo("//www.google.com/images/cleardot.gif"),Ei.location&&"http"==Ei.location.protocol||Vo(n,"https"),qo(n)),function(e,t){const n=new Js;if(Ei.Image){const r=new Image;r.onload=Pi(ya,n,r,"TestLoadImage: loaded",!0,t),r.onerror=Pi(ya,n,r,"TestLoadImage: error",!1,t),r.onabort=Pi(ya,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=Pi(ya,n,r,"TestLoadImage: timeout",!1,t),Ei.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else so(2);e.H=0,e.h&&e.h.za(t),tc(e),Ba(e)}function tc(e){if(e.H=0,e.ma=[],e.h){const t=da(e.i);0==t.length&&0==e.j.length||(Mi(e.ma,t),Mi(e.ma,e.j),e.i.i.length=0,Li(e.j),e.j.length=0),e.h.ya()}}function nc(e,t,n){var r=n instanceof Fo?Uo(n):new Fo(n);if(""!=r.g)t&&(r.g=t+"."+r.g),jo(r,r.m);else{var i=Ei.location;r=i.protocol,t=t?t+"."+i.hostname:i.hostname,i=+i.port;var s=new Fo(null);r&&Vo(s,r),t&&(s.g=t),i&&jo(s,i),n&&(s.l=n),r=s}return n=e.F,t=e.Da,n&&t&&Bo(r,n,t),Bo(r,"VER",e.ra),Ga(e,r),r}function rc(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=e.Ha&&!e.va?new Ta(new va({ob:n})):new Ta(e.va)).Oa(e.J),t}function ic(){}function sc(){if(Wi&&!(10<=Number(ns)))throw Error("Environmental error: no available transport.")}function oc(e,t){xs.call(this),this.g=new Va(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.Ca&&(e?e["X-WebChannel-Client-Profile"]=t.Ca:e={"X-WebChannel-Client-Profile":t.Ca}),this.g.U=e,(e=t&&t.cc)&&!Vi(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!Vi(t)&&(this.g.F=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new lc(this)}function ac(e){go.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function cc(){yo.call(this),this.status=1}function lc(e){this.g=e}function uc(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function hc(e,t,n){n||(n=0);var r=Array(16);if("string"===typeof t)for(var i=0;16>i;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];var s=e.g[3],o=t+(s^n&(i^s))+r[0]+3614090360&4294967295;o=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=n+(o<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[1]+3905402710&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[2]+606105819&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[3]+3250441966&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[4]+4118548399&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[5]+1200080426&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[6]+2821735955&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[7]+4249261313&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[8]+1770035416&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[9]+2336552879&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[10]+4294925233&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[11]+2304563134&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[12]+1804603682&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[13]+4254626195&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[14]+2792965006&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[15]+1236535329&4294967295)<<22&4294967295|o>>>10))+((o=t+(i^s&(n^i))+r[1]+4129170786&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[6]+3225465664&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[11]+643717713&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[0]+3921069994&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[5]+3593408605&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[10]+38016083&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[15]+3634488961&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[4]+3889429448&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[9]+568446438&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[14]+3275163606&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[3]+4107603335&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[8]+1163531501&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[13]+2850285829&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[2]+4243563512&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[7]+1735328473&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[12]+2368359562&4294967295)<<20&4294967295|o>>>12))+((o=t+(n^i^s)+r[5]+4294588738&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[8]+2272392833&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[11]+1839030562&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[14]+4259657740&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[1]+2763975236&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[4]+1272893353&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[7]+4139469664&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[10]+3200236656&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[13]+681279174&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[0]+3936430074&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[3]+3572445317&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[6]+76029189&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[9]+3654602809&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[12]+3873151461&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[15]+530742520&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[2]+3299628645&4294967295)<<23&4294967295|o>>>9))+((o=t+(i^(n|~s))+r[0]+4096336452&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[7]+1126891415&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[14]+2878612391&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[5]+4237533241&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~s))+r[12]+1700485571&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[3]+2399980690&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[10]+4293915773&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[1]+2240044497&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~s))+r[8]+1873313359&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[15]+4264355552&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[6]+2734768916&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[13]+1309151649&4294967295)<<21&4294967295|o>>>11))+((s=(t=n+((o=t+(i^(n|~s))+r[4]+4149444226&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[11]+3174756917&4294967295)<<10&4294967295|o>>>22))^((i=s+((o=i+(t^(s|~n))+r[2]+718787259&4294967295)<<15&4294967295|o>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+s&4294967295}function dc(e,t){this.h=t;for(var n=[],r=!0,i=e.length-1;0<=i;i--){var s=0|e[i];r&&s==t||(n[i]=s,r=!1)}this.g=n}(wi=Ta.prototype).Oa=function(e){this.M=e},wi.ha=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+e);t=t?t.toUpperCase():"GET",this.I=e,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():po.g(),this.C=this.u?ho(this.u):ho(po),this.g.onreadystatechange=Ai(this.La,this);try{this.G=!0,this.g.open(t,String(e),!0),this.G=!1}catch(s){return void Na(this,s)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const e of r.keys())n.set(e,r.get(e))}r=Array.from(n.keys()).find((e=>"content-type"==e.toLowerCase())),i=Ei.FormData&&e instanceof Ei.FormData,!(0<=Di(xa,t))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[o,a]of n)this.g.setRequestHeader(o,a);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{Ra(this),0<this.B&&((this.L=function(e){return Wi&&"number"===typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Ai(this.ua,this)):this.A=Ks(this.ua,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(s){Na(this,s)}},wi.ua=function(){"undefined"!=typeof Si&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Ns(this,"timeout"),this.abort(8))},wi.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,Ns(this,"complete"),Ns(this,"abort"),Oa(this))},wi.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Oa(this,!0)),Ta.$.N.call(this)},wi.La=function(){this.s||(this.G||this.v||this.l?Pa(this):this.kb())},wi.kb=function(){Pa(this)},wi.isActive=function(){return!!this.g},wi.da=function(){try{return 2<Da(this)?this.g.status:-1}catch(fa){return-1}},wi.ja=function(){try{return this.g?this.g.responseText:""}catch(fa){return""}},wi.Wa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),Ia(t)}},wi.Ia=function(){return this.m},wi.Sa=function(){return"string"===typeof this.j?this.j:String(this.j)},(wi=Va.prototype).ra=8,wi.H=1,wi.Na=function(e){if(this.m)if(this.m=null,1==this.H){if(!e){this.W=Math.floor(1e5*Math.random()),e=this.W++;const i=new wo(this,this.l,e);let s=this.s;if(this.U&&(s?(s=us(s),ds(s,this.U)):s=this.U),null!==this.o||this.O||(i.I=s,s=null),this.P)e:{for(var t=0,n=0;n<this.j.length;n++){var r=this.j[n];if(void 0===(r="__data__"in r.map&&"string"===typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(t+=r)){t=n;break e}if(4096===t||n===this.j.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=Wa(this,i,t),Bo(n=Uo(this.I),"RID",e),Bo(n,"CVER",22),this.F&&Bo(n,"X-HTTP-Session-Id",this.F),Ga(this,n),s&&(this.O?t="headers="+encodeURIComponent(String(Ma(s)))+"&"+t:this.o&&Fa(n,this.o,s)),ua(this.i,i),this.bb&&Bo(n,"TYPE","init"),this.P?(Bo(n,"$req",t),Bo(n,"SID","null"),i.aa=!0,Io(i,n,null)):Io(i,n,t),this.H=2}}else 3==this.H&&(e?Ka(this,e):0==this.j.length||aa(this.i)||Ka(this))},wi.Ma=function(){if(this.u=null,$a(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var e=2*this.S;this.l.info("BP detection timer enabled: "+e),this.B=ao(Ai(this.jb,this),e)}},wi.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,so(10),za(this),$a(this))},wi.ib=function(){null!=this.v&&(this.v=null,za(this),Qa(this),so(19))},wi.pb=function(e){e?(this.l.info("Successfully pinged google.com"),so(2)):(this.l.info("Failed to ping google.com"),so(1))},wi.isActive=function(){return!!this.h&&this.h.isActive(this)},(wi=ic.prototype).Ba=function(){},wi.Aa=function(){},wi.za=function(){},wi.ya=function(){},wi.isActive=function(){return!0},wi.Va=function(){},sc.prototype.g=function(e,t){return new oc(e,t)},Oi(oc,xs),oc.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var e=this.g,t=this.l,n=this.h||void 0;so(0),e.Y=t,e.na=n||{},e.G=e.aa,e.I=nc(e,null,e.Y),qa(e)},oc.prototype.close=function(){ja(this.g)},oc.prototype.u=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.v&&((n={}).__data__=Ps(e),e=n);t.j.push(new ia(t.fb++,e)),3==t.H&&qa(t)},oc.prototype.N=function(){this.g.h=null,delete this.j,ja(this.g),delete this.g,oc.$.N.call(this)},Oi(ac,go),Oi(cc,yo),Oi(lc,ic),lc.prototype.Ba=function(){Ns(this.g,"a")},lc.prototype.Aa=function(e){Ns(this.g,new ac(e))},lc.prototype.za=function(e){Ns(this.g,new cc)},lc.prototype.ya=function(){Ns(this.g,"b")},Oi(uc,(function(){this.blockSize=-1})),uc.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},uc.prototype.j=function(e,t){void 0===t&&(t=e.length);for(var n=t-this.blockSize,r=this.m,i=this.h,s=0;s<t;){if(0==i)for(;s<=n;)hc(this,e,s),s+=this.blockSize;if("string"===typeof e){for(;s<t;)if(r[i++]=e.charCodeAt(s++),i==this.blockSize){hc(this,r),i=0;break}}else for(;s<t;)if(r[i++]=e[s++],i==this.blockSize){hc(this,r),i=0;break}}this.h=i,this.i+=t},uc.prototype.l=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.i;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.j(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};var fc={};function pc(e){return-128<=e&&128>e?function(e,t){var n=fc;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,(function(e){return new dc([0|e],0>e?-1:0)})):new dc([0|e],0>e?-1:0)}function mc(e){if(isNaN(e)||!isFinite(e))return yc;if(0>e)return Sc(mc(-e));for(var t=[],n=1,r=0;e>=n;r++)t[r]=e/n|0,n*=gc;return new dc(t,0)}var gc=4294967296,yc=pc(0),vc=pc(1),wc=pc(16777216);function bc(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function _c(e){return-1==e.h}function Sc(e){for(var t=e.g.length,n=[],r=0;r<t;r++)n[r]=~e.g[r];return new dc(n,~e.h).add(vc)}function Ec(e,t){return e.add(Sc(t))}function Ic(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function Tc(e,t){this.g=e,this.h=t}function kc(e,t){if(bc(t))throw Error("division by zero");if(bc(e))return new Tc(yc,yc);if(_c(e))return t=kc(Sc(e),t),new Tc(Sc(t.g),Sc(t.h));if(_c(t))return t=kc(e,Sc(t)),new Tc(Sc(t.g),t.h);if(30<e.g.length){if(_c(e)||_c(t))throw Error("slowDivide_ only works with positive integers.");for(var n=vc,r=t;0>=r.X(e);)n=Cc(n),r=Cc(r);var i=xc(n,1),s=xc(r,1);for(r=xc(r,2),n=xc(n,2);!bc(r);){var o=s.add(r);0>=o.X(e)&&(i=i.add(n),s=o),r=xc(r,1),n=xc(n,1)}return t=Ec(e,i.R(t)),new Tc(i,t)}for(i=yc;0<=e.X(t);){for(n=Math.max(1,Math.floor(e.ea()/t.ea())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),o=(s=mc(n)).R(t);_c(o)||0<o.X(e);)o=(s=mc(n-=r)).R(t);bc(s)&&(s=vc),i=i.add(s),e=Ec(e,o)}return new Tc(i,e)}function Cc(e){for(var t=e.g.length+1,n=[],r=0;r<t;r++)n[r]=e.D(r)<<1|e.D(r-1)>>>31;return new dc(n,e.h)}function xc(e,t){var n=t>>5;t%=32;for(var r=e.g.length-n,i=[],s=0;s<r;s++)i[s]=0<t?e.D(s+n)>>>t|e.D(s+n+1)<<32-t:e.D(s+n);return new dc(i,e.h)}(wi=dc.prototype).ea=function(){if(_c(this))return-Sc(this).ea();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.D(n);e+=(0<=r?r:gc+r)*t,t*=gc}return e},wi.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(bc(this))return"0";if(_c(this))return"-"+Sc(this).toString(e);for(var t=mc(Math.pow(e,6)),n=this,r="";;){var i=kc(n,t).g,s=((0<(n=Ec(n,i.R(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(bc(n=i))return s+r;for(;6>s.length;)s="0"+s;r=s+r}},wi.D=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},wi.X=function(e){return _c(e=Ec(this,e))?-1:bc(e)?0:1},wi.abs=function(){return _c(this)?Sc(this):this},wi.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0,i=0;i<=t;i++){var s=r+(65535&this.D(i))+(65535&e.D(i)),o=(s>>>16)+(this.D(i)>>>16)+(e.D(i)>>>16);r=o>>>16,s&=65535,o&=65535,n[i]=o<<16|s}return new dc(n,-2147483648&n[n.length-1]?-1:0)},wi.R=function(e){if(bc(this)||bc(e))return yc;if(_c(this))return _c(e)?Sc(this).R(Sc(e)):Sc(Sc(this).R(e));if(_c(e))return Sc(this.R(Sc(e)));if(0>this.X(wc)&&0>e.X(wc))return mc(this.ea()*e.ea());for(var t=this.g.length+e.g.length,n=[],r=0;r<2*t;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<e.g.length;i++){var s=this.D(r)>>>16,o=65535&this.D(r),a=e.D(i)>>>16,c=65535&e.D(i);n[2*r+2*i]+=o*c,Ic(n,2*r+2*i),n[2*r+2*i+1]+=s*c,Ic(n,2*r+2*i+1),n[2*r+2*i+1]+=o*a,Ic(n,2*r+2*i+1),n[2*r+2*i+2]+=s*a,Ic(n,2*r+2*i+2)}for(r=0;r<t;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=t;r<2*t;r++)n[r]=0;return new dc(n,0)},wi.gb=function(e){return kc(this,e).h},wi.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)&e.D(r);return new dc(n,this.h&e.h)},wi.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)|e.D(r);return new dc(n,this.h|e.h)},wi.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)^e.D(r);return new dc(n,this.h^e.h)},sc.prototype.createWebChannel=sc.prototype.g,oc.prototype.send=oc.prototype.u,oc.prototype.open=oc.prototype.m,oc.prototype.close=oc.prototype.close,co.NO_ERROR=0,co.TIMEOUT=8,co.HTTP_ERROR=6,lo.COMPLETE="complete",fo.EventType=mo,mo.OPEN="a",mo.CLOSE="b",mo.ERROR="c",mo.MESSAGE="d",xs.prototype.listen=xs.prototype.O,Ta.prototype.listenOnce=Ta.prototype.P,Ta.prototype.getLastError=Ta.prototype.Sa,Ta.prototype.getLastErrorCode=Ta.prototype.Ia,Ta.prototype.getStatus=Ta.prototype.da,Ta.prototype.getResponseJson=Ta.prototype.Wa,Ta.prototype.getResponseText=Ta.prototype.ja,Ta.prototype.send=Ta.prototype.ha,Ta.prototype.setWithCredentials=Ta.prototype.Oa,uc.prototype.digest=uc.prototype.l,uc.prototype.reset=uc.prototype.reset,uc.prototype.update=uc.prototype.j,dc.prototype.add=dc.prototype.add,dc.prototype.multiply=dc.prototype.R,dc.prototype.modulo=dc.prototype.gb,dc.prototype.compare=dc.prototype.X,dc.prototype.toNumber=dc.prototype.ea,dc.prototype.toString=dc.prototype.toString,dc.prototype.getBits=dc.prototype.D,dc.fromNumber=mc,dc.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return Sc(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=mc(Math.pow(n,8)),i=yc,s=0;s<t.length;s+=8){var o=Math.min(8,t.length-s),a=parseInt(t.substring(s,s+o),n);8>o?(o=mc(Math.pow(n,o)),i=i.R(o).add(mc(a))):i=(i=i.R(r)).add(mc(a))}return i};var Nc=_i.createWebChannelTransport=function(){return new sc},Ac=_i.getStatEventTarget=function(){return to()},Pc=_i.ErrorCode=co,Oc=_i.EventType=lo,Rc=_i.Event=Zs,Dc=_i.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},Lc=(_i.FetchXmlHttpFactory=va,_i.WebChannel=fo),Mc=_i.XhrIo=Ta,Fc=_i.Md5=uc,Uc=_i.Integer=dc;const Vc="@firebase/firestore";class jc{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}jc.UNAUTHENTICATED=new jc(null),jc.GOOGLE_CREDENTIALS=new jc("google-credentials-uid"),jc.FIRST_PARTY=new jc("first-party-uid"),jc.MOCK_USER=new jc("mock-user");let zc="10.9.0";const Bc=new pr("@firebase/firestore");function qc(){return Bc.logLevel}function Kc(e){if(Bc.logLevel<=lr.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(Hc);Bc.debug("Firestore (".concat(zc,"): ").concat(e),...i)}}function Gc(e){if(Bc.logLevel<=lr.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(Hc);Bc.error("Firestore (".concat(zc,"): ").concat(e),...i)}}function Wc(e){if(Bc.logLevel<=lr.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(Hc);Bc.warn("Firestore (".concat(zc,"): ").concat(e),...i)}}function Hc(e){if("string"==typeof e)return e;try{return function(e){return JSON.stringify(e)}(e)}catch(t){return e}}function Qc(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state";const t="FIRESTORE (".concat(zc,") INTERNAL ASSERTION FAILED: ")+e;throw Gc(t),new Error(t)}function Yc(e,t){e||Qc()}function $c(e,t){return e}const Jc={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Xc extends Gn{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>"".concat(this.name,": [code=").concat(this.code,"]: ").concat(this.message)}}class Zc{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class el{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(e))}}class tl{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(jc.UNAUTHENTICATED)))}shutdown(){}}class nl{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class rl{constructor(e){this.t=e,this.currentUser=jc.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){let n=this.i;const r=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let i=new Zc;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Zc,e.enqueueRetryable((()=>r(this.currentUser)))};const s=()=>{const t=i;e.enqueueRetryable((async()=>{await t.promise,await r(this.currentUser)}))},o=e=>{Kc("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.auth.addAuthTokenListener(this.o),s()};this.t.onInit((e=>o(e))),setTimeout((()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?o(e):(Kc("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Zc)}}),0),s()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((t=>this.i!==e?(Kc("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(Yc("string"==typeof t.accessToken),new el(t.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Yc(null===e||"string"==typeof e),new jc(e)}}class il{constructor(e,t,n){this.l=e,this.h=t,this.P=n,this.type="FirstParty",this.user=jc.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class sl{constructor(e,t,n){this.l=e,this.h=t,this.P=n}getToken(){return Promise.resolve(new il(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable((()=>t(jc.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class ol{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class al{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){const n=e=>{null!=e.error&&Kc("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));const n=e.token!==this.R;return this.R=e.token,Kc("FirebaseAppCheckTokenProvider","Received ".concat(n?"new":"existing"," token.")),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable((()=>n(t)))};const r=e=>{Kc("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.appCheck.addTokenListener(this.o)};this.A.onInit((e=>r(e))),setTimeout((()=>{if(!this.appCheck){const e=this.A.getImmediate({optional:!0});e?r(e):Kc("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((e=>e?(Yc("string"==typeof e.token),this.R=e.token,new ol(e.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function cl(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}class ll{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(256/62);let n="";for(;n.length<20;){const r=cl(40);for(let i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%62))}return n}}function ul(e,t){return e<t?-1:e>t?1:0}function hl(e,t,n){return e.length===t.length&&e.every(((e,r)=>n(e,t[r])))}function dl(e){return e+"\0"}class fl{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Xc(Jc.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Xc(Jc.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Xc(Jc.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Xc(Jc.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return fl.fromMillis(Date.now())}static fromDate(e){return fl.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*t));return new fl(t,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ul(this.nanoseconds,e.nanoseconds):ul(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class pl{constructor(e){this.timestamp=e}static fromTimestamp(e){return new pl(e)}static min(){return new pl(new fl(0,0))}static max(){return new pl(new fl(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class ml{constructor(e,t,n){void 0===t?t=0:t>e.length&&Qc(),void 0===n?n=e.length-t:n>e.length-t&&Qc(),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===ml.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof ml?e.forEach((e=>{t.push(e)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=e.get(r),i=t.get(r);if(n<i)return-1;if(n>i)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class gl extends ml{construct(e,t,n){return new gl(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(){const e=[];for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n){if(i.indexOf("//")>=0)throw new Xc(Jc.INVALID_ARGUMENT,"Invalid segment (".concat(i,"). Paths must not contain // in them."));e.push(...i.split("/").filter((e=>e.length>0)))}return new gl(e)}static emptyPath(){return new gl([])}}const yl=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class vl extends ml{construct(e,t,n){return new vl(e,t,n)}static isValidIdentifier(e){return yl.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),vl.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new vl(["__name__"])}static fromServerFormat(e){const t=[];let n="",r=0;const i=()=>{if(0===n.length)throw new Xc(Jc.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(n),n=""};let s=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new Xc(Jc.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new Xc(Jc.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(s=!s,r++):"."!==t||s?(n+=t,r++):(i(),r++)}if(i(),s)throw new Xc(Jc.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new vl(t)}static emptyPath(){return new vl([])}}class wl{constructor(e){this.path=e}static fromPath(e){return new wl(gl.fromString(e))}static fromName(e){return new wl(gl.fromString(e).popFirst(5))}static empty(){return new wl(gl.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===gl.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return gl.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new wl(new gl(e.slice()))}}class bl{constructor(e,t,n,r){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=r}}function _l(e){return e.fields.find((e=>2===e.kind))}function Sl(e){return e.fields.filter((e=>2!==e.kind))}bl.UNKNOWN_ID=-1;class El{constructor(e,t){this.fieldPath=e,this.kind=t}}class Il{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Il(0,Cl.min())}}function Tl(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=pl.fromTimestamp(1e9===r?new fl(n+1,0):new fl(n,r));return new Cl(i,wl.empty(),t)}function kl(e){return new Cl(e.readTime,e.key,-1)}class Cl{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new Cl(pl.min(),wl.empty(),-1)}static max(){return new Cl(pl.max(),wl.empty(),-1)}}function xl(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=wl.comparator(e.documentKey,t.documentKey),0!==n?n:ul(e.largestBatchId,t.largestBatchId))}const Nl="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Al{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function Pl(e){if(e.code!==Jc.FAILED_PRECONDITION||e.message!==Nl)throw e;Kc("LocalStore","Unexpectedly lost primary lease")}class Ol{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)}),(e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Qc(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Ol(((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof Ol?t:Ol.resolve(t)}catch(e){return Ol.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):Ol.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):Ol.reject(t)}static resolve(e){return new Ol(((t,n)=>{t(e)}))}static reject(e){return new Ol(((t,n)=>{n(e)}))}static waitFor(e){return new Ol(((t,n)=>{let r=0,i=0,s=!1;e.forEach((e=>{++r,e.next((()=>{++i,s&&i===r&&t()}),(e=>n(e)))})),s=!0,i===r&&t()}))}static or(e){let t=Ol.resolve(!1);for(const n of e)t=t.next((e=>e?Ol.resolve(e):n()));return t}static forEach(e,t){const n=[];return e.forEach(((e,r)=>{n.push(t.call(this,e,r))})),this.waitFor(n)}static mapArray(e,t){return new Ol(((n,r)=>{const i=e.length,s=new Array(i);let o=0;for(let a=0;a<i;a++){const c=a;t(e[c]).next((e=>{s[c]=e,++o,o===i&&n(s)}),(e=>r(e)))}}))}static doWhile(e,t){return new Ol(((n,r)=>{const i=()=>{!0===e()?t().next((()=>{i()}),r):n()};i()}))}}class Rl{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.V=new Zc,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{t.error?this.V.reject(new Ml(e,t.error)):this.V.resolve()},this.transaction.onerror=t=>{const n=zl(t.target.error);this.V.reject(new Ml(e,n))}}static open(e,t,n,r){try{return new Rl(t,e.transaction(r,n))}catch(e){throw new Ml(t,e)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(Kc("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new Ul(t)}}class Dl{constructor(e,t,n){this.name=e,this.version=t,this.p=n,12.2===Dl.S(Un())&&Gc("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Kc("SimpleDb","Removing database:",e),Vl(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!Kn())return!1;if(Dl.C())return!0;const e=Un(),t=Dl.S(e),n=0<t&&t<10,r=Dl.v(e),i=0<r&&r<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||n||i)}static C(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.__PRIVATE_env)||void 0===e?void 0:e.F)}static M(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}static v(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}async O(e){return this.db||(Kc("SimpleDb","Opening database:",this.name),this.db=await new Promise(((t,n)=>{const r=indexedDB.open(this.name,this.version);r.onsuccess=e=>{const n=e.target.result;t(n)},r.onblocked=()=>{n(new Ml(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},r.onerror=t=>{const r=t.target.error;"VersionError"===r.name?n(new Xc(Jc.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===r.name?n(new Xc(Jc.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+r)):n(new Ml(e,r))},r.onupgradeneeded=e=>{Kc("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',e.oldVersion);const t=e.target.result;this.p.N(t,r.transaction,e.oldVersion,this.version).next((()=>{Kc("SimpleDb","Database upgrade to version "+this.version+" complete")}))}}))),this.L&&(this.db.onversionchange=e=>this.L(e)),this.db}B(e){this.L=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,n,r){const i="readonly"===t;let s=0;for(;;){++s;try{this.db=await this.O(e);const t=Rl.open(this.db,e,i?"readonly":"readwrite",n),s=r(t).next((e=>(t.g(),e))).catch((e=>(t.abort(e),Ol.reject(e)))).toPromise();return s.catch((()=>{})),await t.m,s}catch(e){const t=e,n="FirebaseError"!==t.name&&s<3;if(Kc("SimpleDb","Transaction failed with error:",t.message,"Retrying:",n),this.close(),!n)return Promise.reject(t)}}}close(){this.db&&this.db.close(),this.db=void 0}}class Ll{constructor(e){this.k=e,this.q=!1,this.K=null}get isDone(){return this.q}get $(){return this.K}set cursor(e){this.k=e}done(){this.q=!0}U(e){this.K=e}delete(){return Vl(this.k.delete())}}class Ml extends Xc{constructor(e,t){super(Jc.UNAVAILABLE,"IndexedDB transaction '".concat(e,"' failed: ").concat(t)),this.name="IndexedDbTransactionError"}}function Fl(e){return"IndexedDbTransactionError"===e.name}class Ul{constructor(e){this.store=e}put(e,t){let n;return void 0!==t?(Kc("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(Kc("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),Vl(n)}add(e){return Kc("SimpleDb","ADD",this.store.name,e,e),Vl(this.store.add(e))}get(e){return Vl(this.store.get(e)).next((t=>(void 0===t&&(t=null),Kc("SimpleDb","GET",this.store.name,e,t),t)))}delete(e){return Kc("SimpleDb","DELETE",this.store.name,e),Vl(this.store.delete(e))}count(){return Kc("SimpleDb","COUNT",this.store.name),Vl(this.store.count())}W(e,t){const n=this.options(e,t),r=n.index?this.store.index(n.index):this.store;if("function"==typeof r.getAll){const e=r.getAll(n.range);return new Ol(((t,n)=>{e.onerror=e=>{n(e.target.error)},e.onsuccess=e=>{t(e.target.result)}}))}{const e=this.cursor(n),t=[];return this.G(e,((e,n)=>{t.push(n)})).next((()=>t))}}j(e,t){const n=this.store.getAll(e,null===t?void 0:t);return new Ol(((e,t)=>{n.onerror=e=>{t(e.target.error)},n.onsuccess=t=>{e(t.target.result)}}))}H(e,t){Kc("SimpleDb","DELETE ALL",this.store.name);const n=this.options(e,t);n.J=!1;const r=this.cursor(n);return this.G(r,((e,t,n)=>n.delete()))}Y(e,t){let n;t?n=e:(n={},t=e);const r=this.cursor(n);return this.G(r,t)}Z(e){const t=this.cursor({});return new Ol(((n,r)=>{t.onerror=e=>{const t=zl(e.target.error);r(t)},t.onsuccess=t=>{const r=t.target.result;r?e(r.primaryKey,r.value).next((e=>{e?r.continue():n()})):n()}}))}G(e,t){const n=[];return new Ol(((r,i)=>{e.onerror=e=>{i(e.target.error)},e.onsuccess=e=>{const i=e.target.result;if(!i)return void r();const s=new Ll(i),o=t(i.primaryKey,i.value,s);if(o instanceof Ol){const e=o.catch((e=>(s.done(),Ol.reject(e))));n.push(e)}s.isDone?r():null===s.$?i.continue():i.continue(s.$)}})).next((()=>Ol.waitFor(n)))}options(e,t){let n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const n=this.store.index(e.index);return e.J?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Vl(e){return new Ol(((t,n)=>{e.onsuccess=e=>{const n=e.target.result;t(n)},e.onerror=e=>{const t=zl(e.target.error);n(t)}}))}let jl=!1;function zl(e){const t=Dl.S(Un());if(t>=12.2&&t<13){const t="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(t)>=0){const e=new Xc("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '".concat(t,"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround."));return jl||(jl=!0,setTimeout((()=>{throw e}),0)),e}}return e}class Bl{constructor(e,t){this.asyncQueue=e,this.X=t,this.task=null}start(){this.ee(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}ee(e){Kc("IndexBackfiller","Scheduled in ".concat(e,"ms")),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{Kc("IndexBackfiller","Documents written: ".concat(await this.X.te()))}catch(e){Fl(e)?Kc("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",e):await Pl(e)}await this.ee(6e4)}))}}class ql{constructor(e,t){this.localStore=e,this.persistence=t}async te(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50;return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(t=>this.ne(t,e)))}ne(e,t){const n=new Set;let r=t,i=!0;return Ol.doWhile((()=>!0===i&&r>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((t=>{if(null!==t&&!n.has(t))return Kc("IndexBackfiller","Processing collection: ".concat(t)),this.re(e,t,r).next((e=>{r-=e,n.add(t)}));i=!1})))).next((()=>t-r))}re(e,t,n){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((r=>this.localStore.localDocuments.getNextDocuments(e,t,r,n).next((n=>{const i=n.changes;return this.localStore.indexManager.updateIndexEntries(e,i).next((()=>this.ie(r,n))).next((n=>(Kc("IndexBackfiller","Updating offset: ".concat(n)),this.localStore.indexManager.updateCollectionGroup(e,t,n)))).next((()=>i.size))}))))}ie(e,t){let n=e;return t.changes.forEach(((e,t)=>{const r=kl(t);xl(r,n)>0&&(n=r)})),new Cl(n.readTime,n.documentKey,Math.max(t.batchId,e.largestBatchId))}}class Kl{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.se(e),this.oe=e=>t.writeSequenceNumber(e))}se(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.oe&&this.oe(e),e}}function Gl(e){return null==e}function Wl(e){return 0===e&&1/e==-1/0}function Hl(e){return"number"==typeof e&&Number.isInteger(e)&&!Wl(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}function Ql(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=$l(t)),t=Yl(e.get(n),t);return $l(t)}function Yl(e,t){let n=t;const r=e.length;for(let i=0;i<r;i++){const t=e.charAt(i);switch(t){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=t}}return n}function $l(e){return e+"\x01\x01"}function Jl(e){const t=e.length;if(Yc(t>=2),2===t)return Yc("\x01"===e.charAt(0)&&"\x01"===e.charAt(1)),gl.emptyPath();const n=t-2,r=[];let i="";for(let s=0;s<t;){const t=e.indexOf("\x01",s);switch((t<0||t>n)&&Qc(),e.charAt(t+1)){case"\x01":const n=e.substring(s,t);let o;0===i.length?o=n:(i+=n,o=i,i=""),r.push(o);break;case"\x10":i+=e.substring(s,t),i+="\0";break;case"\x11":i+=e.substring(s,t+1);break;default:Qc()}s=t+2}return new gl(r)}Kl._e=-1;const Xl=["userId","batchId"];function Zl(e,t){return[e,Ql(t)]}function eu(e,t,n){return[e,Ql(t),n]}const tu={},nu=["prefixPath","collectionGroup","readTime","documentId"],ru=["prefixPath","collectionGroup","documentId"],iu=["collectionGroup","readTime","prefixPath","documentId"],su=["canonicalId","targetId"],ou=["targetId","path"],au=["path","targetId"],cu=["collectionId","parent"],lu=["indexId","uid"],uu=["uid","sequenceNumber"],hu=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],du=["indexId","uid","orderedDocumentKey"],fu=["userId","collectionPath","documentId"],pu=["userId","collectionPath","largestBatchId"],mu=["userId","collectionGroup","largestBatchId"],gu=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],yu=[...gu,"documentOverlays"],vu=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],wu=vu,bu=[...wu,"indexConfiguration","indexState","indexEntries"];class _u extends Al{constructor(e,t){super(),this.ae=e,this.currentSequenceNumber=t}}function Su(e,t){const n=$c(e);return Dl.M(n.ae,t)}function Eu(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Iu(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function Tu(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class ku{constructor(e,t){this.comparator=e,this.root=t||xu.EMPTY}insert(e,t){return new ku(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,xu.BLACK,null,null))}remove(e){return new ku(this.comparator,this.root.remove(e,this.comparator).copy(null,null,xu.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,n)=>(e(t,n),!1)))}toString(){const e=[];return this.inorderTraversal(((t,n)=>(e.push("".concat(t,":").concat(n)),!1))),"{".concat(e.join(", "),"}")}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Cu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Cu(this.root,e,this.comparator,!1)}getReverseIterator(){return new Cu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Cu(this.root,e,this.comparator,!0)}}class Cu{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?n(e.key,t):1,t&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class xu{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:xu.RED,this.left=null!=r?r:xu.EMPTY,this.right=null!=i?i:xu.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,i){return new xu(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return xu.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return xu.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,xu.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,xu.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Qc();if(this.right.isRed())throw Qc();const e=this.left.check();if(e!==this.right.check())throw Qc();return e+(this.isRed()?0:1)}}xu.EMPTY=null,xu.RED=!0,xu.BLACK=!1,xu.EMPTY=new class{constructor(){this.size=0}get key(){throw Qc()}get value(){throw Qc()}get color(){throw Qc()}get left(){throw Qc()}get right(){throw Qc()}copy(e,t,n,r,i){return this}insert(e,t,n){return new xu(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Nu{constructor(e){this.comparator=e,this.data=new ku(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,n)=>(e(t),!1)))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Au(this.data.getIterator())}getIteratorFrom(e){return new Au(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((e=>{t=t.add(e)})),t}isEqual(e){if(!(e instanceof Nu))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Nu(this.comparator);return t.data=e,t}}class Au{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Pu(e){return e.hasNext()?e.getNext():void 0}class Ou{constructor(e){this.fields=e,e.sort(vl.comparator)}static empty(){return new Ou([])}unionWith(e){let t=new Nu(vl.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new Ou(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return hl(this.fields,e.fields,((e,t)=>e.isEqual(t)))}}class Ru extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Du{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new Ru("Invalid base64 string: "+e):e}}(e);return new Du(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new Du(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ul(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Du.EMPTY_BYTE_STRING=new Du("");const Lu=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Mu(e){if(Yc(!!e),"string"==typeof e){let t=0;const n=Lu.exec(e);if(Yc(!!n),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:Fu(e.seconds),nanos:Fu(e.nanos)}}function Fu(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function Uu(e){return"string"==typeof e?Du.fromBase64String(e):Du.fromUint8Array(e)}function Vu(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function ju(e){const t=e.mapValue.fields.__previous_value__;return Vu(t)?ju(t):t}function zu(e){const t=Mu(e.mapValue.fields.__local_write_time__.timestampValue);return new fl(t.seconds,t.nanos)}class Bu{constructor(e,t,n,r,i,s,o,a,c){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=s,this.autoDetectLongPolling=o,this.longPollingOptions=a,this.useFetchStreams=c}}class qu{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new qu("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof qu&&e.projectId===this.projectId&&e.database===this.database}}const Ku={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Gu={nullValue:"NULL_VALUE"};function Wu(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Vu(e)?4:oh(e)?9007199254740991:10:Qc()}function Hu(e,t){if(e===t)return!0;const n=Wu(e);if(n!==Wu(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return zu(e).isEqual(zu(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=Mu(e.timestampValue),r=Mu(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return Uu(e.bytesValue).isEqual(Uu(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return Fu(e.geoPointValue.latitude)===Fu(t.geoPointValue.latitude)&&Fu(e.geoPointValue.longitude)===Fu(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return Fu(e.integerValue)===Fu(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=Fu(e.doubleValue),r=Fu(t.doubleValue);return n===r?Wl(n)===Wl(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return hl(e.arrayValue.values||[],t.arrayValue.values||[],Hu);case 10:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(Eu(n)!==Eu(r))return!1;for(const i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!Hu(n[i],r[i])))return!1;return!0}(e,t);default:return Qc()}}function Qu(e,t){return void 0!==(e.values||[]).find((e=>Hu(e,t)))}function Yu(e,t){if(e===t)return 0;const n=Wu(e),r=Wu(t);if(n!==r)return ul(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ul(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=Fu(e.integerValue||e.doubleValue),r=Fu(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return $u(e.timestampValue,t.timestampValue);case 4:return $u(zu(e),zu(t));case 5:return ul(e.stringValue,t.stringValue);case 6:return function(e,t){const n=Uu(e),r=Uu(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let i=0;i<n.length&&i<r.length;i++){const e=ul(n[i],r[i]);if(0!==e)return e}return ul(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=ul(Fu(e.latitude),Fu(t.latitude));return 0!==n?n:ul(Fu(e.longitude),Fu(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){const n=e.values||[],r=t.values||[];for(let i=0;i<n.length&&i<r.length;++i){const e=Yu(n[i],r[i]);if(e)return e}return ul(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===Ku.mapValue&&t===Ku.mapValue)return 0;if(e===Ku.mapValue)return 1;if(t===Ku.mapValue)return-1;const n=e.fields||{},r=Object.keys(n),i=t.fields||{},s=Object.keys(i);r.sort(),s.sort();for(let o=0;o<r.length&&o<s.length;++o){const e=ul(r[o],s[o]);if(0!==e)return e;const t=Yu(n[r[o]],i[s[o]]);if(0!==t)return t}return ul(r.length,s.length)}(e.mapValue,t.mapValue);default:throw Qc()}}function $u(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return ul(e,t);const n=Mu(e),r=Mu(t),i=ul(n.seconds,r.seconds);return 0!==i?i:ul(n.nanos,r.nanos)}function Ju(e){return Xu(e)}function Xu(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=Mu(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(e){return Uu(e).toBase64()}(e.bytesValue):"referenceValue"in e?function(e){return wl.fromName(e).toString()}(e.referenceValue):"geoPointValue"in e?function(e){return"geo(".concat(e.latitude,",").concat(e.longitude,")")}(e.geoPointValue):"arrayValue"in e?function(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=Xu(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const i of t)r?r=!1:n+=",",n+="".concat(i,":").concat(Xu(e.fields[i]));return n+"}"}(e.mapValue):Qc()}function Zu(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function eh(e){return!!e&&"integerValue"in e}function th(e){return!!e&&"arrayValue"in e}function nh(e){return!!e&&"nullValue"in e}function rh(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function ih(e){return!!e&&"mapValue"in e}function sh(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return Iu(e.mapValue.fields,((e,n)=>t.mapValue.fields[e]=sh(n))),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=sh(e.arrayValue.values[n]);return t}return Object.assign({},e)}function oh(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}function ah(e){return"nullValue"in e?Gu:"booleanValue"in e?{booleanValue:!1}:"integerValue"in e||"doubleValue"in e?{doubleValue:NaN}:"timestampValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in e?{stringValue:""}:"bytesValue"in e?{bytesValue:""}:"referenceValue"in e?Zu(qu.empty(),wl.empty()):"geoPointValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in e?{arrayValue:{}}:"mapValue"in e?{mapValue:{}}:Qc()}function ch(e){return"nullValue"in e?{booleanValue:!1}:"booleanValue"in e?{doubleValue:NaN}:"integerValue"in e||"doubleValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in e?{stringValue:""}:"stringValue"in e?{bytesValue:""}:"bytesValue"in e?Zu(qu.empty(),wl.empty()):"referenceValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in e?{arrayValue:{}}:"arrayValue"in e?{mapValue:{}}:"mapValue"in e?Ku:Qc()}function lh(e,t){const n=Yu(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?-1:!e.inclusive&&t.inclusive?1:0}function uh(e,t){const n=Yu(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?1:!e.inclusive&&t.inclusive?-1:0}class hh{constructor(e){this.value=e}static empty(){return new hh({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!ih(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=sh(t)}setAll(e){let t=vl.emptyPath(),n={},r=[];e.forEach(((e,i)=>{if(!t.isImmediateParentOf(i)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=i.popLast()}e?n[i.lastSegment()]=sh(e):r.push(i.lastSegment())}));const i=this.getFieldsMap(t);this.applyChanges(i,n,r)}delete(e){const t=this.field(e.popLast());ih(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Hu(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];ih(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){Iu(t,((t,n)=>e[t]=n));for(const r of n)delete e[r]}clone(){return new hh(sh(this.value))}}function dh(e){const t=[];return Iu(e.fields,((e,n)=>{const r=new vl([e]);if(ih(n)){const e=dh(n.mapValue).fields;if(0===e.length)t.push(r);else for(const n of e)t.push(r.child(n))}else t.push(r)})),new Ou(t)}class fh{constructor(e,t,n,r,i,s,o){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=i,this.data=s,this.documentState=o}static newInvalidDocument(e){return new fh(e,0,pl.min(),pl.min(),pl.min(),hh.empty(),0)}static newFoundDocument(e,t,n,r){return new fh(e,1,t,pl.min(),n,r,0)}static newNoDocument(e,t){return new fh(e,2,t,pl.min(),pl.min(),hh.empty(),0)}static newUnknownDocument(e,t){return new fh(e,3,t,pl.min(),pl.min(),hh.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(pl.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=hh.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=hh.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=pl.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof fh&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new fh(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}class ph{constructor(e,t){this.position=e,this.inclusive=t}}function mh(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const s=t[i],o=e.position[i];if(r=s.field.isKeyField()?wl.comparator(wl.fromName(o.referenceValue),n.key):Yu(o,n.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function gh(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!Hu(e.position[n],t.position[n]))return!1;return!0}class yh{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";this.field=e,this.dir=t}}function vh(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}class wh{}class bh extends wh{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new Ah(e,t,n):"array-contains"===t?new Dh(e,n):"in"===t?new Lh(e,n):"not-in"===t?new Mh(e,n):"array-contains-any"===t?new Fh(e,n):new bh(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new Ph(e,n):new Oh(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(Yu(t,this.value)):null!==t&&Wu(this.value)===Wu(t)&&this.matchesComparison(Yu(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Qc()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class _h extends wh{constructor(e,t){super(),this.filters=e,this.op=t,this.ue=null}static create(e,t){return new _h(e,t)}matches(e){return Sh(this)?void 0===this.filters.find((t=>!t.matches(e))):void 0!==this.filters.find((t=>t.matches(e)))}getFlattenedFilters(){return null!==this.ue||(this.ue=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.ue}getFilters(){return Object.assign([],this.filters)}}function Sh(e){return"and"===e.op}function Eh(e){return"or"===e.op}function Ih(e){return Th(e)&&Sh(e)}function Th(e){for(const t of e.filters)if(t instanceof _h)return!1;return!0}function kh(e){if(e instanceof bh)return e.field.canonicalString()+e.op.toString()+Ju(e.value);if(Ih(e))return e.filters.map((e=>kh(e))).join(",");{const t=e.filters.map((e=>kh(e))).join(",");return"".concat(e.op,"(").concat(t,")")}}function Ch(e,t){return e instanceof bh?function(e,t){return t instanceof bh&&e.op===t.op&&e.field.isEqual(t.field)&&Hu(e.value,t.value)}(e,t):e instanceof _h?function(e,t){return t instanceof _h&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce(((e,n,r)=>e&&Ch(n,t.filters[r])),!0)}(e,t):void Qc()}function xh(e,t){const n=e.filters.concat(t);return _h.create(n,e.op)}function Nh(e){return e instanceof bh?function(e){return"".concat(e.field.canonicalString()," ").concat(e.op," ").concat(Ju(e.value))}(e):e instanceof _h?function(e){return e.op.toString()+" {"+e.getFilters().map(Nh).join(" ,")+"}"}(e):"Filter"}class Ah extends bh{constructor(e,t,n){super(e,t,n),this.key=wl.fromName(n.referenceValue)}matches(e){const t=wl.comparator(e.key,this.key);return this.matchesComparison(t)}}class Ph extends bh{constructor(e,t){super(e,"in",t),this.keys=Rh("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class Oh extends bh{constructor(e,t){super(e,"not-in",t),this.keys=Rh("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function Rh(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((e=>wl.fromName(e.referenceValue)))}class Dh extends bh{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return th(t)&&Qu(t.arrayValue,this.value)}}class Lh extends bh{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Qu(this.value.arrayValue,t)}}class Mh extends bh{constructor(e,t){super(e,"not-in",t)}matches(e){if(Qu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Qu(this.value.arrayValue,t)}}class Fh extends bh{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!th(t)||!t.arrayValue.values)&&t.arrayValue.values.some((e=>Qu(this.value.arrayValue,e)))}}class Uh{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=s,this.endAt=o,this.ce=null}}function Vh(e){return new Uh(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function jh(e){const t=$c(e);if(null===t.ce){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map((e=>kh(e))).join(","),e+="|ob:",e+=t.orderBy.map((e=>function(e){return e.field.canonicalString()+e.dir}(e))).join(","),Gl(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map((e=>Ju(e))).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map((e=>Ju(e))).join(",")),t.ce=e}return t.ce}function zh(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!vh(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!Ch(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!gh(e.startAt,t.startAt)&&gh(e.endAt,t.endAt)}function Bh(e){return wl.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}function qh(e,t){return e.filters.filter((e=>e instanceof bh&&e.field.isEqual(t)))}function Kh(e,t,n){let r=Gu,i=!0;for(const s of qh(e,t)){let e=Gu,t=!0;switch(s.op){case"<":case"<=":e=ah(s.value);break;case"==":case"in":case">=":e=s.value;break;case">":e=s.value,t=!1;break;case"!=":case"not-in":e=Gu}lh({value:r,inclusive:i},{value:e,inclusive:t})<0&&(r=e,i=t)}if(null!==n)for(let s=0;s<e.orderBy.length;++s)if(e.orderBy[s].field.isEqual(t)){const e=n.position[s];lh({value:r,inclusive:i},{value:e,inclusive:n.inclusive})<0&&(r=e,i=n.inclusive);break}return{value:r,inclusive:i}}function Gh(e,t,n){let r=Ku,i=!0;for(const s of qh(e,t)){let e=Ku,t=!0;switch(s.op){case">=":case">":e=ch(s.value),t=!1;break;case"==":case"in":case"<=":e=s.value;break;case"<":e=s.value,t=!1;break;case"!=":case"not-in":e=Ku}uh({value:r,inclusive:i},{value:e,inclusive:t})>0&&(r=e,i=t)}if(null!==n)for(let s=0;s<e.orderBy.length;++s)if(e.orderBy[s].field.isEqual(t)){const e=n.position[s];uh({value:r,inclusive:i},{value:e,inclusive:n.inclusive})>0&&(r=e,i=n.inclusive);break}return{value:r,inclusive:i}}class Wh{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=s,this.startAt=o,this.endAt=a,this.le=null,this.he=null,this.Pe=null,this.startAt,this.endAt}}function Hh(e,t,n,r,i,s,o,a){return new Wh(e,t,n,r,i,s,o,a)}function Qh(e){return new Wh(e)}function Yh(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function $h(e){return null!==e.collectionGroup}function Jh(e){const t=$c(e);if(null===t.le){t.le=[];const e=new Set;for(const i of t.explicitOrderBy)t.le.push(i),e.add(i.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc",r=function(e){let t=new Nu(vl.comparator);return e.filters.forEach((e=>{e.getFlattenedFilters().forEach((e=>{e.isInequality()&&(t=t.add(e.field))}))})),t}(t);r.forEach((r=>{e.has(r.canonicalString())||r.isKeyField()||t.le.push(new yh(r,n))})),e.has(vl.keyField().canonicalString())||t.le.push(new yh(vl.keyField(),n))}return t.le}function Xh(e){const t=$c(e);return t.he||(t.he=Zh(t,Jh(e))),t.he}function Zh(e,t){if("F"===e.limitType)return Vh(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map((e=>{const t="desc"===e.dir?"asc":"desc";return new yh(e.field,t)}));const n=e.endAt?new ph(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new ph(e.startAt.position,e.startAt.inclusive):null;return Vh(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function ed(e,t){const n=e.filters.concat([t]);return new Wh(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function td(e,t,n){return new Wh(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function nd(e,t){return zh(Xh(e),Xh(t))&&e.limitType===t.limitType}function rd(e){return"".concat(jh(Xh(e)),"|lt:").concat(e.limitType)}function id(e){return"Query(target=".concat(function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map((e=>Nh(e))).join(", "),"]")),Gl(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map((e=>function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e))).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((e=>Ju(e))).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((e=>Ju(e))).join(",")),"Target(".concat(t,")")}(Xh(e)),"; limitType=").concat(e.limitType,")")}function sd(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):wl.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of Jh(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){const r=mh(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,Jh(e),t))&&!(e.endAt&&!function(e,t,n){const r=mh(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,Jh(e),t))}(e,t)}function od(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function ad(e){return(t,n)=>{let r=!1;for(const i of Jh(e)){const e=cd(i,t,n);if(0!==e)return e;r=r||i.field.isKeyField()}return 0}}function cd(e,t,n){const r=e.field.isKeyField()?wl.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?Yu(r,i):Qc()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return Qc()}}class ld{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[r,i]of n)if(this.equalsFn(r,e))return i}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){Iu(this.inner,((t,n)=>{for(const[r,i]of n)e(r,i)}))}isEmpty(){return Tu(this.inner)}size(){return this.innerSize}}const ud=new ku(wl.comparator);function hd(){return ud}const dd=new ku(wl.comparator);function fd(){let e=dd;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.insert(i.key,i);return e}function pd(e){let t=dd;return e.forEach(((e,n)=>t=t.insert(e,n.overlayedDocument))),t}function md(){return yd()}function gd(){return yd()}function yd(){return new ld((e=>e.toString()),((e,t)=>e.isEqual(t)))}const vd=new ku(wl.comparator),wd=new Nu(wl.comparator);function bd(){let e=wd;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.add(i);return e}const _d=new Nu(ul);function Sd(){return _d}function Ed(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Wl(t)?"-0":t}}function Id(e){return{integerValue:""+e}}function Td(e,t){return Hl(t)?Id(t):Ed(e,t)}class kd{constructor(){this._=void 0}}function Cd(e,t,n){return e instanceof Ad?function(e,t){const n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&Vu(t)&&(t=ju(t)),t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof Pd?Od(e,t):e instanceof Rd?Dd(e,t):function(e,t){const n=Nd(e,t),r=Md(n)+Md(e.Ie);return eh(n)&&eh(e.Ie)?Id(r):Ed(e.serializer,r)}(e,t)}function xd(e,t,n){return e instanceof Pd?Od(e,t):e instanceof Rd?Dd(e,t):n}function Nd(e,t){return e instanceof Ld?function(e){return eh(e)||function(e){return!!e&&"doubleValue"in e}(e)}(t)?t:{integerValue:0}:null}class Ad extends kd{}class Pd extends kd{constructor(e){super(),this.elements=e}}function Od(e,t){const n=Fd(t);for(const r of e.elements)n.some((e=>Hu(e,r)))||n.push(r);return{arrayValue:{values:n}}}class Rd extends kd{constructor(e){super(),this.elements=e}}function Dd(e,t){let n=Fd(t);for(const r of e.elements)n=n.filter((e=>!Hu(e,r)));return{arrayValue:{values:n}}}class Ld extends kd{constructor(e,t){super(),this.serializer=e,this.Ie=t}}function Md(e){return Fu(e.integerValue||e.doubleValue)}function Fd(e){return th(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class Ud{constructor(e,t){this.field=e,this.transform=t}}class Vd{constructor(e,t){this.version=e,this.transformResults=t}}class jd{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new jd}static exists(e){return new jd(void 0,e)}static updateTime(e){return new jd(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function zd(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class Bd{}function qd(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new Zd(e.key,jd.none()):new Qd(e.key,e.data,jd.none());{const n=e.data,r=hh.empty();let i=new Nu(vl.comparator);for(let e of t.fields)if(!i.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?r.delete(e):r.set(e,t),i=i.add(e)}return new Yd(e.key,r,new Ou(i.toArray()),jd.none())}}function Kd(e,t,n){e instanceof Qd?function(e,t,n){const r=e.value.clone(),i=Jd(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof Yd?function(e,t,n){if(!zd(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=Jd(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll($d(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function Gd(e,t,n,r){return e instanceof Qd?function(e,t,n,r){if(!zd(e.precondition,t))return n;const i=e.value.clone(),s=Xd(e.fieldTransforms,r,t);return i.setAll(s),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof Yd?function(e,t,n,r){if(!zd(e.precondition,t))return n;const i=Xd(e.fieldTransforms,r,t),s=t.data;return s.setAll($d(e)),s.setAll(i),t.convertToFoundDocument(t.version,s).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((e=>e.field)))}(e,t,n,r):function(e,t,n){return zd(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function Wd(e,t){let n=null;for(const r of e.fieldTransforms){const e=t.data.field(r.field),i=Nd(r.transform,e||null);null!=i&&(null===n&&(n=hh.empty()),n.set(r.field,i))}return n||null}function Hd(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&hl(e,t,((e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof Pd&&t instanceof Pd||e instanceof Rd&&t instanceof Rd?hl(e.elements,t.elements,Hu):e instanceof Ld&&t instanceof Ld?Hu(e.Ie,t.Ie):e instanceof Ad&&t instanceof Ad}(e.transform,t.transform)}(e,t)))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class Qd extends Bd{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Yd extends Bd{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function $d(e){const t=new Map;return e.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}})),t}function Jd(e,t,n){const r=new Map;Yc(e.length===n.length);for(let i=0;i<n.length;i++){const s=e[i],o=s.transform,a=t.data.field(s.field);r.set(s.field,xd(o,a,n[i]))}return r}function Xd(e,t,n){const r=new Map;for(const i of e){const e=i.transform,s=n.data.field(i.field);r.set(i.field,Cd(e,s,t))}return r}class Zd extends Bd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class ef extends Bd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class tf{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const t=this.mutations[r];t.key.isEqual(e.key)&&Kd(t,e,n[r])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=Gd(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=Gd(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=gd();return this.mutations.forEach((r=>{const i=e.get(r.key),s=i.overlayedDocument;let o=this.applyToLocalView(s,i.mutatedFields);o=t.has(r.key)?null:o;const a=qd(s,o);null!==a&&n.set(r.key,a),s.isValidDocument()||s.convertToNoDocument(pl.min())})),n}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),bd())}isEqual(e){return this.batchId===e.batchId&&hl(this.mutations,e.mutations,((e,t)=>Hd(e,t)))&&hl(this.baseMutations,e.baseMutations,((e,t)=>Hd(e,t)))}}class nf{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){Yc(e.mutations.length===n.length);let r=vd;const i=e.mutations;for(let s=0;s<i.length;s++)r=r.insert(i[s].key,n[s].version);return new nf(e,t,n,r)}}class rf{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}class sf{constructor(e,t){this.count=e,this.unchangedNames=t}}var of,af;function cf(e){switch(e){default:return Qc();case Jc.CANCELLED:case Jc.UNKNOWN:case Jc.DEADLINE_EXCEEDED:case Jc.RESOURCE_EXHAUSTED:case Jc.INTERNAL:case Jc.UNAVAILABLE:case Jc.UNAUTHENTICATED:return!1;case Jc.INVALID_ARGUMENT:case Jc.NOT_FOUND:case Jc.ALREADY_EXISTS:case Jc.PERMISSION_DENIED:case Jc.FAILED_PRECONDITION:case Jc.ABORTED:case Jc.OUT_OF_RANGE:case Jc.UNIMPLEMENTED:case Jc.DATA_LOSS:return!0}}function lf(e){if(void 0===e)return Gc("GRPC error has no .code"),Jc.UNKNOWN;switch(e){case of.OK:return Jc.OK;case of.CANCELLED:return Jc.CANCELLED;case of.UNKNOWN:return Jc.UNKNOWN;case of.DEADLINE_EXCEEDED:return Jc.DEADLINE_EXCEEDED;case of.RESOURCE_EXHAUSTED:return Jc.RESOURCE_EXHAUSTED;case of.INTERNAL:return Jc.INTERNAL;case of.UNAVAILABLE:return Jc.UNAVAILABLE;case of.UNAUTHENTICATED:return Jc.UNAUTHENTICATED;case of.INVALID_ARGUMENT:return Jc.INVALID_ARGUMENT;case of.NOT_FOUND:return Jc.NOT_FOUND;case of.ALREADY_EXISTS:return Jc.ALREADY_EXISTS;case of.PERMISSION_DENIED:return Jc.PERMISSION_DENIED;case of.FAILED_PRECONDITION:return Jc.FAILED_PRECONDITION;case of.ABORTED:return Jc.ABORTED;case of.OUT_OF_RANGE:return Jc.OUT_OF_RANGE;case of.UNIMPLEMENTED:return Jc.UNIMPLEMENTED;case of.DATA_LOSS:return Jc.DATA_LOSS;default:return Qc()}}(af=of||(of={}))[af.OK=0]="OK",af[af.CANCELLED=1]="CANCELLED",af[af.UNKNOWN=2]="UNKNOWN",af[af.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",af[af.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",af[af.NOT_FOUND=5]="NOT_FOUND",af[af.ALREADY_EXISTS=6]="ALREADY_EXISTS",af[af.PERMISSION_DENIED=7]="PERMISSION_DENIED",af[af.UNAUTHENTICATED=16]="UNAUTHENTICATED",af[af.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",af[af.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",af[af.ABORTED=10]="ABORTED",af[af.OUT_OF_RANGE=11]="OUT_OF_RANGE",af[af.UNIMPLEMENTED=12]="UNIMPLEMENTED",af[af.INTERNAL=13]="INTERNAL",af[af.UNAVAILABLE=14]="UNAVAILABLE",af[af.DATA_LOSS=15]="DATA_LOSS";let uf=null;function hf(){return new TextEncoder}const df=new Uc([4294967295,4294967295],0);function ff(e){const t=hf().encode(e),n=new Fc;return n.update(t),new Uint8Array(n.digest())}function pf(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new Uc([n,r],0),new Uc([i,s],0)]}class mf{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new gf("Invalid padding: ".concat(t));if(n<0)throw new gf("Invalid hash count: ".concat(n));if(e.length>0&&0===this.hashCount)throw new gf("Invalid hash count: ".concat(n));if(0===e.length&&0!==t)throw new gf("Invalid padding when bitmap length is 0: ".concat(t));this.Te=8*e.length-t,this.Ee=Uc.fromNumber(this.Te)}de(e,t,n){let r=e.add(t.multiply(Uc.fromNumber(n)));return 1===r.compare(df)&&(r=new Uc([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Ee).toNumber()}Ae(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.Te)return!1;const t=ff(e),[n,r]=pf(t);for(let i=0;i<this.hashCount;i++){const e=this.de(n,r,i);if(!this.Ae(e))return!1}return!0}static create(e,t,n){const r=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),s=new mf(i,r,t);return n.forEach((e=>s.insert(e))),s}insert(e){if(0===this.Te)return;const t=ff(e),[n,r]=pf(t);for(let i=0;i<this.hashCount;i++){const e=this.de(n,r,i);this.Re(e)}}Re(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class gf extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class yf{constructor(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const r=new Map;return r.set(e,vf.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new yf(pl.min(),r,new ku(ul),hd(),bd())}}class vf{constructor(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new vf(n,t,bd(),bd(),bd())}}class wf{constructor(e,t,n,r){this.Ve=e,this.removedTargetIds=t,this.key=n,this.me=r}}class bf{constructor(e,t){this.targetId=e,this.fe=t}}class _f{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Du.EMPTY_BYTE_STRING,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class Sf{constructor(){this.ge=0,this.pe=Tf(),this.ye=Du.EMPTY_BYTE_STRING,this.we=!1,this.Se=!0}get current(){return this.we}get resumeToken(){return this.ye}get be(){return 0!==this.ge}get De(){return this.Se}Ce(e){e.approximateByteSize()>0&&(this.Se=!0,this.ye=e)}ve(){let e=bd(),t=bd(),n=bd();return this.pe.forEach(((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:Qc()}})),new vf(this.ye,this.we,e,t,n)}Fe(){this.Se=!1,this.pe=Tf()}Me(e,t){this.Se=!0,this.pe=this.pe.insert(e,t)}xe(e){this.Se=!0,this.pe=this.pe.remove(e)}Oe(){this.ge+=1}Ne(){this.ge-=1,Yc(this.ge>=0)}Le(){this.Se=!0,this.we=!0}}class Ef{constructor(e){this.Be=e,this.ke=new Map,this.qe=hd(),this.Qe=If(),this.Ke=new ku(ul)}$e(e){for(const t of e.Ve)e.me&&e.me.isFoundDocument()?this.Ue(t,e.me):this.We(t,e.key,e.me);for(const t of e.removedTargetIds)this.We(t,e.key,e.me)}Ge(e){this.forEachTarget(e,(t=>{const n=this.ze(t);switch(e.state){case 0:this.je(t)&&n.Ce(e.resumeToken);break;case 1:n.Ne(),n.be||n.Fe(),n.Ce(e.resumeToken);break;case 2:n.Ne(),n.be||this.removeTarget(t);break;case 3:this.je(t)&&(n.Le(),n.Ce(e.resumeToken));break;case 4:this.je(t)&&(this.He(t),n.Ce(e.resumeToken));break;default:Qc()}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ke.forEach(((e,n)=>{this.je(n)&&t(n)}))}Je(e){const t=e.targetId,n=e.fe.count,r=this.Ye(t);if(r){const i=r.target;if(Bh(i))if(0===n){const e=new wl(i.path);this.We(t,e,fh.newNoDocument(e,pl.min()))}else Yc(1===n);else{const r=this.Ze(t);if(r!==n){const n=this.Xe(e),i=n?this.et(n,e,r):1;if(0!==i){this.He(t);const e=2===i?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(t,e)}null==uf||uf.tt(function(e,t,n,r,i){var s,o,a,c,l,u;const h={localCacheCount:e,existenceFilterCount:t.count,databaseId:n.database,projectId:n.projectId},d=t.unchangedNames;return d&&(h.bloomFilter={applied:0===i,hashCount:null!==(s=null==d?void 0:d.hashCount)&&void 0!==s?s:0,bitmapLength:null!==(c=null===(a=null===(o=null==d?void 0:d.bits)||void 0===o?void 0:o.bitmap)||void 0===a?void 0:a.length)&&void 0!==c?c:0,padding:null!==(u=null===(l=null==d?void 0:d.bits)||void 0===l?void 0:l.padding)&&void 0!==u?u:0,mightContain:e=>{var t;return null!==(t=null==r?void 0:r.mightContain(e))&&void 0!==t&&t}}),h}(r,e.fe,this.Be.nt(),n,i))}}}}Xe(e){const t=e.fe.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:r=0},hashCount:i=0}=t;let s,o;try{s=Uu(n).toUint8Array()}catch(e){if(e instanceof Ru)return Wc("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw e}try{o=new mf(s,r,i)}catch(e){return Wc(e instanceof gf?"BloomFilter error: ":"Applying bloom filter failed: ",e),null}return 0===o.Te?null:o}et(e,t,n){return t.fe.count===n-this.rt(e,t.targetId)?0:2}rt(e,t){const n=this.Be.getRemoteKeysForTarget(t);let r=0;return n.forEach((n=>{const i=this.Be.nt(),s="projects/".concat(i.projectId,"/databases/").concat(i.database,"/documents/").concat(n.path.canonicalString());e.mightContain(s)||(this.We(t,n,null),r++)})),r}it(e){const t=new Map;this.ke.forEach(((n,r)=>{const i=this.Ye(r);if(i){if(n.current&&Bh(i.target)){const t=new wl(i.target.path);null!==this.qe.get(t)||this.st(r,t)||this.We(r,t,fh.newNoDocument(t,e))}n.De&&(t.set(r,n.ve()),n.Fe())}}));let n=bd();this.Qe.forEach(((e,t)=>{let r=!0;t.forEachWhile((e=>{const t=this.Ye(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(r=!1,!1)})),r&&(n=n.add(e))})),this.qe.forEach(((t,n)=>n.setReadTime(e)));const r=new yf(e,t,this.Ke,this.qe,n);return this.qe=hd(),this.Qe=If(),this.Ke=new ku(ul),r}Ue(e,t){if(!this.je(e))return;const n=this.st(e,t.key)?2:0;this.ze(e).Me(t.key,n),this.qe=this.qe.insert(t.key,t),this.Qe=this.Qe.insert(t.key,this.ot(t.key).add(e))}We(e,t,n){if(!this.je(e))return;const r=this.ze(e);this.st(e,t)?r.Me(t,1):r.xe(t),this.Qe=this.Qe.insert(t,this.ot(t).delete(e)),n&&(this.qe=this.qe.insert(t,n))}removeTarget(e){this.ke.delete(e)}Ze(e){const t=this.ze(e).ve();return this.Be.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Oe(e){this.ze(e).Oe()}ze(e){let t=this.ke.get(e);return t||(t=new Sf,this.ke.set(e,t)),t}ot(e){let t=this.Qe.get(e);return t||(t=new Nu(ul),this.Qe=this.Qe.insert(e,t)),t}je(e){const t=null!==this.Ye(e);return t||Kc("WatchChangeAggregator","Detected inactive target",e),t}Ye(e){const t=this.ke.get(e);return t&&t.be?null:this.Be._t(e)}He(e){this.ke.set(e,new Sf),this.Be.getRemoteKeysForTarget(e).forEach((t=>{this.We(e,t,null)}))}st(e,t){return this.Be.getRemoteKeysForTarget(e).has(t)}}function If(){return new ku(wl.comparator)}function Tf(){return new ku(wl.comparator)}const kf={asc:"ASCENDING",desc:"DESCENDING"},Cf={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},xf={and:"AND",or:"OR"};class Nf{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Af(e,t){return e.useProto3Json||Gl(t)?t:{value:t}}function Pf(e,t){return e.useProto3Json?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function Of(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function Rf(e,t){return Pf(e,t.toTimestamp())}function Df(e){return Yc(!!e),pl.fromTimestamp(function(e){const t=Mu(e);return new fl(t.seconds,t.nanos)}(e))}function Lf(e,t){return Mf(e,t).canonicalString()}function Mf(e,t){const n=function(e){return new gl(["projects",e.projectId,"databases",e.database])}(e).child("documents");return void 0===t?n:n.child(t)}function Ff(e){const t=gl.fromString(e);return Yc(sp(t)),t}function Uf(e,t){return Lf(e.databaseId,t.path)}function Vf(e,t){const n=Ff(t);if(n.get(1)!==e.databaseId.projectId)throw new Xc(Jc.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new Xc(Jc.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new wl(qf(n))}function jf(e,t){return Lf(e.databaseId,t)}function zf(e){const t=Ff(e);return 4===t.length?gl.emptyPath():qf(t)}function Bf(e){return new gl(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function qf(e){return Yc(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function Kf(e,t,n){return{name:Uf(e,t),fields:n.value.mapValue.fields}}function Gf(e,t,n){const r=Vf(e,t.name),i=Df(t.updateTime),s=t.createTime?Df(t.createTime):pl.min(),o=new hh({mapValue:{fields:t.fields}}),a=fh.newFoundDocument(r,i,s,o);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function Wf(e,t){let n;if(t instanceof Qd)n={update:Kf(e,t.key,t.value)};else if(t instanceof Zd)n={delete:Uf(e,t.key)};else if(t instanceof Yd)n={update:Kf(e,t.key,t.data),updateMask:ip(t.fieldMask)};else{if(!(t instanceof ef))return Qc();n={verify:Uf(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((e=>function(e,t){const n=t.transform;if(n instanceof Ad)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Pd)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Rd)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Ld)return{fieldPath:t.field.canonicalString(),increment:n.Ie};throw Qc()}(0,e)))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:Rf(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:Qc()}(e,t.precondition)),n}function Hf(e,t){const n=t.currentDocument?function(e){return void 0!==e.updateTime?jd.updateTime(Df(e.updateTime)):void 0!==e.exists?jd.exists(e.exists):jd.none()}(t.currentDocument):jd.none(),r=t.updateTransforms?t.updateTransforms.map((t=>function(e,t){let n=null;if("setToServerValue"in t)Yc("REQUEST_TIME"===t.setToServerValue),n=new Ad;else if("appendMissingElements"in t){const e=t.appendMissingElements.values||[];n=new Pd(e)}else if("removeAllFromArray"in t){const e=t.removeAllFromArray.values||[];n=new Rd(e)}else"increment"in t?n=new Ld(e,t.increment):Qc();const r=vl.fromServerFormat(t.fieldPath);return new Ud(r,n)}(e,t))):[];if(t.update){t.update.name;const i=Vf(e,t.update.name),s=new hh({mapValue:{fields:t.update.fields}});if(t.updateMask){const e=function(e){const t=e.fieldPaths||[];return new Ou(t.map((e=>vl.fromServerFormat(e))))}(t.updateMask);return new Yd(i,s,e,n,r)}return new Qd(i,s,n,r)}if(t.delete){const r=Vf(e,t.delete);return new Zd(r,n)}if(t.verify){const r=Vf(e,t.verify);return new ef(r,n)}return Qc()}function Qf(e,t){return{documents:[jf(e,t.path)]}}function Yf(e,t){const n={structuredQuery:{}},r=t.path;let i;null!==t.collectionGroup?(i=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=jf(e,i);const s=function(e){if(0!==e.length)return rp(_h.create(e,"and"))}(t.filters);s&&(n.structuredQuery.where=s);const o=function(e){if(0!==e.length)return e.map((e=>function(e){return{field:tp(e.field),direction:Xf(e.dir)}}(e)))}(t.orderBy);o&&(n.structuredQuery.orderBy=o);const a=Af(e,t.limit);return null!==a&&(n.structuredQuery.limit=a),t.startAt&&(n.structuredQuery.startAt=function(e){return{before:e.inclusive,values:e.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),{ut:n,parent:i}}function $f(e){let t=zf(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Yc(1===r);const e=n.from[0];e.allDescendants?i=e.collectionId:t=t.child(e.collectionId)}let s=[];n.where&&(s=function(e){const t=Jf(e);return t instanceof _h&&Ih(t)?t.getFilters():[t]}(n.where));let o=[];n.orderBy&&(o=function(e){return e.map((e=>function(e){return new yh(np(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)))}(n.orderBy));let a=null;n.limit&&(a=function(e){let t;return t="object"==typeof e?e.value:e,Gl(t)?null:t}(n.limit));let c=null;n.startAt&&(c=function(e){const t=!!e.before,n=e.values||[];return new ph(n,t)}(n.startAt));let l=null;return n.endAt&&(l=function(e){const t=!e.before,n=e.values||[];return new ph(n,t)}(n.endAt)),Hh(t,i,o,s,a,"F",c,l)}function Jf(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=np(e.unaryFilter.field);return bh.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=np(e.unaryFilter.field);return bh.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=np(e.unaryFilter.field);return bh.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=np(e.unaryFilter.field);return bh.create(i,"!=",{nullValue:"NULL_VALUE"});default:return Qc()}}(e):void 0!==e.fieldFilter?function(e){return bh.create(np(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Qc()}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return _h.create(e.compositeFilter.filters.map((e=>Jf(e))),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return Qc()}}(e.compositeFilter.op))}(e):Qc()}function Xf(e){return kf[e]}function Zf(e){return Cf[e]}function ep(e){return xf[e]}function tp(e){return{fieldPath:e.canonicalString()}}function np(e){return vl.fromServerFormat(e.fieldPath)}function rp(e){return e instanceof bh?function(e){if("=="===e.op){if(rh(e.value))return{unaryFilter:{field:tp(e.field),op:"IS_NAN"}};if(nh(e.value))return{unaryFilter:{field:tp(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(rh(e.value))return{unaryFilter:{field:tp(e.field),op:"IS_NOT_NAN"}};if(nh(e.value))return{unaryFilter:{field:tp(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:tp(e.field),op:Zf(e.op),value:e.value}}}(e):e instanceof _h?function(e){const t=e.getFilters().map((e=>rp(e)));return 1===t.length?t[0]:{compositeFilter:{op:ep(e.op),filters:t}}}(e):Qc()}function ip(e){const t=[];return e.fields.forEach((e=>t.push(e.canonicalString()))),{fieldPaths:t}}function sp(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}class op{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:pl.min(),s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:pl.min(),o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Du.EMPTY_BYTE_STRING,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=o,this.expectedCount=a}withSequenceNumber(e){return new op(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new op(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new op(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new op(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class ap{constructor(e){this.ct=e}}function cp(e,t){const n=t.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:lp(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())r.document=function(e,t){return{name:Uf(e,t.key),fields:t.data.value.mapValue.fields,updateTime:Pf(e,t.version.toTimestamp()),createTime:Pf(e,t.createTime.toTimestamp())}}(e.ct,t);else if(t.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:up(t.version)};else{if(!t.isUnknownDocument())return Qc();r.unknownDocument={path:n.path.toArray(),version:up(t.version)}}return r}function lp(e){const t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function up(e){const t=e.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function hp(e){const t=new fl(e.seconds,e.nanoseconds);return pl.fromTimestamp(t)}function dp(e,t){const n=(t.baseMutations||[]).map((t=>Hf(e.ct,t)));for(let s=0;s<t.mutations.length-1;++s){const e=t.mutations[s];if(s+1<t.mutations.length&&void 0!==t.mutations[s+1].transform){const n=t.mutations[s+1];e.updateTransforms=n.transform.fieldTransforms,t.mutations.splice(s+1,1),++s}}const r=t.mutations.map((t=>Hf(e.ct,t))),i=fl.fromMillis(t.localWriteTimeMs);return new tf(t.batchId,i,n,r)}function fp(e){const t=hp(e.readTime),n=void 0!==e.lastLimboFreeSnapshotVersion?hp(e.lastLimboFreeSnapshotVersion):pl.min();let r;return r=function(e){return void 0!==e.documents}(e.query)?function(e){return Yc(1===e.documents.length),Xh(Qh(zf(e.documents[0])))}(e.query):function(e){return Xh($f(e))}(e.query),new op(r,e.targetId,"TargetPurposeListen",e.lastListenSequenceNumber,t,n,Du.fromBase64String(e.resumeToken))}function pp(e,t){const n=up(t.snapshotVersion),r=up(t.lastLimboFreeSnapshotVersion);let i;i=Bh(t.target)?Qf(e.ct,t.target):Yf(e.ct,t.target).ut;const s=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:jh(t.target),readTime:n,resumeToken:s,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function mp(e){const t=$f({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?td(t,t.limit,"L"):t}function gp(e,t){return new rf(t.largestBatchId,Hf(e.ct,t.overlayMutation))}function yp(e,t){const n=t.path.lastSegment();return[e,Ql(t.path.popLast()),n]}function vp(e,t,n,r){return{indexId:e,uid:t,sequenceNumber:n,readTime:up(r.readTime),documentKey:Ql(r.documentKey.path),largestBatchId:r.largestBatchId}}class wp{getBundleMetadata(e,t){return bp(e).get(t).next((e=>{if(e)return function(e){return{id:e.bundleId,createTime:hp(e.createTime),version:e.version}}(e)}))}saveBundleMetadata(e,t){return bp(e).put(function(e){return{bundleId:e.id,createTime:up(Df(e.createTime)),version:e.version}}(t))}getNamedQuery(e,t){return _p(e).get(t).next((e=>{if(e)return function(e){return{name:e.name,query:mp(e.bundledQuery),readTime:hp(e.readTime)}}(e)}))}saveNamedQuery(e,t){return _p(e).put(function(e){return{name:e.name,readTime:up(Df(e.readTime)),bundledQuery:e.bundledQuery}}(t))}}function bp(e){return Su(e,"bundles")}function _p(e){return Su(e,"namedQueries")}class Sp{constructor(e,t){this.serializer=e,this.userId=t}static lt(e,t){const n=t.uid||"";return new Sp(e,n)}getOverlay(e,t){return Ep(e).get(yp(this.userId,t)).next((e=>e?gp(this.serializer,e):null))}getOverlays(e,t){const n=md();return Ol.forEach(t,(t=>this.getOverlay(e,t).next((e=>{null!==e&&n.set(t,e)})))).next((()=>n))}saveOverlays(e,t,n){const r=[];return n.forEach(((n,i)=>{const s=new rf(t,i);r.push(this.ht(e,s))})),Ol.waitFor(r)}removeOverlaysForBatchId(e,t,n){const r=new Set;t.forEach((e=>r.add(Ql(e.getCollectionPath()))));const i=[];return r.forEach((t=>{const r=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,n+1],!1,!0);i.push(Ep(e).H("collectionPathOverlayIndex",r))})),Ol.waitFor(i)}getOverlaysForCollection(e,t,n){const r=md(),i=Ql(t),s=IDBKeyRange.bound([this.userId,i,n],[this.userId,i,Number.POSITIVE_INFINITY],!0);return Ep(e).W("collectionPathOverlayIndex",s).next((e=>{for(const t of e){const e=gp(this.serializer,t);r.set(e.getKey(),e)}return r}))}getOverlaysForCollectionGroup(e,t,n,r){const i=md();let s;const o=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Ep(e).Y({index:"collectionGroupOverlayIndex",range:o},((e,t,n)=>{const o=gp(this.serializer,t);i.size()<r||o.largestBatchId===s?(i.set(o.getKey(),o),s=o.largestBatchId):n.done()})).next((()=>i))}ht(e,t){return Ep(e).put(function(e,t,n){const[r,i,s]=yp(t,n.mutation.key);return{userId:t,collectionPath:i,documentId:s,collectionGroup:n.mutation.key.getCollectionGroup(),largestBatchId:n.largestBatchId,overlayMutation:Wf(e.ct,n.mutation)}}(this.serializer,this.userId,t))}}function Ep(e){return Su(e,"documentOverlays")}class Ip{constructor(){}Pt(e,t){this.It(e,t),t.Tt()}It(e,t){if("nullValue"in e)this.Et(t,5);else if("booleanValue"in e)this.Et(t,10),t.dt(e.booleanValue?1:0);else if("integerValue"in e)this.Et(t,15),t.dt(Fu(e.integerValue));else if("doubleValue"in e){const n=Fu(e.doubleValue);isNaN(n)?this.Et(t,13):(this.Et(t,15),Wl(n)?t.dt(0):t.dt(n))}else if("timestampValue"in e){const n=e.timestampValue;this.Et(t,20),"string"==typeof n?t.At(n):(t.At("".concat(n.seconds||"")),t.dt(n.nanos||0))}else if("stringValue"in e)this.Rt(e.stringValue,t),this.Vt(t);else if("bytesValue"in e)this.Et(t,30),t.ft(Uu(e.bytesValue)),this.Vt(t);else if("referenceValue"in e)this.gt(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.Et(t,45),t.dt(n.latitude||0),t.dt(n.longitude||0)}else"mapValue"in e?oh(e)?this.Et(t,Number.MAX_SAFE_INTEGER):(this.yt(e.mapValue,t),this.Vt(t)):"arrayValue"in e?(this.wt(e.arrayValue,t),this.Vt(t)):Qc()}Rt(e,t){this.Et(t,25),this.St(e,t)}St(e,t){t.At(e)}yt(e,t){const n=e.fields||{};this.Et(t,55);for(const r of Object.keys(n))this.Rt(r,t),this.It(n[r],t)}wt(e,t){const n=e.values||[];this.Et(t,50);for(const r of n)this.It(r,t)}gt(e,t){this.Et(t,37),wl.fromName(e).path.forEach((e=>{this.Et(t,60),this.St(e,t)}))}Et(e,t){e.dt(t)}Vt(e){e.dt(2)}}function Tp(e){if(0===e)return 8;let t=0;return e>>4==0&&(t+=4,e<<=4),e>>6==0&&(t+=2,e<<=2),e>>7==0&&(t+=1),t}function kp(e){const t=64-function(e){let t=0;for(let n=0;n<8;++n){const r=Tp(255&e[n]);if(t+=r,8!==r)break}return t}(e);return Math.ceil(t/8)}Ip.bt=new Ip;class Cp{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Dt(e){const t=e[Symbol.iterator]();let n=t.next();for(;!n.done;)this.Ct(n.value),n=t.next();this.vt()}Ft(e){const t=e[Symbol.iterator]();let n=t.next();for(;!n.done;)this.Mt(n.value),n=t.next();this.xt()}Ot(e){for(const t of e){const e=t.charCodeAt(0);if(e<128)this.Ct(e);else if(e<2048)this.Ct(960|e>>>6),this.Ct(128|63&e);else if(t<"\ud800"||"\udbff"<t)this.Ct(480|e>>>12),this.Ct(128|63&e>>>6),this.Ct(128|63&e);else{const e=t.codePointAt(0);this.Ct(240|e>>>18),this.Ct(128|63&e>>>12),this.Ct(128|63&e>>>6),this.Ct(128|63&e)}}this.vt()}Nt(e){for(const t of e){const e=t.charCodeAt(0);if(e<128)this.Mt(e);else if(e<2048)this.Mt(960|e>>>6),this.Mt(128|63&e);else if(t<"\ud800"||"\udbff"<t)this.Mt(480|e>>>12),this.Mt(128|63&e>>>6),this.Mt(128|63&e);else{const e=t.codePointAt(0);this.Mt(240|e>>>18),this.Mt(128|63&e>>>12),this.Mt(128|63&e>>>6),this.Mt(128|63&e)}}this.xt()}Lt(e){const t=this.Bt(e),n=kp(t);this.kt(1+n),this.buffer[this.position++]=255&n;for(let r=t.length-n;r<t.length;++r)this.buffer[this.position++]=255&t[r]}qt(e){const t=this.Bt(e),n=kp(t);this.kt(1+n),this.buffer[this.position++]=~(255&n);for(let r=t.length-n;r<t.length;++r)this.buffer[this.position++]=~(255&t[r])}Qt(){this.Kt(255),this.Kt(255)}$t(){this.Ut(255),this.Ut(255)}reset(){this.position=0}seed(e){this.kt(e.length),this.buffer.set(e,this.position),this.position+=e.length}Wt(){return this.buffer.slice(0,this.position)}Bt(e){const t=function(e){const t=new DataView(new ArrayBuffer(8));return t.setFloat64(0,e,!1),new Uint8Array(t.buffer)}(e),n=0!=(128&t[0]);t[0]^=n?255:128;for(let r=1;r<t.length;++r)t[r]^=n?255:0;return t}Ct(e){const t=255&e;0===t?(this.Kt(0),this.Kt(255)):255===t?(this.Kt(255),this.Kt(0)):this.Kt(t)}Mt(e){const t=255&e;0===t?(this.Ut(0),this.Ut(255)):255===t?(this.Ut(255),this.Ut(0)):this.Ut(e)}vt(){this.Kt(0),this.Kt(1)}xt(){this.Ut(0),this.Ut(1)}Kt(e){this.kt(1),this.buffer[this.position++]=e}Ut(e){this.kt(1),this.buffer[this.position++]=~e}kt(e){const t=e+this.position;if(t<=this.buffer.length)return;let n=2*this.buffer.length;n<t&&(n=t);const r=new Uint8Array(n);r.set(this.buffer),this.buffer=r}}class xp{constructor(e){this.Gt=e}ft(e){this.Gt.Dt(e)}At(e){this.Gt.Ot(e)}dt(e){this.Gt.Lt(e)}Tt(){this.Gt.Qt()}}class Np{constructor(e){this.Gt=e}ft(e){this.Gt.Ft(e)}At(e){this.Gt.Nt(e)}dt(e){this.Gt.qt(e)}Tt(){this.Gt.$t()}}class Ap{constructor(){this.Gt=new Cp,this.zt=new xp(this.Gt),this.jt=new Np(this.Gt)}seed(e){this.Gt.seed(e)}Ht(e){return 0===e?this.zt:this.jt}Wt(){return this.Gt.Wt()}reset(){this.Gt.reset()}}class Pp{constructor(e,t,n,r){this.indexId=e,this.documentKey=t,this.arrayValue=n,this.directionalValue=r}Jt(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,n=new Uint8Array(t);return n.set(this.directionalValue,0),t!==e?n.set([0],this.directionalValue.length):++n[n.length-1],new Pp(this.indexId,this.documentKey,this.arrayValue,n)}}function Op(e,t){let n=e.indexId-t.indexId;return 0!==n?n:(n=Rp(e.arrayValue,t.arrayValue),0!==n?n:(n=Rp(e.directionalValue,t.directionalValue),0!==n?n:wl.comparator(e.documentKey,t.documentKey)))}function Rp(e,t){for(let n=0;n<e.length&&n<t.length;++n){const r=e[n]-t[n];if(0!==r)return r}return e.length-t.length}class Dp{constructor(e){this.Yt=new Nu(((e,t)=>vl.comparator(e.field,t.field))),this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Zt=e.orderBy,this.Xt=[];for(const t of e.filters){const e=t;e.isInequality()?this.Yt=this.Yt.add(e):this.Xt.push(e)}}get en(){return this.Yt.size>1}tn(e){if(Yc(e.collectionGroup===this.collectionId),this.en)return!1;const t=_l(e);if(void 0!==t&&!this.nn(t))return!1;const n=Sl(e);let r=new Set,i=0,s=0;for(;i<n.length&&this.nn(n[i]);++i)r=r.add(n[i].fieldPath.canonicalString());if(i===n.length)return!0;if(this.Yt.size>0){const e=this.Yt.getIterator().getNext();if(!r.has(e.field.canonicalString())){const t=n[i];if(!this.rn(e,t)||!this.sn(this.Zt[s++],t))return!1}++i}for(;i<n.length;++i){const e=n[i];if(s>=this.Zt.length||!this.sn(this.Zt[s++],e))return!1}return!0}on(){if(this.en)return null;let e=new Nu(vl.comparator);const t=[];for(const n of this.Xt)if(!n.field.isKeyField())if("array-contains"===n.op||"array-contains-any"===n.op)t.push(new El(n.field,2));else{if(e.has(n.field))continue;e=e.add(n.field),t.push(new El(n.field,0))}for(const n of this.Zt)n.field.isKeyField()||e.has(n.field)||(e=e.add(n.field),t.push(new El(n.field,"asc"===n.dir?0:1)));return new bl(bl.UNKNOWN_ID,this.collectionId,t,Il.empty())}nn(e){for(const t of this.Xt)if(this.rn(t,e))return!0;return!1}rn(e,t){if(void 0===e||!e.field.isEqual(t.fieldPath))return!1;const n="array-contains"===e.op||"array-contains-any"===e.op;return 2===t.kind===n}sn(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function Lp(e){var t,n;if(Yc(e instanceof bh||e instanceof _h),e instanceof bh){if(e instanceof Lh){const r=(null===(n=null===(t=e.value.arrayValue)||void 0===t?void 0:t.values)||void 0===n?void 0:n.map((t=>bh.create(e.field,"==",t))))||[];return _h.create(r,"or")}return e}const r=e.filters.map((e=>Lp(e)));return _h.create(r,e.op)}function Mp(e){if(0===e.getFilters().length)return[];const t=jp(Lp(e));return Yc(Vp(t)),Fp(t)||Up(t)?[t]:t.getFilters()}function Fp(e){return e instanceof bh}function Up(e){return e instanceof _h&&Ih(e)}function Vp(e){return Fp(e)||Up(e)||function(e){if(e instanceof _h&&Eh(e)){for(const t of e.getFilters())if(!Fp(t)&&!Up(t))return!1;return!0}return!1}(e)}function jp(e){if(Yc(e instanceof bh||e instanceof _h),e instanceof bh)return e;if(1===e.filters.length)return jp(e.filters[0]);const t=e.filters.map((e=>jp(e)));let n=_h.create(t,e.op);return n=qp(n),Vp(n)?n:(Yc(n instanceof _h),Yc(Sh(n)),Yc(n.filters.length>1),n.filters.reduce(((e,t)=>zp(e,t))))}function zp(e,t){let n;return Yc(e instanceof bh||e instanceof _h),Yc(t instanceof bh||t instanceof _h),n=e instanceof bh?t instanceof bh?function(e,t){return _h.create([e,t],"and")}(e,t):Bp(e,t):t instanceof bh?Bp(t,e):function(e,t){if(Yc(e.filters.length>0&&t.filters.length>0),Sh(e)&&Sh(t))return xh(e,t.getFilters());const n=Eh(e)?e:t,r=Eh(e)?t:e,i=n.filters.map((e=>zp(e,r)));return _h.create(i,"or")}(e,t),qp(n)}function Bp(e,t){if(Sh(t))return xh(t,e.getFilters());{const n=t.filters.map((t=>zp(e,t)));return _h.create(n,"or")}}function qp(e){if(Yc(e instanceof bh||e instanceof _h),e instanceof bh)return e;const t=e.getFilters();if(1===t.length)return qp(t[0]);if(Th(e))return e;const n=t.map((e=>qp(e))),r=[];return n.forEach((t=>{t instanceof bh?r.push(t):t instanceof _h&&(t.op===e.op?r.push(...t.filters):r.push(t))})),1===r.length?r[0]:_h.create(r,e.op)}class Kp{constructor(){this._n=new Gp}addToCollectionParentIndex(e,t){return this._n.add(t),Ol.resolve()}getCollectionParents(e,t){return Ol.resolve(this._n.getEntries(t))}addFieldIndex(e,t){return Ol.resolve()}deleteFieldIndex(e,t){return Ol.resolve()}deleteAllFieldIndexes(e){return Ol.resolve()}createTargetIndexes(e,t){return Ol.resolve()}getDocumentsMatchingTarget(e,t){return Ol.resolve(null)}getIndexType(e,t){return Ol.resolve(0)}getFieldIndexes(e,t){return Ol.resolve([])}getNextCollectionGroupToUpdate(e){return Ol.resolve(null)}getMinOffset(e,t){return Ol.resolve(Cl.min())}getMinOffsetFromCollectionGroup(e,t){return Ol.resolve(Cl.min())}updateCollectionGroup(e,t,n){return Ol.resolve()}updateIndexEntries(e,t){return Ol.resolve()}}class Gp{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new Nu(gl.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new Nu(gl.comparator)).toArray()}}const Wp=new Uint8Array(0);class Hp{constructor(e,t){this.databaseId=t,this.an=new Gp,this.un=new ld((e=>jh(e)),((e,t)=>zh(e,t))),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.an.has(t)){const n=t.lastSegment(),r=t.popLast();e.addOnCommittedListener((()=>{this.an.add(t)}));const i={collectionId:n,parent:Ql(r)};return Qp(e).put(i)}return Ol.resolve()}getCollectionParents(e,t){const n=[],r=IDBKeyRange.bound([t,""],[dl(t),""],!1,!0);return Qp(e).W(r).next((e=>{for(const r of e){if(r.collectionId!==t)break;n.push(Jl(r.parent))}return n}))}addFieldIndex(e,t){const n=$p(e),r=function(e){return{indexId:e.indexId,collectionGroup:e.collectionGroup,fields:e.fields.map((e=>[e.fieldPath.canonicalString(),e.kind]))}}(t);delete r.indexId;const i=n.add(r);if(t.indexState){const n=Jp(e);return i.next((e=>{n.put(vp(e,this.uid,t.indexState.sequenceNumber,t.indexState.offset))}))}return i.next()}deleteFieldIndex(e,t){const n=$p(e),r=Jp(e),i=Yp(e);return n.delete(t.indexId).next((()=>r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))).next((()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))))}deleteAllFieldIndexes(e){const t=$p(e),n=Yp(e),r=Jp(e);return t.H().next((()=>n.H())).next((()=>r.H()))}createTargetIndexes(e,t){return Ol.forEach(this.cn(t),(t=>this.getIndexType(e,t).next((n=>{if(0===n||1===n){const n=new Dp(t).on();if(null!=n)return this.addFieldIndex(e,n)}}))))}getDocumentsMatchingTarget(e,t){const n=Yp(e);let r=!0;const i=new Map;return Ol.forEach(this.cn(t),(t=>this.ln(e,t).next((e=>{r&&(r=!!e),i.set(t,e)})))).next((()=>{if(r){let e=bd();const r=[];return Ol.forEach(i,((i,s)=>{Kc("IndexedDbIndexManager","Using index ".concat(function(e){return"id=".concat(e.indexId,"|cg=").concat(e.collectionGroup,"|f=").concat(e.fields.map((e=>"".concat(e.fieldPath,":").concat(e.kind))).join(","))}(i)," to execute ").concat(jh(t)));const o=function(e,t){const n=_l(t);if(void 0===n)return null;for(const r of qh(e,n.fieldPath))switch(r.op){case"array-contains-any":return r.value.arrayValue.values||[];case"array-contains":return[r.value]}return null}(s,i),a=function(e,t){const n=new Map;for(const r of Sl(t))for(const t of qh(e,r.fieldPath))switch(t.op){case"==":case"in":n.set(r.fieldPath.canonicalString(),t.value);break;case"not-in":case"!=":return n.set(r.fieldPath.canonicalString(),t.value),Array.from(n.values())}return null}(s,i),c=function(e,t){const n=[];let r=!0;for(const i of Sl(t)){const t=0===i.kind?Kh(e,i.fieldPath,e.startAt):Gh(e,i.fieldPath,e.startAt);n.push(t.value),r&&(r=t.inclusive)}return new ph(n,r)}(s,i),l=function(e,t){const n=[];let r=!0;for(const i of Sl(t)){const t=0===i.kind?Gh(e,i.fieldPath,e.endAt):Kh(e,i.fieldPath,e.endAt);n.push(t.value),r&&(r=t.inclusive)}return new ph(n,r)}(s,i),u=this.hn(i,s,c),h=this.hn(i,s,l),d=this.Pn(i,s,a),f=this.In(i.indexId,o,u,c.inclusive,h,l.inclusive,d);return Ol.forEach(f,(i=>n.j(i,t.limit).next((t=>{t.forEach((t=>{const n=wl.fromSegments(t.documentKey);e.has(n)||(e=e.add(n),r.push(n))}))}))))})).next((()=>r))}return Ol.resolve(null)}))}cn(e){let t=this.un.get(e);return t||(t=0===e.filters.length?[e]:Mp(_h.create(e.filters,"and")).map((t=>Vh(e.path,e.collectionGroup,e.orderBy,t.getFilters(),e.limit,e.startAt,e.endAt))),this.un.set(e,t),t)}In(e,t,n,r,i,s,o){const a=(null!=t?t.length:1)*Math.max(n.length,i.length),c=a/(null!=t?t.length:1),l=[];for(let u=0;u<a;++u){const a=t?this.Tn(t[u/c]):Wp,h=this.En(e,a,n[u%c],r),d=this.dn(e,a,i[u%c],s),f=o.map((t=>this.En(e,a,t,!0)));l.push(...this.createRange(h,d,f))}return l}En(e,t,n,r){const i=new Pp(e,wl.empty(),t,n);return r?i:i.Jt()}dn(e,t,n,r){const i=new Pp(e,wl.empty(),t,n);return r?i.Jt():i}ln(e,t){const n=new Dp(t),r=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next((e=>{let t=null;for(const r of e)n.tn(r)&&(!t||r.fields.length>t.fields.length)&&(t=r);return t}))}getIndexType(e,t){let n=2;const r=this.cn(t);return Ol.forEach(r,(t=>this.ln(e,t).next((e=>{e?0!==n&&e.fields.length<function(e){let t=new Nu(vl.comparator),n=!1;for(const r of e.filters)for(const e of r.getFlattenedFilters())e.field.isKeyField()||("array-contains"===e.op||"array-contains-any"===e.op?n=!0:t=t.add(e.field));for(const r of e.orderBy)r.field.isKeyField()||(t=t.add(r.field));return t.size+(n?1:0)}(t)&&(n=1):n=0})))).next((()=>function(e){return null!==e.limit}(t)&&r.length>1&&2===n?1:n))}An(e,t){const n=new Ap;for(const r of Sl(e)){const e=t.data.field(r.fieldPath);if(null==e)return null;const i=n.Ht(r.kind);Ip.bt.Pt(e,i)}return n.Wt()}Tn(e){const t=new Ap;return Ip.bt.Pt(e,t.Ht(0)),t.Wt()}Rn(e,t){const n=new Ap;return Ip.bt.Pt(Zu(this.databaseId,t),n.Ht(function(e){const t=Sl(e);return 0===t.length?0:t[t.length-1].kind}(e))),n.Wt()}Pn(e,t,n){if(null===n)return[];let r=[];r.push(new Ap);let i=0;for(const s of Sl(e)){const e=n[i++];for(const n of r)if(this.Vn(t,s.fieldPath)&&th(e))r=this.mn(r,s,e);else{const t=n.Ht(s.kind);Ip.bt.Pt(e,t)}}return this.fn(r)}hn(e,t,n){return this.Pn(e,t,n.position)}fn(e){const t=[];for(let n=0;n<e.length;++n)t[n]=e[n].Wt();return t}mn(e,t,n){const r=[...e],i=[];for(const s of n.arrayValue.values||[])for(const e of r){const n=new Ap;n.seed(e.Wt()),Ip.bt.Pt(s,n.Ht(t.kind)),i.push(n)}return i}Vn(e,t){return!!e.filters.find((e=>e instanceof bh&&e.field.isEqual(t)&&("in"===e.op||"not-in"===e.op)))}getFieldIndexes(e,t){const n=$p(e),r=Jp(e);return(t?n.W("collectionGroupIndex",IDBKeyRange.bound(t,t)):n.W()).next((e=>{const t=[];return Ol.forEach(e,(e=>r.get([e.indexId,this.uid]).next((n=>{t.push(function(e,t){const n=t?new Il(t.sequenceNumber,new Cl(hp(t.readTime),new wl(Jl(t.documentKey)),t.largestBatchId)):Il.empty(),r=e.fields.map((e=>{let[t,n]=e;return new El(vl.fromServerFormat(t),n)}));return new bl(e.indexId,e.collectionGroup,r,n)}(e,n))})))).next((()=>t))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((e=>0===e.length?null:(e.sort(((e,t)=>{const n=e.indexState.sequenceNumber-t.indexState.sequenceNumber;return 0!==n?n:ul(e.collectionGroup,t.collectionGroup)})),e[0].collectionGroup)))}updateCollectionGroup(e,t,n){const r=$p(e),i=Jp(e);return this.gn(e).next((e=>r.W("collectionGroupIndex",IDBKeyRange.bound(t,t)).next((t=>Ol.forEach(t,(t=>i.put(vp(t.indexId,this.uid,e,n))))))))}updateIndexEntries(e,t){const n=new Map;return Ol.forEach(t,((t,r)=>{const i=n.get(t.collectionGroup);return(i?Ol.resolve(i):this.getFieldIndexes(e,t.collectionGroup)).next((i=>(n.set(t.collectionGroup,i),Ol.forEach(i,(n=>this.pn(e,t,n).next((t=>{const i=this.yn(r,n);return t.isEqual(i)?Ol.resolve():this.wn(e,r,n,t,i)})))))))}))}Sn(e,t,n,r){return Yp(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.Rn(n,t.key),documentKey:t.key.path.toArray()})}bn(e,t,n,r){return Yp(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.Rn(n,t.key),t.key.path.toArray()])}pn(e,t,n){const r=Yp(e);let i=new Nu(Op);return r.Y({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.Rn(n,t)])},((e,r)=>{i=i.add(new Pp(n.indexId,t,r.arrayValue,r.directionalValue))})).next((()=>i))}yn(e,t){let n=new Nu(Op);const r=this.An(t,e);if(null==r)return n;const i=_l(t);if(null!=i){const s=e.data.field(i.fieldPath);if(th(s))for(const i of s.arrayValue.values||[])n=n.add(new Pp(t.indexId,e.key,this.Tn(i),r))}else n=n.add(new Pp(t.indexId,e.key,Wp,r));return n}wn(e,t,n,r,i){Kc("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const s=[];return function(e,t,n,r,i){const s=e.getIterator(),o=t.getIterator();let a=Pu(s),c=Pu(o);for(;a||c;){let e=!1,t=!1;if(a&&c){const r=n(a,c);r<0?t=!0:r>0&&(e=!0)}else null!=a?t=!0:e=!0;e?(r(c),c=Pu(o)):t?(i(a),a=Pu(s)):(a=Pu(s),c=Pu(o))}}(r,i,Op,(r=>{s.push(this.Sn(e,t,n,r))}),(r=>{s.push(this.bn(e,t,n,r))})),Ol.waitFor(s)}gn(e){let t=1;return Jp(e).Y({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((e,n,r)=>{r.done(),t=n.sequenceNumber+1})).next((()=>t))}createRange(e,t,n){n=n.sort(((e,t)=>Op(e,t))).filter(((e,t,n)=>!t||0!==Op(e,n[t-1])));const r=[];r.push(e);for(const s of n){const n=Op(s,e),i=Op(s,t);if(0===n)r[0]=e.Jt();else if(n>0&&i<0)r.push(s),r.push(s.Jt());else if(i>0)break}r.push(t);const i=[];for(let s=0;s<r.length;s+=2){if(this.Dn(r[s],r[s+1]))return[];const e=[r[s].indexId,this.uid,r[s].arrayValue,r[s].directionalValue,Wp,[]],t=[r[s+1].indexId,this.uid,r[s+1].arrayValue,r[s+1].directionalValue,Wp,[]];i.push(IDBKeyRange.bound(e,t))}return i}Dn(e,t){return Op(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(Xp)}getMinOffset(e,t){return Ol.mapArray(this.cn(t),(t=>this.ln(e,t).next((e=>e||Qc())))).next(Xp)}}function Qp(e){return Su(e,"collectionParents")}function Yp(e){return Su(e,"indexEntries")}function $p(e){return Su(e,"indexConfiguration")}function Jp(e){return Su(e,"indexState")}function Xp(e){Yc(0!==e.length);let t=e[0].indexState.offset,n=t.largestBatchId;for(let r=1;r<e.length;r++){const i=e[r].indexState.offset;xl(i,t)<0&&(t=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new Cl(t.readTime,t.documentKey,n)}const Zp={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class em{constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}static withCacheSize(e){return new em(e,em.DEFAULT_COLLECTION_PERCENTILE,em.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function tm(e,t,n){const r=e.store("mutations"),i=e.store("documentMutations"),s=[],o=IDBKeyRange.only(n.batchId);let a=0;const c=r.Y({range:o},((e,t,n)=>(a++,n.delete())));s.push(c.next((()=>{Yc(1===a)})));const l=[];for(const u of n.mutations){const e=eu(t,u.key.path,n.batchId);s.push(i.delete(e)),l.push(u.key)}return Ol.waitFor(s).next((()=>l))}function nm(e){if(!e)return 0;let t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw Qc();t=e.noDocument}return JSON.stringify(t).length}em.DEFAULT_COLLECTION_PERCENTILE=10,em.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,em.DEFAULT=new em(41943040,em.DEFAULT_COLLECTION_PERCENTILE,em.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),em.DISABLED=new em(-1,0,0);class rm{constructor(e,t,n,r){this.userId=e,this.serializer=t,this.indexManager=n,this.referenceDelegate=r,this.Cn={}}static lt(e,t,n,r){Yc(""!==e.uid);const i=e.isAuthenticated()?e.uid:"";return new rm(i,t,n,r)}checkEmpty(e){let t=!0;const n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return sm(e).Y({index:"userMutationsIndex",range:n},((e,n,r)=>{t=!1,r.done()})).next((()=>t))}addMutationBatch(e,t,n,r){const i=om(e),s=sm(e);return s.add({}).next((o=>{Yc("number"==typeof o);const a=new tf(o,t,n,r),c=function(e,t,n){const r=n.baseMutations.map((t=>Wf(e.ct,t))),i=n.mutations.map((t=>Wf(e.ct,t)));return{userId:t,batchId:n.batchId,localWriteTimeMs:n.localWriteTime.toMillis(),baseMutations:r,mutations:i}}(this.serializer,this.userId,a),l=[];let u=new Nu(((e,t)=>ul(e.canonicalString(),t.canonicalString())));for(const e of r){const t=eu(this.userId,e.key.path,o);u=u.add(e.key.path.popLast()),l.push(s.put(c)),l.push(i.put(t,tu))}return u.forEach((t=>{l.push(this.indexManager.addToCollectionParentIndex(e,t))})),e.addOnCommittedListener((()=>{this.Cn[o]=a.keys()})),Ol.waitFor(l).next((()=>a))}))}lookupMutationBatch(e,t){return sm(e).get(t).next((e=>e?(Yc(e.userId===this.userId),dp(this.serializer,e)):null))}vn(e,t){return this.Cn[t]?Ol.resolve(this.Cn[t]):this.lookupMutationBatch(e,t).next((e=>{if(e){const n=e.keys();return this.Cn[t]=n,n}return null}))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=IDBKeyRange.lowerBound([this.userId,n]);let i=null;return sm(e).Y({index:"userMutationsIndex",range:r},((e,t,r)=>{t.userId===this.userId&&(Yc(t.batchId>=n),i=dp(this.serializer,t)),r.done()})).next((()=>i))}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let n=-1;return sm(e).Y({index:"userMutationsIndex",range:t,reverse:!0},((e,t,r)=>{n=t.batchId,r.done()})).next((()=>n))}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return sm(e).W("userMutationsIndex",t).next((e=>e.map((e=>dp(this.serializer,e)))))}getAllMutationBatchesAffectingDocumentKey(e,t){const n=Zl(this.userId,t.path),r=IDBKeyRange.lowerBound(n),i=[];return om(e).Y({range:r},((n,r,s)=>{const[o,a,c]=n,l=Jl(a);if(o===this.userId&&t.path.isEqual(l))return sm(e).get(c).next((e=>{if(!e)throw Qc();Yc(e.userId===this.userId),i.push(dp(this.serializer,e))}));s.done()})).next((()=>i))}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new Nu(ul);const r=[];return t.forEach((t=>{const i=Zl(this.userId,t.path),s=IDBKeyRange.lowerBound(i),o=om(e).Y({range:s},((e,r,i)=>{const[s,o,a]=e,c=Jl(o);s===this.userId&&t.path.isEqual(c)?n=n.add(a):i.done()}));r.push(o)})),Ol.waitFor(r).next((()=>this.Fn(e,n)))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1,i=Zl(this.userId,n),s=IDBKeyRange.lowerBound(i);let o=new Nu(ul);return om(e).Y({range:s},((e,t,i)=>{const[s,a,c]=e,l=Jl(a);s===this.userId&&n.isPrefixOf(l)?l.length===r&&(o=o.add(c)):i.done()})).next((()=>this.Fn(e,o)))}Fn(e,t){const n=[],r=[];return t.forEach((t=>{r.push(sm(e).get(t).next((e=>{if(null===e)throw Qc();Yc(e.userId===this.userId),n.push(dp(this.serializer,e))})))})),Ol.waitFor(r).next((()=>n))}removeMutationBatch(e,t){return tm(e.ae,this.userId,t).next((n=>(e.addOnCommittedListener((()=>{this.Mn(t.batchId)})),Ol.forEach(n,(t=>this.referenceDelegate.markPotentiallyOrphaned(e,t))))))}Mn(e){delete this.Cn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((t=>{if(!t)return Ol.resolve();const n=IDBKeyRange.lowerBound(function(e){return[e]}(this.userId)),r=[];return om(e).Y({range:n},((e,t,n)=>{if(e[0]===this.userId){const t=Jl(e[1]);r.push(t)}else n.done()})).next((()=>{Yc(0===r.length)}))}))}containsKey(e,t){return im(e,this.userId,t)}xn(e){return am(e).get(this.userId).next((e=>e||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""}))}}function im(e,t,n){const r=Zl(t,n.path),i=r[1],s=IDBKeyRange.lowerBound(r);let o=!1;return om(e).Y({range:s,J:!0},((e,n,r)=>{const[s,a,c]=e;s===t&&a===i&&(o=!0),r.done()})).next((()=>o))}function sm(e){return Su(e,"mutations")}function om(e){return Su(e,"documentMutations")}function am(e){return Su(e,"mutationQueues")}class cm{constructor(e){this.On=e}next(){return this.On+=2,this.On}static Nn(){return new cm(0)}static Ln(){return new cm(-1)}}class lm{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.Bn(e).next((t=>{const n=new cm(t.highestTargetId);return t.highestTargetId=n.next(),this.kn(e,t).next((()=>t.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.Bn(e).next((e=>pl.fromTimestamp(new fl(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.Bn(e).next((e=>e.highestListenSequenceNumber))}setTargetsMetadata(e,t,n){return this.Bn(e).next((r=>(r.highestListenSequenceNumber=t,n&&(r.lastRemoteSnapshotVersion=n.toTimestamp()),t>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=t),this.kn(e,r))))}addTargetData(e,t){return this.qn(e,t).next((()=>this.Bn(e).next((n=>(n.targetCount+=1,this.Qn(t,n),this.kn(e,n))))))}updateTargetData(e,t){return this.qn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next((()=>um(e).delete(t.targetId))).next((()=>this.Bn(e))).next((t=>(Yc(t.targetCount>0),t.targetCount-=1,this.kn(e,t))))}removeTargets(e,t,n){let r=0;const i=[];return um(e).Y(((s,o)=>{const a=fp(o);a.sequenceNumber<=t&&null===n.get(a.targetId)&&(r++,i.push(this.removeTargetData(e,a)))})).next((()=>Ol.waitFor(i))).next((()=>r))}forEachTarget(e,t){return um(e).Y(((e,n)=>{const r=fp(n);t(r)}))}Bn(e){return hm(e).get("targetGlobalKey").next((e=>(Yc(null!==e),e)))}kn(e,t){return hm(e).put("targetGlobalKey",t)}qn(e,t){return um(e).put(pp(this.serializer,t))}Qn(e,t){let n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}getTargetCount(e){return this.Bn(e).next((e=>e.targetCount))}getTargetData(e,t){const n=jh(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]);let i=null;return um(e).Y({range:r,index:"queryTargetsIndex"},((e,n,r)=>{const s=fp(n);zh(t,s.target)&&(i=s,r.done())})).next((()=>i))}addMatchingKeys(e,t,n){const r=[],i=dm(e);return t.forEach((t=>{const s=Ql(t.path);r.push(i.put({targetId:n,path:s})),r.push(this.referenceDelegate.addReference(e,n,t))})),Ol.waitFor(r)}removeMatchingKeys(e,t,n){const r=dm(e);return Ol.forEach(t,(t=>{const i=Ql(t.path);return Ol.waitFor([r.delete([n,i]),this.referenceDelegate.removeReference(e,n,t)])}))}removeMatchingKeysForTargetId(e,t){const n=dm(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}getMatchingKeysForTargetId(e,t){const n=IDBKeyRange.bound([t],[t+1],!1,!0),r=dm(e);let i=bd();return r.Y({range:n,J:!0},((e,t,n)=>{const r=Jl(e[1]),s=new wl(r);i=i.add(s)})).next((()=>i))}containsKey(e,t){const n=Ql(t.path),r=IDBKeyRange.bound([n],[dl(n)],!1,!0);let i=0;return dm(e).Y({index:"documentTargetsIndex",J:!0,range:r},((e,t,n)=>{let[r,s]=e;0!==r&&(i++,n.done())})).next((()=>i>0))}_t(e,t){return um(e).get(t).next((e=>e?fp(e):null))}}function um(e){return Su(e,"targets")}function hm(e){return Su(e,"targetGlobal")}function dm(e){return Su(e,"targetDocuments")}function fm(e,t){let[n,r]=e,[i,s]=t;const o=ul(n,i);return 0===o?ul(r,s):o}class pm{constructor(e){this.Kn=e,this.buffer=new Nu(fm),this.$n=0}Un(){return++this.$n}Wn(e){const t=[e,this.Un()];if(this.buffer.size<this.Kn)this.buffer=this.buffer.add(t);else{const e=this.buffer.last();fm(t,e)<0&&(this.buffer=this.buffer.delete(e).add(t))}}get maxValue(){return this.buffer.last()[0]}}class mm{constructor(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.Gn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.zn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return null!==this.Gn}zn(e){Kc("LruGarbageCollector","Garbage collection scheduled in ".concat(e,"ms")),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Gn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){Fl(e)?Kc("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e):await Pl(e)}await this.zn(3e5)}))}}class gm{constructor(e,t){this.jn=e,this.params=t}calculateTargetCount(e,t){return this.jn.Hn(e).next((e=>Math.floor(t/100*e)))}nthSequenceNumber(e,t){if(0===t)return Ol.resolve(Kl._e);const n=new pm(t);return this.jn.forEachTarget(e,(e=>n.Wn(e.sequenceNumber))).next((()=>this.jn.Jn(e,(e=>n.Wn(e))))).next((()=>n.maxValue))}removeTargets(e,t,n){return this.jn.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.jn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Kc("LruGarbageCollector","Garbage collection skipped; disabled"),Ol.resolve(Zp)):this.getCacheSize(e).next((n=>n<this.params.cacheSizeCollectionThreshold?(Kc("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(n," is lower than threshold ").concat(this.params.cacheSizeCollectionThreshold)),Zp):this.Yn(e,t)))}getCacheSize(e){return this.jn.getCacheSize(e)}Yn(e,t){let n,r,i,s,o,a,c;const l=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((t=>(t>this.params.maximumSequenceNumbersToCollect?(Kc("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(this.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=this.params.maximumSequenceNumbersToCollect):r=t,s=Date.now(),this.nthSequenceNumber(e,r)))).next((r=>(n=r,o=Date.now(),this.removeTargets(e,n,t)))).next((t=>(i=t,a=Date.now(),this.removeOrphanedDocuments(e,n)))).next((e=>(c=Date.now(),qc()<=lr.DEBUG&&Kc("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(s-l,"ms\n\tDetermined least recently used ").concat(r," in ")+(o-s)+"ms\n"+"\tRemoved ".concat(i," targets in ")+(a-o)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(c-a)+"ms\n"+"Total Duration: ".concat(c-l,"ms")),Ol.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e}))))}}function ym(e,t){return new gm(e,t)}class vm{constructor(e,t){this.db=e,this.garbageCollector=ym(this,t)}Hn(e){const t=this.Zn(e);return this.db.getTargetCache().getTargetCount(e).next((e=>t.next((t=>e+t))))}Zn(e){let t=0;return this.Jn(e,(e=>{t++})).next((()=>t))}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Jn(e,t){return this.Xn(e,((e,n)=>t(n)))}addReference(e,t,n){return wm(e,n)}removeReference(e,t,n){return wm(e,n)}removeTargets(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}markPotentiallyOrphaned(e,t){return wm(e,t)}er(e,t){return function(e,t){let n=!1;return am(e).Z((r=>im(e,r,t).next((e=>(e&&(n=!0),Ol.resolve(!e)))))).next((()=>n))}(e,t)}removeOrphanedDocuments(e,t){const n=this.db.getRemoteDocumentCache().newChangeBuffer(),r=[];let i=0;return this.Xn(e,((s,o)=>{if(o<=t){const t=this.er(e,s).next((t=>{if(!t)return i++,n.getEntry(e,s).next((()=>(n.removeEntry(s,pl.min()),dm(e).delete(function(e){return[0,Ql(e.path)]}(s)))))}));r.push(t)}})).next((()=>Ol.waitFor(r))).next((()=>n.apply(e))).next((()=>i))}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}updateLimboDocument(e,t){return wm(e,t)}Xn(e,t){const n=dm(e);let r,i=Kl._e;return n.Y({index:"documentTargetsIndex"},((e,n)=>{let[s,o]=e,{path:a,sequenceNumber:c}=n;0===s?(i!==Kl._e&&t(new wl(Jl(r)),i),i=c,r=a):i=Kl._e})).next((()=>{i!==Kl._e&&t(new wl(Jl(r)),i)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function wm(e,t){return dm(e).put(function(e,t){return{targetId:0,path:Ql(e.path),sequenceNumber:t}}(t,e.currentSequenceNumber))}class bm{constructor(){this.changes=new ld((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,fh.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?Ol.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class _m{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,n){return Tm(e).put(n)}removeEntry(e,t,n){return Tm(e).delete(function(e,t){const n=e.path.toArray();return[n.slice(0,n.length-2),n[n.length-2],lp(t),n[n.length-1]]}(t,n))}updateMetadata(e,t){return this.getMetadata(e).next((n=>(n.byteSize+=t,this.tr(e,n))))}getEntry(e,t){let n=fh.newInvalidDocument(t);return Tm(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(km(t))},((e,r)=>{n=this.nr(t,r)})).next((()=>n))}rr(e,t){let n={size:0,document:fh.newInvalidDocument(t)};return Tm(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(km(t))},((e,r)=>{n={document:this.nr(t,r),size:nm(r)}})).next((()=>n))}getEntries(e,t){let n=hd();return this.ir(e,t,((e,t)=>{const r=this.nr(e,t);n=n.insert(e,r)})).next((()=>n))}sr(e,t){let n=hd(),r=new ku(wl.comparator);return this.ir(e,t,((e,t)=>{const i=this.nr(e,t);n=n.insert(e,i),r=r.insert(e,nm(t))})).next((()=>({documents:n,_r:r})))}ir(e,t,n){if(t.isEmpty())return Ol.resolve();let r=new Nu(xm);t.forEach((e=>r=r.add(e)));const i=IDBKeyRange.bound(km(r.first()),km(r.last())),s=r.getIterator();let o=s.getNext();return Tm(e).Y({index:"documentKeyIndex",range:i},((e,t,r)=>{const i=wl.fromSegments([...t.prefixPath,t.collectionGroup,t.documentId]);for(;o&&xm(o,i)<0;)n(o,null),o=s.getNext();o&&o.isEqual(i)&&(n(o,t),o=s.hasNext()?s.getNext():null),o?r.U(km(o)):r.done()})).next((()=>{for(;o;)n(o,null),o=s.hasNext()?s.getNext():null}))}getDocumentsMatchingQuery(e,t,n,r,i){const s=t.path,o=[s.popLast().toArray(),s.lastSegment(),lp(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],a=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Tm(e).W(IDBKeyRange.bound(o,a,!0)).next((e=>{null==i||i.incrementDocumentReadCount(e.length);let n=hd();for(const i of e){const e=this.nr(wl.fromSegments(i.prefixPath.concat(i.collectionGroup,i.documentId)),i);e.isFoundDocument()&&(sd(t,e)||r.has(e.key))&&(n=n.insert(e.key,e))}return n}))}getAllFromCollectionGroup(e,t,n,r){let i=hd();const s=Cm(t,n),o=Cm(t,Cl.max());return Tm(e).Y({index:"collectionGroupIndex",range:IDBKeyRange.bound(s,o,!0)},((e,t,n)=>{const s=this.nr(wl.fromSegments(t.prefixPath.concat(t.collectionGroup,t.documentId)),t);i=i.insert(s.key,s),i.size===r&&n.done()})).next((()=>i))}newChangeBuffer(e){return new Em(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((e=>e.byteSize))}getMetadata(e){return Im(e).get("remoteDocumentGlobalKey").next((e=>(Yc(!!e),e)))}tr(e,t){return Im(e).put("remoteDocumentGlobalKey",t)}nr(e,t){if(t){const e=function(e,t){let n;if(t.document)n=Gf(e.ct,t.document,!!t.hasCommittedMutations);else if(t.noDocument){const e=wl.fromSegments(t.noDocument.path),r=hp(t.noDocument.readTime);n=fh.newNoDocument(e,r),t.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!t.unknownDocument)return Qc();{const e=wl.fromSegments(t.unknownDocument.path),r=hp(t.unknownDocument.version);n=fh.newUnknownDocument(e,r)}}return t.readTime&&n.setReadTime(function(e){const t=new fl(e[0],e[1]);return pl.fromTimestamp(t)}(t.readTime)),n}(this.serializer,t);if(!e.isNoDocument()||!e.version.isEqual(pl.min()))return e}return fh.newInvalidDocument(e)}}function Sm(e){return new _m(e)}class Em extends bm{constructor(e,t){super(),this.ar=e,this.trackRemovals=t,this.ur=new ld((e=>e.toString()),((e,t)=>e.isEqual(t)))}applyChanges(e){const t=[];let n=0,r=new Nu(((e,t)=>ul(e.canonicalString(),t.canonicalString())));return this.changes.forEach(((i,s)=>{const o=this.ur.get(i);if(t.push(this.ar.removeEntry(e,i,o.readTime)),s.isValidDocument()){const a=cp(this.ar.serializer,s);r=r.add(i.path.popLast());const c=nm(a);n+=c-o.size,t.push(this.ar.addEntry(e,i,a))}else if(n-=o.size,this.trackRemovals){const n=cp(this.ar.serializer,s.convertToNoDocument(pl.min()));t.push(this.ar.addEntry(e,i,n))}})),r.forEach((n=>{t.push(this.ar.indexManager.addToCollectionParentIndex(e,n))})),t.push(this.ar.updateMetadata(e,n)),Ol.waitFor(t)}getFromCache(e,t){return this.ar.rr(e,t).next((e=>(this.ur.set(t,{size:e.size,readTime:e.document.readTime}),e.document)))}getAllFromCache(e,t){return this.ar.sr(e,t).next((e=>{let{documents:t,_r:n}=e;return n.forEach(((e,n)=>{this.ur.set(e,{size:n,readTime:t.get(e).readTime})})),t}))}}function Im(e){return Su(e,"remoteDocumentGlobal")}function Tm(e){return Su(e,"remoteDocumentsV14")}function km(e){const t=e.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function Cm(e,t){const n=t.documentKey.path.toArray();return[e,lp(t.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function xm(e,t){const n=e.path.toArray(),r=t.path.toArray();let i=0;for(let s=0;s<n.length-2&&s<r.length-2;++s)if(i=ul(n[s],r[s]),i)return i;return i=ul(n.length,r.length),i||(i=ul(n[n.length-2],r[r.length-2]),i||ul(n[n.length-1],r[r.length-1]))}class Nm{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class Am{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next((r=>(n=r,this.remoteDocumentCache.getEntry(e,t)))).next((e=>(null!==n&&Gd(n.mutation,e,Ou.empty(),fl.now()),e)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.getLocalViewOfDocuments(e,t,bd()).next((()=>t))))}getLocalViewOfDocuments(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:bd();const r=md();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,n).next((e=>{let t=fd();return e.forEach(((e,n)=>{t=t.insert(e,n.overlayedDocument)})),t}))))}getOverlayedDocuments(e,t){const n=md();return this.populateOverlays(e,n,t).next((()=>this.computeViews(e,t,n,bd())))}populateOverlays(e,t,n){const r=[];return n.forEach((e=>{t.has(e)||r.push(e)})),this.documentOverlayCache.getOverlays(e,r).next((e=>{e.forEach(((e,n)=>{t.set(e,n)}))}))}computeViews(e,t,n,r){let i=hd();const s=yd(),o=yd();return t.forEach(((e,t)=>{const o=n.get(t.key);r.has(t.key)&&(void 0===o||o.mutation instanceof Yd)?i=i.insert(t.key,t):void 0!==o?(s.set(t.key,o.mutation.getFieldMask()),Gd(o.mutation,t,o.mutation.getFieldMask(),fl.now())):s.set(t.key,Ou.empty())})),this.recalculateAndSaveOverlays(e,i).next((e=>(e.forEach(((e,t)=>s.set(e,t))),t.forEach(((e,t)=>{var n;return o.set(e,new Nm(t,null!==(n=s.get(e))&&void 0!==n?n:null))})),o)))}recalculateAndSaveOverlays(e,t){const n=yd();let r=new ku(((e,t)=>e-t)),i=bd();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((e=>{for(const i of e)i.keys().forEach((e=>{const s=t.get(e);if(null===s)return;let o=n.get(e)||Ou.empty();o=i.applyToLocalView(s,o),n.set(e,o);const a=(r.get(i.batchId)||bd()).add(e);r=r.insert(i.batchId,a)}))})).next((()=>{const s=[],o=r.getReverseIterator();for(;o.hasNext();){const r=o.getNext(),a=r.key,c=r.value,l=gd();c.forEach((e=>{if(!i.has(e)){const r=qd(t.get(e),n.get(e));null!==r&&l.set(e,r),i=i.add(e)}})),s.push(this.documentOverlayCache.saveOverlays(e,a,l))}return Ol.waitFor(s)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.recalculateAndSaveOverlays(e,t)))}getDocumentsMatchingQuery(e,t,n,r){return function(e){return wl.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):$h(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,r):this.getDocumentsMatchingCollectionQuery(e,t,n,r)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((i=>{const s=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-i.size):Ol.resolve(md());let o=-1,a=i;return s.next((t=>Ol.forEach(t,((t,n)=>(o<n.largestBatchId&&(o=n.largestBatchId),i.get(t)?Ol.resolve():this.remoteDocumentCache.getEntry(e,t).next((e=>{a=a.insert(t,e)}))))).next((()=>this.populateOverlays(e,t,i))).next((()=>this.computeViews(e,a,t,bd()))).next((e=>({batchId:o,changes:pd(e)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new wl(t)).next((e=>{let t=fd();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}getDocumentsMatchingCollectionGroupQuery(e,t,n,r){const i=t.collectionGroup;let s=fd();return this.indexManager.getCollectionParents(e,i).next((o=>Ol.forEach(o,(o=>{const a=function(e,t){return new Wh(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(i));return this.getDocumentsMatchingCollectionQuery(e,a,n,r).next((e=>{e.forEach(((e,t)=>{s=s.insert(e,t)}))}))})).next((()=>s))))}getDocumentsMatchingCollectionQuery(e,t,n,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((s=>(i=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,i,r)))).next((e=>{i.forEach(((t,n)=>{const r=n.getKey();null===e.get(r)&&(e=e.insert(r,fh.newInvalidDocument(r)))}));let n=fd();return e.forEach(((e,r)=>{const s=i.get(e);void 0!==s&&Gd(s.mutation,r,Ou.empty(),fl.now()),sd(t,r)&&(n=n.insert(e,r))})),n}))}}class Pm{constructor(e){this.serializer=e,this.cr=new Map,this.lr=new Map}getBundleMetadata(e,t){return Ol.resolve(this.cr.get(t))}saveBundleMetadata(e,t){return this.cr.set(t.id,function(e){return{id:e.id,version:e.version,createTime:Df(e.createTime)}}(t)),Ol.resolve()}getNamedQuery(e,t){return Ol.resolve(this.lr.get(t))}saveNamedQuery(e,t){return this.lr.set(t.name,function(e){return{name:e.name,query:mp(e.bundledQuery),readTime:Df(e.readTime)}}(t)),Ol.resolve()}}class Om{constructor(){this.overlays=new ku(wl.comparator),this.hr=new Map}getOverlay(e,t){return Ol.resolve(this.overlays.get(t))}getOverlays(e,t){const n=md();return Ol.forEach(t,(t=>this.getOverlay(e,t).next((e=>{null!==e&&n.set(t,e)})))).next((()=>n))}saveOverlays(e,t,n){return n.forEach(((n,r)=>{this.ht(e,t,r)})),Ol.resolve()}removeOverlaysForBatchId(e,t,n){const r=this.hr.get(n);return void 0!==r&&(r.forEach((e=>this.overlays=this.overlays.remove(e))),this.hr.delete(n)),Ol.resolve()}getOverlaysForCollection(e,t,n){const r=md(),i=t.length+1,s=new wl(t.child("")),o=this.overlays.getIteratorFrom(s);for(;o.hasNext();){const e=o.getNext().value,s=e.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&e.largestBatchId>n&&r.set(e.getKey(),e)}return Ol.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let i=new ku(((e,t)=>e-t));const s=this.overlays.getIterator();for(;s.hasNext();){const e=s.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=i.get(e.largestBatchId);null===t&&(t=md(),i=i.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const o=md(),a=i.getIterator();for(;a.hasNext()&&(a.getNext().value.forEach(((e,t)=>o.set(e,t))),!(o.size()>=r)););return Ol.resolve(o)}ht(e,t,n){const r=this.overlays.get(n.key);if(null!==r){const e=this.hr.get(r.largestBatchId).delete(n.key);this.hr.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new rf(t,n));let i=this.hr.get(t);void 0===i&&(i=bd(),this.hr.set(t,i)),this.hr.set(t,i.add(n.key))}}class Rm{constructor(){this.Pr=new Nu(Dm.Ir),this.Tr=new Nu(Dm.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(e,t){const n=new Dm(e,t);this.Pr=this.Pr.add(n),this.Tr=this.Tr.add(n)}dr(e,t){e.forEach((e=>this.addReference(e,t)))}removeReference(e,t){this.Ar(new Dm(e,t))}Rr(e,t){e.forEach((e=>this.removeReference(e,t)))}Vr(e){const t=new wl(new gl([])),n=new Dm(t,e),r=new Dm(t,e+1),i=[];return this.Tr.forEachInRange([n,r],(e=>{this.Ar(e),i.push(e.key)})),i}mr(){this.Pr.forEach((e=>this.Ar(e)))}Ar(e){this.Pr=this.Pr.delete(e),this.Tr=this.Tr.delete(e)}gr(e){const t=new wl(new gl([])),n=new Dm(t,e),r=new Dm(t,e+1);let i=bd();return this.Tr.forEachInRange([n,r],(e=>{i=i.add(e.key)})),i}containsKey(e){const t=new Dm(e,0),n=this.Pr.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class Dm{constructor(e,t){this.key=e,this.pr=t}static Ir(e,t){return wl.comparator(e.key,t.key)||ul(e.pr,t.pr)}static Er(e,t){return ul(e.pr,t.pr)||wl.comparator(e.key,t.key)}}class Lm{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.yr=1,this.wr=new Nu(Dm.Ir)}checkEmpty(e){return Ol.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,r){const i=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new tf(i,t,n,r);this.mutationQueue.push(s);for(const o of r)this.wr=this.wr.add(new Dm(o.key,i)),this.indexManager.addToCollectionParentIndex(e,o.key.path.popLast());return Ol.resolve(s)}lookupMutationBatch(e,t){return Ol.resolve(this.Sr(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this.br(n),i=r<0?0:r;return Ol.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return Ol.resolve(0===this.mutationQueue.length?-1:this.yr-1)}getAllMutationBatches(e){return Ol.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new Dm(t,0),r=new Dm(t,Number.POSITIVE_INFINITY),i=[];return this.wr.forEachInRange([n,r],(e=>{const t=this.Sr(e.pr);i.push(t)})),Ol.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new Nu(ul);return t.forEach((e=>{const t=new Dm(e,0),r=new Dm(e,Number.POSITIVE_INFINITY);this.wr.forEachInRange([t,r],(e=>{n=n.add(e.pr)}))})),Ol.resolve(this.Dr(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let i=n;wl.isDocumentKey(i)||(i=i.child(""));const s=new Dm(new wl(i),0);let o=new Nu(ul);return this.wr.forEachWhile((e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.pr)),!0)}),s),Ol.resolve(this.Dr(o))}Dr(e){const t=[];return e.forEach((e=>{const n=this.Sr(e);null!==n&&t.push(n)})),t}removeMutationBatch(e,t){Yc(0===this.Cr(t.batchId,"removed")),this.mutationQueue.shift();let n=this.wr;return Ol.forEach(t.mutations,(r=>{const i=new Dm(r.key,t.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)})).next((()=>{this.wr=n}))}Mn(e){}containsKey(e,t){const n=new Dm(t,0),r=this.wr.firstAfterOrEqual(n);return Ol.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,Ol.resolve()}Cr(e,t){return this.br(e)}br(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Sr(e){const t=this.br(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class Mm{constructor(e){this.vr=e,this.docs=new ku(wl.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,r=this.docs.get(n),i=r?r.size:0,s=this.vr(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:s}),this.size+=s-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return Ol.resolve(n?n.document.mutableCopy():fh.newInvalidDocument(t))}getEntries(e,t){let n=hd();return t.forEach((e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():fh.newInvalidDocument(e))})),Ol.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let i=hd();const s=t.path,o=new wl(s.child("")),a=this.docs.getIteratorFrom(o);for(;a.hasNext();){const{key:e,value:{document:o}}=a.getNext();if(!s.isPrefixOf(e.path))break;e.path.length>s.length+1||xl(kl(o),n)<=0||(r.has(o.key)||sd(t,o))&&(i=i.insert(o.key,o.mutableCopy()))}return Ol.resolve(i)}getAllFromCollectionGroup(e,t,n,r){Qc()}Fr(e,t){return Ol.forEach(this.docs,(e=>t(e)))}newChangeBuffer(e){return new Fm(this)}getSize(e){return Ol.resolve(this.size)}}class Fm extends bm{constructor(e){super(),this.ar=e}applyChanges(e){const t=[];return this.changes.forEach(((n,r)=>{r.isValidDocument()?t.push(this.ar.addEntry(e,r)):this.ar.removeEntry(n)})),Ol.waitFor(t)}getFromCache(e,t){return this.ar.getEntry(e,t)}getAllFromCache(e,t){return this.ar.getEntries(e,t)}}class Um{constructor(e){this.persistence=e,this.Mr=new ld((e=>jh(e)),zh),this.lastRemoteSnapshotVersion=pl.min(),this.highestTargetId=0,this.Or=0,this.Nr=new Rm,this.targetCount=0,this.Lr=cm.Nn()}forEachTarget(e,t){return this.Mr.forEach(((e,n)=>t(n))),Ol.resolve()}getLastRemoteSnapshotVersion(e){return Ol.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Ol.resolve(this.Or)}allocateTargetId(e){return this.highestTargetId=this.Lr.next(),Ol.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Or&&(this.Or=t),Ol.resolve()}qn(e){this.Mr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Lr=new cm(t),this.highestTargetId=t),e.sequenceNumber>this.Or&&(this.Or=e.sequenceNumber)}addTargetData(e,t){return this.qn(t),this.targetCount+=1,Ol.resolve()}updateTargetData(e,t){return this.qn(t),Ol.resolve()}removeTargetData(e,t){return this.Mr.delete(t.target),this.Nr.Vr(t.targetId),this.targetCount-=1,Ol.resolve()}removeTargets(e,t,n){let r=0;const i=[];return this.Mr.forEach(((s,o)=>{o.sequenceNumber<=t&&null===n.get(o.targetId)&&(this.Mr.delete(s),i.push(this.removeMatchingKeysForTargetId(e,o.targetId)),r++)})),Ol.waitFor(i).next((()=>r))}getTargetCount(e){return Ol.resolve(this.targetCount)}getTargetData(e,t){const n=this.Mr.get(t)||null;return Ol.resolve(n)}addMatchingKeys(e,t,n){return this.Nr.dr(t,n),Ol.resolve()}removeMatchingKeys(e,t,n){this.Nr.Rr(t,n);const r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((t=>{i.push(r.markPotentiallyOrphaned(e,t))})),Ol.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this.Nr.Vr(t),Ol.resolve()}getMatchingKeysForTargetId(e,t){const n=this.Nr.gr(t);return Ol.resolve(n)}containsKey(e,t){return Ol.resolve(this.Nr.containsKey(t))}}class Vm{constructor(e,t){this.Br={},this.overlays={},this.kr=new Kl(0),this.qr=!1,this.qr=!0,this.referenceDelegate=e(this),this.Qr=new Um(this),this.indexManager=new Kp,this.remoteDocumentCache=function(e){return new Mm(e)}((e=>this.referenceDelegate.Kr(e))),this.serializer=new ap(t),this.$r=new Pm(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Om,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.Br[e.toKey()];return n||(n=new Lm(t,this.referenceDelegate),this.Br[e.toKey()]=n),n}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(e,t,n){Kc("MemoryPersistence","Starting transaction:",e);const r=new jm(this.kr.next());return this.referenceDelegate.Ur(),n(r).next((e=>this.referenceDelegate.Wr(r).next((()=>e)))).toPromise().then((e=>(r.raiseOnCommittedEvent(),e)))}Gr(e,t){return Ol.or(Object.values(this.Br).map((n=>()=>n.containsKey(e,t))))}}class jm extends Al{constructor(e){super(),this.currentSequenceNumber=e}}class zm{constructor(e){this.persistence=e,this.zr=new Rm,this.jr=null}static Hr(e){return new zm(e)}get Jr(){if(this.jr)return this.jr;throw Qc()}addReference(e,t,n){return this.zr.addReference(n,t),this.Jr.delete(n.toString()),Ol.resolve()}removeReference(e,t,n){return this.zr.removeReference(n,t),this.Jr.add(n.toString()),Ol.resolve()}markPotentiallyOrphaned(e,t){return this.Jr.add(t.toString()),Ol.resolve()}removeTarget(e,t){this.zr.Vr(t.targetId).forEach((e=>this.Jr.add(e.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next((e=>{e.forEach((e=>this.Jr.add(e.toString())))})).next((()=>n.removeTargetData(e,t)))}Ur(){this.jr=new Set}Wr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Ol.forEach(this.Jr,(n=>{const r=wl.fromPath(n);return this.Yr(e,r).next((e=>{e||t.removeEntry(r,pl.min())}))})).next((()=>(this.jr=null,t.apply(e))))}updateLimboDocument(e,t){return this.Yr(e,t).next((e=>{e?this.Jr.delete(t.toString()):this.Jr.add(t.toString())}))}Kr(e){return 0}Yr(e,t){return Ol.or([()=>Ol.resolve(this.zr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Gr(e,t)])}}class Bm{constructor(e){this.serializer=e}N(e,t,n,r){const i=new Rl("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore("owner")}(e),function(e){e.createObjectStore("mutationQueues",{keyPath:"userId"}),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Xl,{unique:!0}),e.createObjectStore("documentMutations")}(e),qm(e),function(e){e.createObjectStore("remoteDocuments")}(e));let s=Ol.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore("targetDocuments"),e.deleteObjectStore("targets"),e.deleteObjectStore("targetGlobal")}(e),qm(e)),s=s.next((()=>function(e){const t=e.store("targetGlobal"),n={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:pl.min().toTimestamp(),targetCount:0};return t.put("targetGlobalKey",n)}(i)))),n<4&&r>=4&&(0!==n&&(s=s.next((()=>function(e,t){return t.store("mutations").W().next((n=>{e.deleteObjectStore("mutations"),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Xl,{unique:!0});const r=t.store("mutations"),i=n.map((e=>r.put(e)));return Ol.waitFor(i)}))}(e,i)))),s=s.next((()=>{!function(e){e.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)}))),n<5&&r>=5&&(s=s.next((()=>this.Xr(i)))),n<6&&r>=6&&(s=s.next((()=>(function(e){e.createObjectStore("remoteDocumentGlobal")}(e),this.ei(i))))),n<7&&r>=7&&(s=s.next((()=>this.ti(i)))),n<8&&r>=8&&(s=s.next((()=>this.ni(e,i)))),n<9&&r>=9&&(s=s.next((()=>{!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e)}))),n<10&&r>=10&&(s=s.next((()=>this.ri(i)))),n<11&&r>=11&&(s=s.next((()=>{!function(e){e.createObjectStore("bundles",{keyPath:"bundleId"})}(e),function(e){e.createObjectStore("namedQueries",{keyPath:"name"})}(e)}))),n<12&&r>=12&&(s=s.next((()=>{!function(e){const t=e.createObjectStore("documentOverlays",{keyPath:fu});t.createIndex("collectionPathOverlayIndex",pu,{unique:!1}),t.createIndex("collectionGroupOverlayIndex",mu,{unique:!1})}(e)}))),n<13&&r>=13&&(s=s.next((()=>function(e){const t=e.createObjectStore("remoteDocumentsV14",{keyPath:nu});t.createIndex("documentKeyIndex",ru),t.createIndex("collectionGroupIndex",iu)}(e))).next((()=>this.ii(e,i))).next((()=>e.deleteObjectStore("remoteDocuments")))),n<14&&r>=14&&(s=s.next((()=>this.si(e,i)))),n<15&&r>=15&&(s=s.next((()=>function(e){e.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),e.createObjectStore("indexState",{keyPath:lu}).createIndex("sequenceNumberIndex",uu,{unique:!1}),e.createObjectStore("indexEntries",{keyPath:hu}).createIndex("documentKeyIndex",du,{unique:!1})}(e)))),s}ei(e){let t=0;return e.store("remoteDocuments").Y(((e,n)=>{t+=nm(n)})).next((()=>{const n={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)}))}Xr(e){const t=e.store("mutationQueues"),n=e.store("mutations");return t.W().next((t=>Ol.forEach(t,(t=>{const r=IDBKeyRange.bound([t.userId,-1],[t.userId,t.lastAcknowledgedBatchId]);return n.W("userMutationsIndex",r).next((n=>Ol.forEach(n,(n=>{Yc(n.userId===t.userId);const r=dp(this.serializer,n);return tm(e,t.userId,r).next((()=>{}))}))))}))))}ti(e){const t=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next((e=>{const r=[];return n.Y(((n,i)=>{const s=new gl(n),o=function(e){return[0,Ql(e)]}(s);r.push(t.get(o).next((n=>n?Ol.resolve():(n=>t.put({targetId:0,path:Ql(n),sequenceNumber:e.highestListenSequenceNumber}))(s))))})).next((()=>Ol.waitFor(r)))}))}ni(e,t){e.createObjectStore("collectionParents",{keyPath:cu});const n=t.store("collectionParents"),r=new Gp,i=e=>{if(r.add(e)){const t=e.lastSegment(),r=e.popLast();return n.put({collectionId:t,parent:Ql(r)})}};return t.store("remoteDocuments").Y({J:!0},((e,t)=>{const n=new gl(e);return i(n.popLast())})).next((()=>t.store("documentMutations").Y({J:!0},((e,t)=>{let[n,r,s]=e;const o=Jl(r);return i(o.popLast())}))))}ri(e){const t=e.store("targets");return t.Y(((e,n)=>{const r=fp(n),i=pp(this.serializer,r);return t.put(i)}))}ii(e,t){const n=t.store("remoteDocuments"),r=[];return n.Y(((e,n)=>{const i=t.store("remoteDocumentsV14"),s=function(e){return e.document?new wl(gl.fromString(e.document.name).popFirst(5)):e.noDocument?wl.fromSegments(e.noDocument.path):e.unknownDocument?wl.fromSegments(e.unknownDocument.path):Qc()}(n).path.toArray(),o={prefixPath:s.slice(0,s.length-2),collectionGroup:s[s.length-2],documentId:s[s.length-1],readTime:n.readTime||[0,0],unknownDocument:n.unknownDocument,noDocument:n.noDocument,document:n.document,hasCommittedMutations:!!n.hasCommittedMutations};r.push(i.put(o))})).next((()=>Ol.waitFor(r)))}si(e,t){const n=t.store("mutations"),r=Sm(this.serializer),i=new Vm(zm.Hr,this.serializer.ct);return n.W().next((e=>{const n=new Map;return e.forEach((e=>{var t;let r=null!==(t=n.get(e.userId))&&void 0!==t?t:bd();dp(this.serializer,e).keys().forEach((e=>r=r.add(e))),n.set(e.userId,r)})),Ol.forEach(n,((e,n)=>{const s=new jc(n),o=Sp.lt(this.serializer,s),a=i.getIndexManager(s),c=rm.lt(s,this.serializer,a,i.referenceDelegate);return new Am(r,c,o,a).recalculateAndSaveOverlaysForDocumentKeys(new _u(t,Kl._e),e).next()}))}))}}function qm(e){e.createObjectStore("targetDocuments",{keyPath:ou}).createIndex("documentTargetsIndex",au,{unique:!0}),e.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",su,{unique:!0}),e.createObjectStore("targetGlobal")}const Km="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Gm{constructor(e,t,n,r,i,s,o,a,c,l){let u=arguments.length>10&&void 0!==arguments[10]?arguments[10]:15;if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=n,this.oi=i,this.window=s,this.document=o,this._i=c,this.ai=l,this.ui=u,this.kr=null,this.qr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.li=null,this.hi=null,this.Pi=Number.NEGATIVE_INFINITY,this.Ii=e=>Promise.resolve(),!Gm.D())throw new Xc(Jc.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new vm(this,r),this.Ti=t+"main",this.serializer=new ap(a),this.Ei=new Dl(this.Ti,this.ui,new Bm(this.serializer)),this.Qr=new lm(this.referenceDelegate,this.serializer),this.remoteDocumentCache=Sm(this.serializer),this.$r=new wp,this.window&&this.window.localStorage?this.di=this.window.localStorage:(this.di=null,!1===l&&Gc("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Ai().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Xc(Jc.FAILED_PRECONDITION,Km);return this.Ri(),this.Vi(),this.mi(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.Qr.getHighestSequenceNumber(e)))})).then((e=>{this.kr=new Kl(e,this._i)})).then((()=>{this.qr=!0})).catch((e=>(this.Ei&&this.Ei.close(),Promise.reject(e))))}fi(e){return this.Ii=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ei.B((async t=>{null===t.newVersion&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.oi.enqueueAndForget((async()=>{this.started&&await this.Ai()})))}Ai(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>Hm(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.gi(e).next((e=>{e||(this.isPrimary=!1,this.oi.enqueueRetryable((()=>this.Ii(!1))))}))})).next((()=>this.pi(e))).next((t=>this.isPrimary&&!t?this.yi(e).next((()=>!1)):!!t&&this.wi(e).next((()=>!0)))))).catch((e=>{if(Fl(e))return Kc("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Kc("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.oi.enqueueRetryable((()=>this.Ii(e))),this.isPrimary=e}))}gi(e){return Wm(e).get("owner").next((e=>Ol.resolve(this.Si(e))))}bi(e){return Hm(e).delete(this.clientId)}async Di(){if(this.isPrimary&&!this.Ci(this.Pi,18e5)){this.Pi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(e=>{const t=Su(e,"clientMetadata");return t.W().next((e=>{const n=this.vi(e,18e5),r=e.filter((e=>-1===n.indexOf(e)));return Ol.forEach(r,(e=>t.delete(e.clientId))).next((()=>r))}))})).catch((()=>[]));if(this.di)for(const t of e)this.di.removeItem(this.Fi(t.clientId))}}mi(){this.hi=this.oi.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.Ai().then((()=>this.Di())).then((()=>this.mi()))))}Si(e){return!!e&&e.ownerId===this.clientId}pi(e){return this.ai?Ol.resolve(!0):Wm(e).get("owner").next((t=>{if(null!==t&&this.Ci(t.leaseTimestampMs,5e3)&&!this.Mi(t.ownerId)){if(this.Si(t)&&this.networkEnabled)return!0;if(!this.Si(t)){if(!t.allowTabSynchronization)throw new Xc(Jc.FAILED_PRECONDITION,Km);return!1}}return!(!this.networkEnabled||!this.inForeground)||Hm(e).W().next((e=>void 0===this.vi(e,5e3).find((e=>{if(this.clientId!==e.clientId){const t=!this.networkEnabled&&e.networkEnabled,n=!this.inForeground&&e.inForeground,r=this.networkEnabled===e.networkEnabled;if(t||n&&r)return!0}return!1}))))})).next((e=>(this.isPrimary!==e&&Kc("IndexedDbPersistence","Client ".concat(e?"is":"is not"," eligible for a primary lease.")),e)))}async shutdown(){this.qr=!1,this.xi(),this.hi&&(this.hi.cancel(),this.hi=null),this.Oi(),this.Ni(),await this.Ei.runTransaction("shutdown","readwrite",["owner","clientMetadata"],(e=>{const t=new _u(e,Kl._e);return this.yi(t).next((()=>this.bi(t)))})),this.Ei.close(),this.Li()}vi(e,t){return e.filter((e=>this.Ci(e.updateTimeMs,t)&&!this.Mi(e.clientId)))}Bi(){return this.runTransaction("getActiveClients","readonly",(e=>Hm(e).W().next((e=>this.vi(e,18e5).map((e=>e.clientId))))))}get started(){return this.qr}getMutationQueue(e,t){return rm.lt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new Hp(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return Sp.lt(this.serializer,e)}getBundleCache(){return this.$r}runTransaction(e,t,n){Kc("IndexedDbPersistence","Starting transaction:",e);const r="readonly"===t?"readonly":"readwrite",i=function(e){return 15===e?bu:14===e?wu:13===e?vu:12===e?yu:11===e?gu:void Qc()}(this.ui);let s;return this.Ei.runTransaction(e,r,i,(r=>(s=new _u(r,this.kr?this.kr.next():Kl._e),"readwrite-primary"===t?this.gi(s).next((e=>!!e||this.pi(s))).next((t=>{if(!t)throw Gc("Failed to obtain primary lease for action '".concat(e,"'.")),this.isPrimary=!1,this.oi.enqueueRetryable((()=>this.Ii(!1))),new Xc(Jc.FAILED_PRECONDITION,Nl);return n(s)})).next((e=>this.wi(s).next((()=>e)))):this.ki(s).next((()=>n(s)))))).then((e=>(s.raiseOnCommittedEvent(),e)))}ki(e){return Wm(e).get("owner").next((e=>{if(null!==e&&this.Ci(e.leaseTimestampMs,5e3)&&!this.Mi(e.ownerId)&&!this.Si(e)&&!(this.ai||this.allowTabSynchronization&&e.allowTabSynchronization))throw new Xc(Jc.FAILED_PRECONDITION,Km)}))}wi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Wm(e).put("owner",t)}static D(){return Dl.D()}yi(e){const t=Wm(e);return t.get("owner").next((e=>this.Si(e)?(Kc("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):Ol.resolve()))}Ci(e,t){const n=Date.now();return!(e<n-t)&&(!(e>n)||(Gc("Detected an update time that is in the future: ".concat(e," > ").concat(n)),!1))}Ri(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.li=()=>{this.oi.enqueueAndForget((()=>(this.inForeground="visible"===this.document.visibilityState,this.Ai())))},this.document.addEventListener("visibilitychange",this.li),this.inForeground="visible"===this.document.visibilityState)}Oi(){this.li&&(this.document.removeEventListener("visibilitychange",this.li),this.li=null)}Vi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ci=()=>{this.xi();const e=/(?:Version|Mobile)\/1[456]/;qn()&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&this.oi.enterRestrictedMode(!0),this.oi.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.ci))}Ni(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Mi(e){var t;try{const n=null!==(null===(t=this.di)||void 0===t?void 0:t.getItem(this.Fi(e)));return Kc("IndexedDbPersistence","Client '".concat(e,"' ").concat(n?"is":"is not"," zombied in LocalStorage")),n}catch(e){return Gc("IndexedDbPersistence","Failed to get zombied client id.",e),!1}}xi(){if(this.di)try{this.di.setItem(this.Fi(this.clientId),String(Date.now()))}catch(e){Gc("Failed to set zombie client id.",e)}}Li(){if(this.di)try{this.di.removeItem(this.Fi(this.clientId))}catch(e){}}Fi(e){return"firestore_zombie_".concat(this.persistenceKey,"_").concat(e)}}function Wm(e){return Su(e,"owner")}function Hm(e){return Su(e,"clientMetadata")}function Qm(e,t){let n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}class Ym{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.qi=n,this.Qi=r}static Ki(e,t){let n=bd(),r=bd();for(const i of t.docChanges)switch(i.type){case 0:n=n.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new Ym(e,t.fromCache,n,r)}}class $m{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class Jm{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=qn()?8:Dl.v(Un())>0?6:4}initialize(e,t){this.zi=e,this.indexManager=t,this.$i=!0}getDocumentsMatchingQuery(e,t,n,r){const i={result:null};return this.ji(e,t).next((e=>{i.result=e})).next((()=>{if(!i.result)return this.Hi(e,t,r,n).next((e=>{i.result=e}))})).next((()=>{if(i.result)return;const n=new $m;return this.Ji(e,t,n).next((r=>{if(i.result=r,this.Ui)return this.Yi(e,t,n,r.size)}))})).next((()=>i.result))}Yi(e,t,n,r){return n.documentReadCount<this.Wi?(qc()<=lr.DEBUG&&Kc("QueryEngine","SDK will not create cache indexes for query:",id(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),Ol.resolve()):(qc()<=lr.DEBUG&&Kc("QueryEngine","Query:",id(t),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.Gi*r?(qc()<=lr.DEBUG&&Kc("QueryEngine","The SDK decides to create cache indexes for query:",id(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Xh(t))):Ol.resolve())}ji(e,t){if(Yh(t))return Ol.resolve(null);let n=Xh(t);return this.indexManager.getIndexType(e,n).next((r=>0===r?null:(null!==t.limit&&1===r&&(t=td(t,null,"F"),n=Xh(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next((r=>{const i=bd(...r);return this.zi.getDocuments(e,i).next((r=>this.indexManager.getMinOffset(e,n).next((n=>{const s=this.Zi(t,r);return this.Xi(t,s,i,n.readTime)?this.ji(e,td(t,null,"F")):this.es(e,s,t,n)}))))})))))}Hi(e,t,n,r){return Yh(t)||r.isEqual(pl.min())?Ol.resolve(null):this.zi.getDocuments(e,n).next((i=>{const s=this.Zi(t,i);return this.Xi(t,s,n,r)?Ol.resolve(null):(qc()<=lr.DEBUG&&Kc("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),id(t)),this.es(e,s,t,Tl(r,-1)).next((e=>e)))}))}Zi(e,t){let n=new Nu(ad(e));return t.forEach(((t,r)=>{sd(e,r)&&(n=n.add(r))})),n}Xi(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Ji(e,t,n){return qc()<=lr.DEBUG&&Kc("QueryEngine","Using full collection scan to execute query:",id(t)),this.zi.getDocumentsMatchingQuery(e,t,Cl.min(),n)}es(e,t,n,r){return this.zi.getDocumentsMatchingQuery(e,n,r).next((e=>(t.forEach((t=>{e=e.insert(t.key,t)})),e)))}}class Xm{constructor(e,t,n,r){this.persistence=e,this.ts=t,this.serializer=r,this.ns=new ku(ul),this.rs=new ld((e=>jh(e)),zh),this.ss=new Map,this.os=e.getRemoteDocumentCache(),this.Qr=e.getTargetCache(),this.$r=e.getBundleCache(),this._s(n)}_s(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Am(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.ns)))}}function Zm(e,t,n,r){return new Xm(e,t,n,r)}async function eg(e,t){const n=$c(e);return await n.persistence.runTransaction("Handle user change","readonly",(e=>{let r;return n.mutationQueue.getAllMutationBatches(e).next((i=>(r=i,n._s(t),n.mutationQueue.getAllMutationBatches(e)))).next((t=>{const i=[],s=[];let o=bd();for(const e of r){i.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}for(const e of t){s.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}return n.localDocuments.getDocuments(e,o).next((e=>({us:e,removedBatchIds:i,addedBatchIds:s})))}))}))}function tg(e){const t=$c(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(e=>t.Qr.getLastRemoteSnapshotVersion(e)))}function ng(e,t,n){let r=bd(),i=bd();return n.forEach((e=>r=r.add(e))),t.getEntries(e,r).next((e=>{let r=hd();return n.forEach(((n,s)=>{const o=e.get(n);s.isFoundDocument()!==o.isFoundDocument()&&(i=i.add(n)),s.isNoDocument()&&s.version.isEqual(pl.min())?(t.removeEntry(n,s.readTime),r=r.insert(n,s)):!o.isValidDocument()||s.version.compareTo(o.version)>0||0===s.version.compareTo(o.version)&&o.hasPendingWrites?(t.addEntry(s),r=r.insert(n,s)):Kc("LocalStore","Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",s.version)})),{cs:r,ls:i}}))}function rg(e,t){const n=$c(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(e=>(void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t))))}function ig(e,t){const n=$c(e);return n.persistence.runTransaction("Allocate target","readwrite",(e=>{let r;return n.Qr.getTargetData(e,t).next((i=>i?(r=i,Ol.resolve(r)):n.Qr.allocateTargetId(e).next((i=>(r=new op(t,i,"TargetPurposeListen",e.currentSequenceNumber),n.Qr.addTargetData(e,r).next((()=>r)))))))})).then((e=>{const r=n.ns.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.ns=n.ns.insert(e.targetId,e),n.rs.set(t,e.targetId)),e}))}async function sg(e,t,n){const r=$c(e),i=r.ns.get(t),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,(e=>r.persistence.referenceDelegate.removeTarget(e,i)))}catch(e){if(!Fl(e))throw e;Kc("LocalStore","Failed to update sequence numbers for target ".concat(t,": ").concat(e))}r.ns=r.ns.remove(t),r.rs.delete(i.target)}function og(e,t,n){const r=$c(e);let i=pl.min(),s=bd();return r.persistence.runTransaction("Execute query","readwrite",(e=>function(e,t,n){const r=$c(e),i=r.rs.get(n);return void 0!==i?Ol.resolve(r.ns.get(i)):r.Qr.getTargetData(t,n)}(r,e,Xh(t)).next((t=>{if(t)return i=t.lastLimboFreeSnapshotVersion,r.Qr.getMatchingKeysForTargetId(e,t.targetId).next((e=>{s=e}))})).next((()=>r.ts.getDocumentsMatchingQuery(e,t,n?i:pl.min(),n?s:bd()))).next((e=>(lg(r,od(t),e),{documents:e,hs:s})))))}function ag(e,t){const n=$c(e),r=$c(n.Qr),i=n.ns.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(e=>r._t(e,t).next((e=>e?e.target:null))))}function cg(e,t){const n=$c(e),r=n.ss.get(t)||pl.min();return n.persistence.runTransaction("Get new document changes","readonly",(e=>n.os.getAllFromCollectionGroup(e,t,Tl(r,-1),Number.MAX_SAFE_INTEGER))).then((e=>(lg(n,t,e),e)))}function lg(e,t,n){let r=e.ss.get(t)||pl.min();n.forEach(((e,t)=>{t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.ss.set(t,r)}async function ug(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:bd();const r=await ig(e,Xh(mp(t.bundledQuery))),i=$c(e);return i.persistence.runTransaction("Save named query","readwrite",(e=>{const s=Df(t.readTime);if(r.snapshotVersion.compareTo(s)>=0)return i.$r.saveNamedQuery(e,t);const o=r.withResumeToken(Du.EMPTY_BYTE_STRING,s);return i.ns=i.ns.insert(o.targetId,o),i.Qr.updateTargetData(e,o).next((()=>i.Qr.removeMatchingKeysForTargetId(e,r.targetId))).next((()=>i.Qr.addMatchingKeys(e,n,r.targetId))).next((()=>i.$r.saveNamedQuery(e,t)))}))}function hg(e,t){return"firestore_clients_".concat(e,"_").concat(t)}function dg(e,t,n){let r="firestore_mutations_".concat(e,"_").concat(n);return t.isAuthenticated()&&(r+="_".concat(t.uid)),r}function fg(e,t){return"firestore_targets_".concat(e,"_").concat(t)}class pg{constructor(e,t,n,r){this.user=e,this.batchId=t,this.state=n,this.error=r}static Es(e,t,n){const r=JSON.parse(n);let i,s="object"==typeof r&&-1!==["pending","acknowledged","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return s&&r.error&&(s="string"==typeof r.error.message&&"string"==typeof r.error.code,s&&(i=new Xc(r.error.code,r.error.message))),s?new pg(e,t,r.state,i):(Gc("SharedClientState","Failed to parse mutation state for ID '".concat(t,"': ").concat(n)),null)}ds(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class mg{constructor(e,t,n){this.targetId=e,this.state=t,this.error=n}static Es(e,t){const n=JSON.parse(t);let r,i="object"==typeof n&&-1!==["not-current","current","rejected"].indexOf(n.state)&&(void 0===n.error||"object"==typeof n.error);return i&&n.error&&(i="string"==typeof n.error.message&&"string"==typeof n.error.code,i&&(r=new Xc(n.error.code,n.error.message))),i?new mg(e,n.state,r):(Gc("SharedClientState","Failed to parse target state for ID '".concat(e,"': ").concat(t)),null)}ds(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class gg{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Es(e,t){const n=JSON.parse(t);let r="object"==typeof n&&n.activeTargetIds instanceof Array,i=Sd();for(let s=0;r&&s<n.activeTargetIds.length;++s)r=Hl(n.activeTargetIds[s]),i=i.add(n.activeTargetIds[s]);return r?new gg(e,i):(Gc("SharedClientState","Failed to parse client data for instance '".concat(e,"': ").concat(t)),null)}}class yg{constructor(e,t){this.clientId=e,this.onlineState=t}static Es(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new yg(t.clientId,t.onlineState):(Gc("SharedClientState","Failed to parse online state: ".concat(e)),null)}}class vg{constructor(){this.activeTargetIds=Sd()}As(e){this.activeTargetIds=this.activeTargetIds.add(e)}Rs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}ds(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class wg{constructor(e,t,n,r,i){this.window=e,this.oi=t,this.persistenceKey=n,this.Vs=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.fs=this.gs.bind(this),this.ps=new ku(ul),this.started=!1,this.ys=[];const s=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.ws=hg(this.persistenceKey,this.Vs),this.Ss=function(e){return"firestore_sequence_number_".concat(e)}(this.persistenceKey),this.ps=this.ps.insert(this.Vs,new vg),this.bs=new RegExp("^firestore_clients_".concat(s,"_([^_]*)$")),this.Ds=new RegExp("^firestore_mutations_".concat(s,"_(\\d+)(?:_(.*))?$")),this.Cs=new RegExp("^firestore_targets_".concat(s,"_(\\d+)$")),this.vs=function(e){return"firestore_online_state_".concat(e)}(this.persistenceKey),this.Fs=function(e){return"firestore_bundle_loaded_v2_".concat(e)}(this.persistenceKey),this.window.addEventListener("storage",this.fs)}static D(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Bi();for(const n of e){if(n===this.Vs)continue;const e=this.getItem(hg(this.persistenceKey,n));if(e){const t=gg.Es(n,e);t&&(this.ps=this.ps.insert(t.clientId,t))}}this.Ms();const t=this.storage.getItem(this.vs);if(t){const e=this.xs(t);e&&this.Os(e)}for(const n of this.ys)this.gs(n);this.ys=[],this.window.addEventListener("pagehide",(()=>this.shutdown())),this.started=!0}writeSequenceNumber(e){this.setItem(this.Ss,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ns(this.ps)}isActiveQueryTarget(e){let t=!1;return this.ps.forEach(((n,r)=>{r.activeTargetIds.has(e)&&(t=!0)})),t}addPendingMutation(e){this.Ls(e,"pending")}updateMutationState(e,t,n){this.Ls(e,t,n),this.Bs(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const n=this.storage.getItem(fg(this.persistenceKey,e));if(n){const r=mg.Es(e,n);r&&(t=r.state)}}return this.ks.As(e),this.Ms(),t}removeLocalQueryTarget(e){this.ks.Rs(e),this.Ms()}isLocalQueryTarget(e){return this.ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(fg(this.persistenceKey,e))}updateQueryState(e,t,n){this.qs(e,t,n)}handleUserChange(e,t,n){t.forEach((e=>{this.Bs(e)})),this.currentUser=e,n.forEach((e=>{this.addPendingMutation(e)}))}setOnlineState(e){this.Qs(e)}notifyBundleLoaded(e){this.Ks(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.fs),this.removeItem(this.ws),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Kc("SharedClientState","READ",e,t),t}setItem(e,t){Kc("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Kc("SharedClientState","REMOVE",e),this.storage.removeItem(e)}gs(e){const t=e;if(t.storageArea===this.storage){if(Kc("SharedClientState","EVENT",t.key,t.newValue),t.key===this.ws)return void Gc("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.oi.enqueueRetryable((async()=>{if(this.started){if(null!==t.key)if(this.bs.test(t.key)){if(null==t.newValue){const e=this.$s(t.key);return this.Us(e,null)}{const e=this.Ws(t.key,t.newValue);if(e)return this.Us(e.clientId,e)}}else if(this.Ds.test(t.key)){if(null!==t.newValue){const e=this.Gs(t.key,t.newValue);if(e)return this.zs(e)}}else if(this.Cs.test(t.key)){if(null!==t.newValue){const e=this.js(t.key,t.newValue);if(e)return this.Hs(e)}}else if(t.key===this.vs){if(null!==t.newValue){const e=this.xs(t.newValue);if(e)return this.Os(e)}}else if(t.key===this.Ss){const e=function(e){let t=Kl._e;if(null!=e)try{const n=JSON.parse(e);Yc("number"==typeof n),t=n}catch(e){Gc("SharedClientState","Failed to read sequence number from WebStorage",e)}return t}(t.newValue);e!==Kl._e&&this.sequenceNumberHandler(e)}else if(t.key===this.Fs){const e=this.Js(t.newValue);await Promise.all(e.map((e=>this.syncEngine.Ys(e))))}}else this.ys.push(t)}))}}get ks(){return this.ps.get(this.Vs)}Ms(){this.setItem(this.ws,this.ks.ds())}Ls(e,t,n){const r=new pg(this.currentUser,e,t,n),i=dg(this.persistenceKey,this.currentUser,e);this.setItem(i,r.ds())}Bs(e){const t=dg(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Qs(e){const t={clientId:this.Vs,onlineState:e};this.storage.setItem(this.vs,JSON.stringify(t))}qs(e,t,n){const r=fg(this.persistenceKey,e),i=new mg(e,t,n);this.setItem(r,i.ds())}Ks(e){const t=JSON.stringify(Array.from(e));this.setItem(this.Fs,t)}$s(e){const t=this.bs.exec(e);return t?t[1]:null}Ws(e,t){const n=this.$s(e);return gg.Es(n,t)}Gs(e,t){const n=this.Ds.exec(e),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return pg.Es(new jc(i),r,t)}js(e,t){const n=this.Cs.exec(e),r=Number(n[1]);return mg.Es(r,t)}xs(e){return yg.Es(e)}Js(e){return JSON.parse(e)}async zs(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Zs(e.batchId,e.state,e.error);Kc("SharedClientState","Ignoring mutation for non-active user ".concat(e.user.uid))}Hs(e){return this.syncEngine.Xs(e.targetId,e.state,e.error)}Us(e,t){const n=t?this.ps.insert(e,t):this.ps.remove(e),r=this.Ns(this.ps),i=this.Ns(n),s=[],o=[];return i.forEach((e=>{r.has(e)||s.push(e)})),r.forEach((e=>{i.has(e)||o.push(e)})),this.syncEngine.eo(s,o).then((()=>{this.ps=n}))}Os(e){this.ps.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ns(e){let t=Sd();return e.forEach(((e,n)=>{t=t.unionWith(n.activeTargetIds)})),t}}class bg{constructor(){this.no=new vg,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return this.no.As(e),this.ro[e]||"not-current"}updateQueryState(e,t,n){this.ro[e]=t}removeLocalQueryTarget(e){this.no.Rs(e)}isLocalQueryTarget(e){return this.no.activeTargetIds.has(e)}clearQueryState(e){delete this.ro[e]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(e){return this.no.activeTargetIds.has(e)}start(){return this.no=new vg,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class _g{io(e){}shutdown(){}}class Sg{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(e){this.uo.push(e)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){Kc("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.uo)e(0)}ao(){Kc("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.uo)e(1)}static D(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let Eg=null;function Ig(){return null===Eg?Eg=268435456+Math.round(2147483648*Math.random()):Eg++,"0x"+Eg.toString(16)}const Tg={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class kg{constructor(e){this.lo=e.lo,this.ho=e.ho}Po(e){this.Io=e}To(e){this.Eo=e}onMessage(e){this.Ao=e}close(){this.ho()}send(e){this.lo(e)}Ro(){this.Io()}Vo(e){this.Eo(e)}mo(e){this.Ao(e)}}const Cg="WebChannelConnection";class xg extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.fo=t+"://"+e.host,this.po="projects/".concat(n,"/databases/").concat(r),this.yo="(default)"===this.databaseId.database?"project_id=".concat(n):"project_id=".concat(n,"&database_id=").concat(r)}get wo(){return!1}So(e,t,n,r,i){const s=Ig(),o=this.bo(e,t.toUriEncodedString());Kc("RestConnection","Sending RPC '".concat(e,"' ").concat(s,":"),o,n);const a={"google-cloud-resource-prefix":this.po,"x-goog-request-params":this.yo};return this.Do(a,r,i),this.Co(e,o,a,n).then((t=>(Kc("RestConnection","Received RPC '".concat(e,"' ").concat(s,": "),t),t)),(t=>{throw Wc("RestConnection","RPC '".concat(e,"' ").concat(s," failed with error: "),t,"url: ",o,"request:",n),t}))}vo(e,t,n,r,i,s){return this.So(e,t,n,r,i)}Do(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+zc,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((t,n)=>e[n]=t)),n&&n.headers.forEach(((t,n)=>e[n]=t))}bo(e,t){const n=Tg[e];return"".concat(this.fo,"/v1/").concat(t,":").concat(n)}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Co(e,t,n,r){const i=Ig();return new Promise(((s,o)=>{const a=new Mc;a.setWithCredentials(!0),a.listenOnce(Oc.COMPLETE,(()=>{try{switch(a.getLastErrorCode()){case Pc.NO_ERROR:const t=a.getResponseJson();Kc(Cg,"XHR for RPC '".concat(e,"' ").concat(i," received:"),JSON.stringify(t)),s(t);break;case Pc.TIMEOUT:Kc(Cg,"RPC '".concat(e,"' ").concat(i," timed out")),o(new Xc(Jc.DEADLINE_EXCEEDED,"Request time out"));break;case Pc.HTTP_ERROR:const n=a.getStatus();if(Kc(Cg,"RPC '".concat(e,"' ").concat(i," failed with status:"),n,"response text:",a.getResponseText()),n>0){let e=a.getResponseJson();Array.isArray(e)&&(e=e[0]);const t=null==e?void 0:e.error;if(t&&t.status&&t.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(Jc).indexOf(t)>=0?t:Jc.UNKNOWN}(t.status);o(new Xc(e,t.message))}else o(new Xc(Jc.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new Xc(Jc.UNAVAILABLE,"Connection failed."));break;default:Qc()}}finally{Kc(Cg,"RPC '".concat(e,"' ").concat(i," completed."))}}));const c=JSON.stringify(r);Kc(Cg,"RPC '".concat(e,"' ").concat(i," sending request:"),r),a.send(t,"POST",c,n,15)}))}Fo(e,t,n){const r=Ig(),i=[this.fo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=Nc(),o=Ac(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;void 0!==c&&(a.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(a.useFetchStreams=!0),this.Do(a.initMessageHeaders,t,n),a.encodeInitMessageHeaders=!0;const l=i.join("");Kc(Cg,"Creating RPC '".concat(e,"' stream ").concat(r,": ").concat(l),a);const u=s.createWebChannel(l,a);let h=!1,d=!1;const f=new kg({lo:t=>{d?Kc(Cg,"Not sending because RPC '".concat(e,"' stream ").concat(r," is closed:"),t):(h||(Kc(Cg,"Opening RPC '".concat(e,"' stream ").concat(r," transport.")),u.open(),h=!0),Kc(Cg,"RPC '".concat(e,"' stream ").concat(r," sending:"),t),u.send(t))},ho:()=>u.close()}),p=(e,t,n)=>{e.listen(t,(e=>{try{n(e)}catch(e){setTimeout((()=>{throw e}),0)}}))};return p(u,Lc.EventType.OPEN,(()=>{d||Kc(Cg,"RPC '".concat(e,"' stream ").concat(r," transport opened."))})),p(u,Lc.EventType.CLOSE,(()=>{d||(d=!0,Kc(Cg,"RPC '".concat(e,"' stream ").concat(r," transport closed")),f.Vo())})),p(u,Lc.EventType.ERROR,(t=>{d||(d=!0,Wc(Cg,"RPC '".concat(e,"' stream ").concat(r," transport errored:"),t),f.Vo(new Xc(Jc.UNAVAILABLE,"The operation could not be completed")))})),p(u,Lc.EventType.MESSAGE,(t=>{var n;if(!d){const i=t.data[0];Yc(!!i);const s=i,o=s.error||(null===(n=s[0])||void 0===n?void 0:n.error);if(o){Kc(Cg,"RPC '".concat(e,"' stream ").concat(r," received error:"),o);const t=o.status;let n=function(e){const t=of[e];if(void 0!==t)return lf(t)}(t),i=o.message;void 0===n&&(n=Jc.INTERNAL,i="Unknown error status: "+t+" with message "+o.message),d=!0,f.Vo(new Xc(n,i)),u.close()}else Kc(Cg,"RPC '".concat(e,"' stream ").concat(r," received:"),i),f.mo(i)}})),p(o,Rc.STAT_EVENT,(t=>{t.stat===Dc.PROXY?Kc(Cg,"RPC '".concat(e,"' stream ").concat(r," detected buffering proxy")):t.stat===Dc.NOPROXY&&Kc(Cg,"RPC '".concat(e,"' stream ").concat(r," detected no buffering proxy"))})),setTimeout((()=>{f.Ro()}),0),f}}function Ng(){return"undefined"!=typeof window?window:null}function Ag(){return"undefined"!=typeof document?document:null}function Pg(e){return new Nf(e,!0)}class Og{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;this.oi=e,this.timerId=t,this.Mo=n,this.xo=r,this.Oo=i,this.No=0,this.Lo=null,this.Bo=Date.now(),this.reset()}reset(){this.No=0}ko(){this.No=this.Oo}qo(e){this.cancel();const t=Math.floor(this.No+this.Qo()),n=Math.max(0,Date.now()-this.Bo),r=Math.max(0,t-n);r>0&&Kc("ExponentialBackoff","Backing off for ".concat(r," ms (base delay: ").concat(this.No," ms, delay with jitter: ").concat(t," ms, last attempt: ").concat(n," ms ago)")),this.Lo=this.oi.enqueueAfterDelay(this.timerId,r,(()=>(this.Bo=Date.now(),e()))),this.No*=this.xo,this.No<this.Mo&&(this.No=this.Mo),this.No>this.Oo&&(this.No=this.Oo)}Ko(){null!==this.Lo&&(this.Lo.skipDelay(),this.Lo=null)}cancel(){null!==this.Lo&&(this.Lo.cancel(),this.Lo=null)}Qo(){return(Math.random()-.5)*this.No}}class Rg{constructor(e,t,n,r,i,s,o,a){this.oi=e,this.$o=n,this.Uo=r,this.connection=i,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=o,this.listener=a,this.state=0,this.Wo=0,this.Go=null,this.zo=null,this.stream=null,this.jo=new Og(e,t)}Ho(){return 1===this.state||5===this.state||this.Jo()}Jo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Yo()}async stop(){this.Ho()&&await this.close(0)}Zo(){this.state=0,this.jo.reset()}Xo(){this.Jo()&&null===this.Go&&(this.Go=this.oi.enqueueAfterDelay(this.$o,6e4,(()=>this.e_())))}t_(e){this.n_(),this.stream.send(e)}async e_(){if(this.Jo())return this.close(0)}n_(){this.Go&&(this.Go.cancel(),this.Go=null)}r_(){this.zo&&(this.zo.cancel(),this.zo=null)}async close(e,t){this.n_(),this.r_(),this.jo.cancel(),this.Wo++,4!==e?this.jo.reset():t&&t.code===Jc.RESOURCE_EXHAUSTED?(Gc(t.toString()),Gc("Using maximum backoff delay to prevent overloading the backend."),this.jo.ko()):t&&t.code===Jc.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.i_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.To(t)}i_(){}auth(){this.state=1;const e=this.s_(this.Wo),t=this.Wo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((e=>{let[n,r]=e;this.Wo===t&&this.o_(n,r)}),(t=>{e((()=>{const e=new Xc(Jc.UNKNOWN,"Fetching auth token failed: "+t.message);return this.__(e)}))}))}o_(e,t){const n=this.s_(this.Wo);this.stream=this.a_(e,t),this.stream.Po((()=>{n((()=>(this.state=2,this.zo=this.oi.enqueueAfterDelay(this.Uo,1e4,(()=>(this.Jo()&&(this.state=3),Promise.resolve()))),this.listener.Po())))})),this.stream.To((e=>{n((()=>this.__(e)))})),this.stream.onMessage((e=>{n((()=>this.onMessage(e)))}))}Yo(){this.state=5,this.jo.qo((async()=>{this.state=0,this.start()}))}__(e){return Kc("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}s_(e){return t=>{this.oi.enqueueAndForget((()=>this.Wo===e?t():(Kc("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class Dg extends Rg{constructor(e,t,n,r,i,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i}a_(e,t){return this.connection.Fo("Listen",e,t)}onMessage(e){this.jo.reset();const t=function(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:Qc()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],s=function(e,t){return e.useProto3Json?(Yc(void 0===t||"string"==typeof t),Du.fromBase64String(t||"")):(Yc(void 0===t||t instanceof Uint8Array),Du.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,a=o&&function(e){const t=void 0===e.code?Jc.UNKNOWN:lf(e.code);return new Xc(t,e.message||"")}(o);n=new _f(r,i,s,a||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const i=Vf(e,r.document.name),s=Df(r.document.updateTime),o=r.document.createTime?Df(r.document.createTime):pl.min(),a=new hh({mapValue:{fields:r.document.fields}}),c=fh.newFoundDocument(i,s,o,a),l=r.targetIds||[],u=r.removedTargetIds||[];n=new wf(l,u,c.key,c)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const i=Vf(e,r.document),s=r.readTime?Df(r.readTime):pl.min(),o=fh.newNoDocument(i,s),a=r.removedTargetIds||[];n=new wf([],a,o.key,o)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const i=Vf(e,r.document),s=r.removedTargetIds||[];n=new wf([],s,i,null)}else{if(!("filter"in t))return Qc();{t.filter;const e=t.filter;e.targetId;const{count:r=0,unchangedNames:i}=e,s=new sf(r,i),o=e.targetId;n=new bf(o,s)}}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return pl.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?pl.min():t.readTime?Df(t.readTime):pl.min()}(e);return this.listener.u_(t,n)}c_(e){const t={};t.database=Bf(this.serializer),t.addTarget=function(e,t){let n;const r=t.target;if(n=Bh(r)?{documents:Qf(e,r)}:{query:Yf(e,r).ut},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=Of(e,t.resumeToken);const r=Af(e,t.expectedCount);null!==r&&(n.expectedCount=r)}else if(t.snapshotVersion.compareTo(pl.min())>0){n.readTime=Pf(e,t.snapshotVersion.toTimestamp());const r=Af(e,t.expectedCount);null!==r&&(n.expectedCount=r)}return n}(this.serializer,e);const n=function(e,t){const n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Qc()}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.t_(t)}l_(e){const t={};t.database=Bf(this.serializer),t.removeTarget=e,this.t_(t)}}class Lg extends Rg{constructor(e,t,n,r,i,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i,this.h_=!1}get P_(){return this.h_}start(){this.h_=!1,this.lastStreamToken=void 0,super.start()}i_(){this.h_&&this.I_([])}a_(e,t){return this.connection.Fo("Write",e,t)}onMessage(e){if(Yc(!!e.streamToken),this.lastStreamToken=e.streamToken,this.h_){this.jo.reset();const t=function(e,t){return e&&e.length>0?(Yc(void 0!==t),e.map((e=>function(e,t){let n=e.updateTime?Df(e.updateTime):Df(t);return n.isEqual(pl.min())&&(n=Df(t)),new Vd(n,e.transformResults||[])}(e,t)))):[]}(e.writeResults,e.commitTime),n=Df(e.commitTime);return this.listener.T_(n,t)}return Yc(!e.writeResults||0===e.writeResults.length),this.h_=!0,this.listener.E_()}d_(){const e={};e.database=Bf(this.serializer),this.t_(e)}I_(e){const t={streamToken:this.lastStreamToken,writes:e.map((e=>Wf(this.serializer,e)))};this.t_(t)}}class Mg extends class{}{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.A_=!1}R_(){if(this.A_)throw new Xc(Jc.FAILED_PRECONDITION,"The client has already been terminated.")}So(e,t,n,r){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((i=>{let[s,o]=i;return this.connection.So(e,Mf(t,n),r,s,o)})).catch((e=>{throw"FirebaseError"===e.name?(e.code===Jc.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new Xc(Jc.UNKNOWN,e.toString())}))}vo(e,t,n,r,i){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((s=>{let[o,a]=s;return this.connection.vo(e,Mf(t,n),r,o,a,i)})).catch((e=>{throw"FirebaseError"===e.name?(e.code===Jc.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new Xc(Jc.UNKNOWN,e.toString())}))}terminate(){this.A_=!0,this.connection.terminate()}}class Fg{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.m_=0,this.f_=null,this.g_=!0}p_(){0===this.m_&&(this.y_("Unknown"),this.f_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.f_=null,this.w_("Backend didn't respond within 10 seconds."),this.y_("Offline"),Promise.resolve()))))}S_(e){"Online"===this.state?this.y_("Unknown"):(this.m_++,this.m_>=1&&(this.b_(),this.w_("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.y_("Offline")))}set(e){this.b_(),this.m_=0,"Online"===e&&(this.g_=!1),this.y_(e)}y_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}w_(e){const t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.g_?(Gc(t),this.g_=!1):Kc("OnlineStateTracker",t)}b_(){null!==this.f_&&(this.f_.cancel(),this.f_=null)}}class Ug{constructor(e,t,n,r,i){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.D_=[],this.C_=new Map,this.v_=new Set,this.F_=[],this.M_=i,this.M_.io((e=>{n.enqueueAndForget((async()=>{Hg(this)&&(Kc("RemoteStore","Restarting streams for network reachability change."),await async function(e){const t=$c(e);t.v_.add(4),await jg(t),t.x_.set("Unknown"),t.v_.delete(4),await Vg(t)}(this))}))})),this.x_=new Fg(n,r)}}async function Vg(e){if(Hg(e))for(const t of e.F_)await t(!0)}async function jg(e){for(const t of e.F_)await t(!1)}function zg(e,t){const n=$c(e);n.C_.has(t.targetId)||(n.C_.set(t.targetId,t),Wg(n)?Gg(n):hy(n).Jo()&&qg(n,t))}function Bg(e,t){const n=$c(e),r=hy(n);n.C_.delete(t),r.Jo()&&Kg(n,t),0===n.C_.size&&(r.Jo()?r.Xo():Hg(n)&&n.x_.set("Unknown"))}function qg(e,t){if(e.O_.Oe(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(pl.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}hy(e).c_(t)}function Kg(e,t){e.O_.Oe(t),hy(e).l_(t)}function Gg(e){e.O_=new Ef({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),_t:t=>e.C_.get(t)||null,nt:()=>e.datastore.serializer.databaseId}),hy(e).start(),e.x_.p_()}function Wg(e){return Hg(e)&&!hy(e).Ho()&&e.C_.size>0}function Hg(e){return 0===$c(e).v_.size}function Qg(e){e.O_=void 0}async function Yg(e){e.C_.forEach(((t,n)=>{qg(e,t)}))}async function $g(e,t){Qg(e),Wg(e)?(e.x_.S_(t),Gg(e)):e.x_.set("Unknown")}async function Jg(e,t,n){if(e.x_.set("Online"),t instanceof _f&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const r of t.targetIds)e.C_.has(r)&&(await e.remoteSyncer.rejectListen(r,n),e.C_.delete(r),e.O_.removeTarget(r))}(e,t)}catch(n){Kc("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),n),await Xg(e,n)}else if(t instanceof wf?e.O_.$e(t):t instanceof bf?e.O_.Je(t):e.O_.Ge(t),!n.isEqual(pl.min()))try{const t=await tg(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.O_.it(t);return n.targetChanges.forEach(((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const i=e.C_.get(r);i&&e.C_.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach(((t,n)=>{const r=e.C_.get(t);if(!r)return;e.C_.set(t,r.withResumeToken(Du.EMPTY_BYTE_STRING,r.snapshotVersion)),Kg(e,t);const i=new op(r.target,t,n,r.sequenceNumber);qg(e,i)})),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){Kc("RemoteStore","Failed to raise snapshot:",t),await Xg(e,t)}}async function Xg(e,t,n){if(!Fl(t))throw t;e.v_.add(1),await jg(e),e.x_.set("Offline"),n||(n=()=>tg(e.localStore)),e.asyncQueue.enqueueRetryable((async()=>{Kc("RemoteStore","Retrying IndexedDB access"),await n(),e.v_.delete(1),await Vg(e)}))}function Zg(e,t){return t().catch((n=>Xg(e,n,t)))}async function ey(e){const t=$c(e),n=dy(t);let r=t.D_.length>0?t.D_[t.D_.length-1].batchId:-1;for(;ty(t);)try{const e=await rg(t.localStore,r);if(null===e){0===t.D_.length&&n.Xo();break}r=e.batchId,ny(t,e)}catch(e){await Xg(t,e)}ry(t)&&iy(t)}function ty(e){return Hg(e)&&e.D_.length<10}function ny(e,t){e.D_.push(t);const n=dy(e);n.Jo()&&n.P_&&n.I_(t.mutations)}function ry(e){return Hg(e)&&!dy(e).Ho()&&e.D_.length>0}function iy(e){dy(e).start()}async function sy(e){dy(e).d_()}async function oy(e){const t=dy(e);for(const n of e.D_)t.I_(n.mutations)}async function ay(e,t,n){const r=e.D_.shift(),i=nf.from(r,t,n);await Zg(e,(()=>e.remoteSyncer.applySuccessfulWrite(i))),await ey(e)}async function cy(e,t){t&&dy(e).P_&&await async function(e,t){if(function(e){return cf(e)&&e!==Jc.ABORTED}(t.code)){const n=e.D_.shift();dy(e).Zo(),await Zg(e,(()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t))),await ey(e)}}(e,t),ry(e)&&iy(e)}async function ly(e,t){const n=$c(e);n.asyncQueue.verifyOperationInProgress(),Kc("RemoteStore","RemoteStore received new credentials");const r=Hg(n);n.v_.add(3),await jg(n),r&&n.x_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.v_.delete(3),await Vg(n)}async function uy(e,t){const n=$c(e);t?(n.v_.delete(2),await Vg(n)):t||(n.v_.add(2),await jg(n),n.x_.set("Unknown"))}function hy(e){return e.N_||(e.N_=function(e,t,n){const r=$c(e);return r.R_(),new Dg(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Po:Yg.bind(null,e),To:$g.bind(null,e),u_:Jg.bind(null,e)}),e.F_.push((async t=>{t?(e.N_.Zo(),Wg(e)?Gg(e):e.x_.set("Unknown")):(await e.N_.stop(),Qg(e))}))),e.N_}function dy(e){return e.L_||(e.L_=function(e,t,n){const r=$c(e);return r.R_(),new Lg(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Po:sy.bind(null,e),To:cy.bind(null,e),E_:oy.bind(null,e),T_:ay.bind(null,e)}),e.F_.push((async t=>{t?(e.L_.Zo(),await ey(e)):(await e.L_.stop(),e.D_.length>0&&(Kc("RemoteStore","Stopping write stream with ".concat(e.D_.length," pending writes")),e.D_=[]))}))),e.L_}class fy{constructor(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new Zc,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((e=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,r,i){const s=Date.now()+n,o=new fy(e,t,s,r,i);return o.start(n),o}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Xc(Jc.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function py(e,t){if(Gc("AsyncQueue","".concat(t,": ").concat(e)),Fl(e))return new Xc(Jc.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}class my{constructor(e){this.comparator=e?(t,n)=>e(t,n)||wl.comparator(t.key,n.key):(e,t)=>wl.comparator(e.key,t.key),this.keyedMap=fd(),this.sortedSet=new ku(this.comparator)}static emptySet(e){return new my(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,n)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof my))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(!e.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new my;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class gy{constructor(){this.B_=new ku(wl.comparator)}track(e){const t=e.doc.key,n=this.B_.get(t);n?0!==e.type&&3===n.type?this.B_=this.B_.insert(t,e):3===e.type&&1!==n.type?this.B_=this.B_.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.B_=this.B_.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.B_=this.B_.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.B_=this.B_.remove(t):1===e.type&&2===n.type?this.B_=this.B_.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.B_=this.B_.insert(t,{type:2,doc:e.doc}):Qc():this.B_=this.B_.insert(t,e)}k_(){const e=[];return this.B_.inorderTraversal(((t,n)=>{e.push(n)})),e}}class yy{constructor(e,t,n,r,i,s,o,a,c){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=s,this.syncStateChanged=o,this.excludesMetadataChanges=a,this.hasCachedResults=c}static fromInitialDocuments(e,t,n,r,i){const s=[];return t.forEach((e=>{s.push({type:0,doc:e})})),new yy(e,t,my.emptySet(t),s,n,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&nd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}class vy{constructor(){this.q_=void 0,this.Q_=[]}K_(){return this.Q_.some((e=>e.U_()))}}class wy{constructor(){this.queries=new ld((e=>rd(e)),nd),this.onlineState="Unknown",this.W_=new Set}}async function by(e,t){const n=$c(e);let r=3;const i=t.query;let s=n.queries.get(i);s?!s.K_()&&t.U_()&&(r=2):(s=new vy,r=t.U_()?0:1);try{switch(r){case 0:s.q_=await n.onListen(i,!0);break;case 1:s.q_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(e){const n=py(e,"Initialization of query '".concat(id(t.query),"' failed"));return void t.onError(n)}n.queries.set(i,s),s.Q_.push(t),t.G_(n.onlineState),s.q_&&t.z_(s.q_)&&Iy(n)}async function _y(e,t){const n=$c(e),r=t.query;let i=3;const s=n.queries.get(r);if(s){const e=s.Q_.indexOf(t);e>=0&&(s.Q_.splice(e,1),0===s.Q_.length?i=t.U_()?0:1:!s.K_()&&t.U_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function Sy(e,t){const n=$c(e);let r=!1;for(const i of t){const e=i.query,t=n.queries.get(e);if(t){for(const e of t.Q_)e.z_(i)&&(r=!0);t.q_=i}}r&&Iy(n)}function Ey(e,t,n){const r=$c(e),i=r.queries.get(t);if(i)for(const s of i.Q_)s.onError(n);r.queries.delete(t)}function Iy(e){e.W_.forEach((e=>{e.next()}))}var Ty,ky;(ky=Ty||(Ty={})).j_="default",ky.Cache="cache";class Cy{constructor(e,t,n){this.query=e,this.H_=t,this.J_=!1,this.Y_=null,this.onlineState="Unknown",this.options=n||{}}z_(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new yy(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.J_?this.Z_(e)&&(this.H_.next(e),t=!0):this.X_(e,this.onlineState)&&(this.ea(e),t=!0),this.Y_=e,t}onError(e){this.H_.error(e)}G_(e){this.onlineState=e;let t=!1;return this.Y_&&!this.J_&&this.X_(this.Y_,e)&&(this.ea(this.Y_),t=!0),t}X_(e,t){if(!e.fromCache)return!0;if(!this.U_())return!0;const n="Offline"!==t;return(!this.options.ta||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Z_(e){if(e.docChanges.length>0)return!0;const t=this.Y_&&this.Y_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}ea(e){e=yy.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.J_=!0,this.H_.next(e)}U_(){return this.options.source!==Ty.Cache}}class xy{constructor(e,t){this.na=e,this.byteLength=t}ra(){return"metadata"in this.na}}class Ny{constructor(e){this.serializer=e}Ps(e){return Vf(this.serializer,e)}Is(e){return e.metadata.exists?Gf(this.serializer,e.document,!1):fh.newNoDocument(this.Ps(e.metadata.name),this.Ts(e.metadata.readTime))}Ts(e){return Df(e)}}class Ay{constructor(e,t,n){this.ia=e,this.localStore=t,this.serializer=n,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=Py(e)}sa(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.na.namedQuery)this.queries.push(e.na.namedQuery);else if(e.na.documentMetadata){this.documents.push({metadata:e.na.documentMetadata}),e.na.documentMetadata.exists||++t;const n=gl.fromString(e.na.documentMetadata.name);this.collectionGroups.add(n.get(n.length-2))}else e.na.document&&(this.documents[this.documents.length-1].document=e.na.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}oa(e){const t=new Map,n=new Ny(this.serializer);for(const r of e)if(r.metadata.queries){const e=n.Ps(r.metadata.name);for(const n of r.metadata.queries){const r=(t.get(n)||bd()).add(e);t.set(n,r)}}return t}async complete(){const e=await async function(e,t,n,r){const i=$c(e);let s=bd(),o=hd();for(const l of n){const e=t.Ps(l.metadata.name);l.document&&(s=s.add(e));const n=t.Is(l);n.setReadTime(t.Ts(l.metadata.readTime)),o=o.insert(e,n)}const a=i.os.newChangeBuffer({trackRemovals:!0}),c=await ig(i,function(e){return Xh(Qh(gl.fromString("__bundle__/docs/".concat(e))))}(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",(e=>ng(e,a,o).next((t=>(a.apply(e),t))).next((t=>i.Qr.removeMatchingKeysForTargetId(e,c.targetId).next((()=>i.Qr.addMatchingKeys(e,s,c.targetId))).next((()=>i.localDocuments.getLocalViewOfDocuments(e,t.cs,t.ls))).next((()=>t.cs))))))}(this.localStore,new Ny(this.serializer),this.documents,this.ia.id),t=this.oa(this.documents);for(const n of this.queries)await ug(this.localStore,n,t.get(n.name));return this.progress.taskState="Success",{progress:this.progress,_a:this.collectionGroups,aa:e}}}function Py(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}class Oy{constructor(e){this.key=e}}class Ry{constructor(e){this.key=e}}class Dy{constructor(e,t){this.query=e,this.ua=t,this.ca=null,this.hasCachedResults=!1,this.current=!1,this.la=bd(),this.mutatedKeys=bd(),this.ha=ad(e),this.Pa=new my(this.ha)}get Ia(){return this.ua}Ta(e,t){const n=t?t.Ea:new gy,r=t?t.Pa:this.Pa;let i=t?t.mutatedKeys:this.mutatedKeys,s=r,o=!1;const a="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,c="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal(((e,t)=>{const l=r.get(e),u=sd(this.query,t)?t:null,h=!!l&&this.mutatedKeys.has(l.key),d=!!u&&(u.hasLocalMutations||this.mutatedKeys.has(u.key)&&u.hasCommittedMutations);let f=!1;l&&u?l.data.isEqual(u.data)?h!==d&&(n.track({type:3,doc:u}),f=!0):this.da(l,u)||(n.track({type:2,doc:u}),f=!0,(a&&this.ha(u,a)>0||c&&this.ha(u,c)<0)&&(o=!0)):!l&&u?(n.track({type:0,doc:u}),f=!0):l&&!u&&(n.track({type:1,doc:l}),f=!0,(a||c)&&(o=!0)),f&&(u?(s=s.add(u),i=d?i.add(e):i.delete(e)):(s=s.delete(e),i=i.delete(e)))})),null!==this.query.limit)for(;s.size>this.query.limit;){const e="F"===this.query.limitType?s.last():s.first();s=s.delete(e.key),i=i.delete(e.key),n.track({type:1,doc:e})}return{Pa:s,Ea:n,Xi:o,mutatedKeys:i}}da(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,r){const i=this.Pa;this.Pa=e.Pa,this.mutatedKeys=e.mutatedKeys;const s=e.Ea.k_();s.sort(((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Qc()}};return n(e)-n(t)}(e.type,t.type)||this.ha(e.doc,t.doc))),this.Aa(n),r=null!=r&&r;const o=t&&!r?this.Ra():[],a=0===this.la.size&&this.current&&!r?1:0,c=a!==this.ca;return this.ca=a,0!==s.length||c?{snapshot:new yy(this.query,e.Pa,i,s,e.mutatedKeys,0===a,c,!1,!!n&&n.resumeToken.approximateByteSize()>0),Va:o}:{Va:o}}G_(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Pa:this.Pa,Ea:new gy,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{Va:[]}}ma(e){return!this.ua.has(e)&&!!this.Pa.has(e)&&!this.Pa.get(e).hasLocalMutations}Aa(e){e&&(e.addedDocuments.forEach((e=>this.ua=this.ua.add(e))),e.modifiedDocuments.forEach((e=>{})),e.removedDocuments.forEach((e=>this.ua=this.ua.delete(e))),this.current=e.current)}Ra(){if(!this.current)return[];const e=this.la;this.la=bd(),this.Pa.forEach((e=>{this.ma(e.key)&&(this.la=this.la.add(e.key))}));const t=[];return e.forEach((e=>{this.la.has(e)||t.push(new Ry(e))})),this.la.forEach((n=>{e.has(n)||t.push(new Oy(n))})),t}fa(e){this.ua=e.hs,this.la=bd();const t=this.Ta(e.documents);return this.applyChanges(t,!0)}ga(){return yy.fromInitialDocuments(this.query,this.Pa,this.mutatedKeys,0===this.ca,this.hasCachedResults)}}class Ly{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class My{constructor(e){this.key=e,this.pa=!1}}class Fy{constructor(e,t,n,r,i,s){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=s,this.ya={},this.wa=new ld((e=>rd(e)),nd),this.Sa=new Map,this.ba=new Set,this.Da=new ku(wl.comparator),this.Ca=new Map,this.va=new Rm,this.Fa={},this.Ma=new Map,this.xa=cm.Ln(),this.onlineState="Unknown",this.Oa=void 0}get isPrimaryClient(){return!0===this.Oa}}async function Uy(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r=fv(e);let i;const s=r.wa.get(t);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.ga()):i=await jy(r,t,n,!0),i}async function Vy(e,t){const n=fv(e);await jy(n,t,!0,!1)}async function jy(e,t,n,r){const i=await ig(e.localStore,Xh(t)),s=i.targetId,o=n?e.sharedClientState.addLocalQueryTarget(s):"not-current";let a;return r&&(a=await zy(e,t,s,"current"===o,i.resumeToken)),e.isPrimaryClient&&n&&zg(e.remoteStore,i),a}async function zy(e,t,n,r,i){e.Na=(t,n,r)=>async function(e,t,n,r){let i=t.view.Ta(n);i.Xi&&(i=await og(e.localStore,t.query,!1).then((e=>{let{documents:n}=e;return t.view.Ta(n,i)})));const s=r&&r.targetChanges.get(t.targetId),o=r&&null!=r.targetMismatches.get(t.targetId),a=t.view.applyChanges(i,e.isPrimaryClient,s,o);return Zy(e,t.targetId,a.Va),a.snapshot}(e,t,n,r);const s=await og(e.localStore,t,!0),o=new Dy(t,s.hs),a=o.Ta(s.documents),c=vf.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState,i),l=o.applyChanges(a,e.isPrimaryClient,c);Zy(e,n,l.Va);const u=new Ly(t,n,o);return e.wa.set(t,u),e.Sa.has(n)?e.Sa.get(n).push(t):e.Sa.set(n,[t]),l.snapshot}async function By(e,t,n){const r=$c(e),i=r.wa.get(t),s=r.Sa.get(i.targetId);if(s.length>1)return r.Sa.set(i.targetId,s.filter((e=>!nd(e,t)))),void r.wa.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await sg(r.localStore,i.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(i.targetId),n&&Bg(r.remoteStore,i.targetId),Jy(r,i.targetId)})).catch(Pl)):(Jy(r,i.targetId),await sg(r.localStore,i.targetId,!0))}async function qy(e,t){const n=$c(e),r=n.wa.get(t),i=n.Sa.get(r.targetId);n.isPrimaryClient&&1===i.length&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Bg(n.remoteStore,r.targetId))}async function Ky(e,t){const n=$c(e);try{const e=await function(e,t){const n=$c(e),r=t.snapshotVersion;let i=n.ns;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(e=>{const s=n.os.newChangeBuffer({trackRemovals:!0});i=n.ns;const o=[];t.targetChanges.forEach(((s,a)=>{const c=i.get(a);if(!c)return;o.push(n.Qr.removeMatchingKeys(e,s.removedDocuments,a).next((()=>n.Qr.addMatchingKeys(e,s.addedDocuments,a))));let l=c.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(a)?l=l.withResumeToken(Du.EMPTY_BYTE_STRING,pl.min()).withLastLimboFreeSnapshotVersion(pl.min()):s.resumeToken.approximateByteSize()>0&&(l=l.withResumeToken(s.resumeToken,r)),i=i.insert(a,l),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(c,l,s)&&o.push(n.Qr.updateTargetData(e,l))}));let a=hd(),c=bd();if(t.documentUpdates.forEach((r=>{t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),o.push(ng(e,s,t.documentUpdates).next((e=>{a=e.cs,c=e.ls}))),!r.isEqual(pl.min())){const t=n.Qr.getLastRemoteSnapshotVersion(e).next((t=>n.Qr.setTargetsMetadata(e,e.currentSequenceNumber,r)));o.push(t)}return Ol.waitFor(o).next((()=>s.apply(e))).next((()=>n.localDocuments.getLocalViewOfDocuments(e,a,c))).next((()=>a))})).then((e=>(n.ns=i,e)))}(n.localStore,t);t.targetChanges.forEach(((e,t)=>{const r=n.Ca.get(t);r&&(Yc(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?r.pa=!0:e.modifiedDocuments.size>0?Yc(r.pa):e.removedDocuments.size>0&&(Yc(r.pa),r.pa=!1))})),await nv(n,e,t)}catch(e){await Pl(e)}}function Gy(e,t,n){const r=$c(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.wa.forEach(((n,r)=>{const i=r.view.G_(t);i.snapshot&&e.push(i.snapshot)})),function(e,t){const n=$c(e);n.onlineState=t;let r=!1;n.queries.forEach(((e,n)=>{for(const i of n.Q_)i.G_(t)&&(r=!0)})),r&&Iy(n)}(r.eventManager,t),e.length&&r.ya.u_(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function Wy(e,t,n){const r=$c(e);r.sharedClientState.updateQueryState(t,"rejected",n);const i=r.Ca.get(t),s=i&&i.key;if(s){let e=new ku(wl.comparator);e=e.insert(s,fh.newNoDocument(s,pl.min()));const n=bd().add(s),i=new yf(pl.min(),new Map,new ku(ul),e,n);await Ky(r,i),r.Da=r.Da.remove(s),r.Ca.delete(t),tv(r)}else await sg(r.localStore,t,!1).then((()=>Jy(r,t,n))).catch(Pl)}async function Hy(e,t){const n=$c(e),r=t.batch.batchId;try{const e=await function(e,t){const n=$c(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(e=>{const r=t.batch.keys(),i=n.os.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){const i=n.batch,s=i.keys();let o=Ol.resolve();return s.forEach((e=>{o=o.next((()=>r.getEntry(t,e))).next((t=>{const s=n.docVersions.get(e);Yc(null!==s),t.version.compareTo(s)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),o.next((()=>e.mutationQueue.removeMutationBatch(t,i)))}(n,e,t,i).next((()=>i.apply(e))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=bd();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t)))).next((()=>n.localDocuments.getDocuments(e,r)))}))}(n.localStore,t);$y(n,r,null),Yy(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await nv(n,e)}catch(e){await Pl(e)}}async function Qy(e,t,n){const r=$c(e);try{const e=await function(e,t){const n=$c(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(e=>{let r;return n.mutationQueue.lookupMutationBatch(e,t).next((t=>(Yc(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t)))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r))).next((()=>n.localDocuments.getDocuments(e,r)))}))}(r.localStore,t);$y(r,t,n),Yy(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await nv(r,e)}catch(n){await Pl(n)}}function Yy(e,t){(e.Ma.get(t)||[]).forEach((e=>{e.resolve()})),e.Ma.delete(t)}function $y(e,t,n){const r=$c(e);let i=r.Fa[r.currentUser.toKey()];if(i){const e=i.get(t);e&&(n?e.reject(n):e.resolve(),i=i.remove(t)),r.Fa[r.currentUser.toKey()]=i}}function Jy(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.Sa.get(t))e.wa.delete(r),n&&e.ya.La(r,n);e.Sa.delete(t),e.isPrimaryClient&&e.va.Vr(t).forEach((t=>{e.va.containsKey(t)||Xy(e,t)}))}function Xy(e,t){e.ba.delete(t.path.canonicalString());const n=e.Da.get(t);null!==n&&(Bg(e.remoteStore,n),e.Da=e.Da.remove(t),e.Ca.delete(n),tv(e))}function Zy(e,t,n){for(const r of n)r instanceof Oy?(e.va.addReference(r.key,t),ev(e,r)):r instanceof Ry?(Kc("SyncEngine","Document no longer in limbo: "+r.key),e.va.removeReference(r.key,t),e.va.containsKey(r.key)||Xy(e,r.key)):Qc()}function ev(e,t){const n=t.key,r=n.path.canonicalString();e.Da.get(n)||e.ba.has(r)||(Kc("SyncEngine","New document in limbo: "+n),e.ba.add(r),tv(e))}function tv(e){for(;e.ba.size>0&&e.Da.size<e.maxConcurrentLimboResolutions;){const t=e.ba.values().next().value;e.ba.delete(t);const n=new wl(gl.fromString(t)),r=e.xa.next();e.Ca.set(r,new My(n)),e.Da=e.Da.insert(n,r),zg(e.remoteStore,new op(Xh(Qh(n.path)),r,"TargetPurposeLimboResolution",Kl._e))}}async function nv(e,t,n){const r=$c(e),i=[],s=[],o=[];r.wa.isEmpty()||(r.wa.forEach(((e,a)=>{o.push(r.Na(a,t,n).then((e=>{if((e||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(a.targetId,(null==e?void 0:e.fromCache)?"not-current":"current"),e){i.push(e);const t=Ym.Ki(a.targetId,e);s.push(t)}})))})),await Promise.all(o),r.ya.u_(i),await async function(e,t){const n=$c(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(e=>Ol.forEach(t,(t=>Ol.forEach(t.qi,(r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r))).next((()=>Ol.forEach(t.Qi,(r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))))))}catch(e){if(!Fl(e))throw e;Kc("LocalStore","Failed to update sequence numbers: "+e)}for(const r of t){const e=r.targetId;if(!r.fromCache){const t=n.ns.get(e),r=t.snapshotVersion,i=t.withLastLimboFreeSnapshotVersion(r);n.ns=n.ns.insert(e,i)}}}(r.localStore,s))}async function rv(e,t){const n=$c(e);if(!n.currentUser.isEqual(t)){Kc("SyncEngine","User change. New user:",t.toKey());const e=await eg(n.localStore,t);n.currentUser=t,function(e,t){e.Ma.forEach((e=>{e.forEach((e=>{e.reject(new Xc(Jc.CANCELLED,t))}))})),e.Ma.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await nv(n,e.us)}}function iv(e,t){const n=$c(e),r=n.Ca.get(t);if(r&&r.pa)return bd().add(r.key);{let e=bd();const r=n.Sa.get(t);if(!r)return e;for(const t of r){const r=n.wa.get(t);e=e.unionWith(r.view.Ia)}return e}}async function sv(e,t){const n=$c(e),r=await og(n.localStore,t.query,!0),i=t.view.fa(r);return n.isPrimaryClient&&Zy(n,t.targetId,i.Va),i}async function ov(e,t){const n=$c(e);return cg(n.localStore,t).then((e=>nv(n,e)))}async function av(e,t,n,r){const i=$c(e),s=await function(e,t){const n=$c(e),r=$c(n.mutationQueue);return n.persistence.runTransaction("Lookup mutation documents","readonly",(e=>r.vn(e,t).next((t=>t?n.localDocuments.getDocuments(e,t):Ol.resolve(null)))))}(i.localStore,t);null!==s?("pending"===n?await ey(i.remoteStore):"acknowledged"===n||"rejected"===n?($y(i,t,r||null),Yy(i,t),function(e,t){$c($c(e).mutationQueue).Mn(t)}(i.localStore,t)):Qc(),await nv(i,s)):Kc("SyncEngine","Cannot apply mutation batch with id: "+t)}async function cv(e,t,n){const r=$c(e),i=[],s=[];for(const o of t){let e;const t=r.Sa.get(o);if(t&&0!==t.length){e=await ig(r.localStore,Xh(t[0]));for(const e of t){const t=r.wa.get(e),n=await sv(r,t);n.snapshot&&s.push(n.snapshot)}}else{const t=await ag(r.localStore,o);e=await ig(r.localStore,t),await zy(r,lv(t),o,!1,e.resumeToken)}i.push(e)}return r.ya.u_(s),i}function lv(e){return Hh(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function uv(e){return function(e){return $c($c(e).persistence).Bi()}($c(e).localStore)}async function hv(e,t,n,r){const i=$c(e);if(i.Oa)return void Kc("SyncEngine","Ignoring unexpected query state notification.");const s=i.Sa.get(t);if(s&&s.length>0)switch(n){case"current":case"not-current":{const e=await cg(i.localStore,od(s[0])),r=yf.createSynthesizedRemoteEventForCurrentChange(t,"current"===n,Du.EMPTY_BYTE_STRING);await nv(i,e,r);break}case"rejected":await sg(i.localStore,t,!0),Jy(i,t,r);break;default:Qc()}}async function dv(e,t,n){const r=fv(e);if(r.Oa){for(const e of t){if(r.Sa.has(e)&&r.sharedClientState.isActiveQueryTarget(e)){Kc("SyncEngine","Adding an already active target "+e);continue}const t=await ag(r.localStore,e),n=await ig(r.localStore,t);await zy(r,lv(t),n.targetId,!1,n.resumeToken),zg(r.remoteStore,n)}for(const e of n)r.Sa.has(e)&&await sg(r.localStore,e,!1).then((()=>{Bg(r.remoteStore,e),Jy(r,e)})).catch(Pl)}}function fv(e){const t=$c(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=Ky.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=iv.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=Wy.bind(null,t),t.ya.u_=Sy.bind(null,t.eventManager),t.ya.La=Ey.bind(null,t.eventManager),t}function pv(e){const t=$c(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Hy.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=Qy.bind(null,t),t}class mv{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=Pg(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return Zm(this.persistence,new Jm,e.initialUser,this.serializer)}createPersistence(e){return new Vm(zm.Hr,this.serializer)}createSharedClientState(e){return new bg}async terminate(){var e,t;null===(e=this.gcScheduler)||void 0===e||e.stop(),null===(t=this.indexBackfillerScheduler)||void 0===t||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class gv extends mv{constructor(e,t,n){super(),this.ka=e,this.cacheSizeBytes=t,this.forceOwnership=n,this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.ka.initialize(this,e),await pv(this.ka.syncEngine),await ey(this.ka.remoteStore),await this.persistence.fi((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}createLocalStore(e){return Zm(this.persistence,new Jm,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,t){const n=this.persistence.referenceDelegate.garbageCollector;return new mm(n,e.asyncQueue,t)}createIndexBackfillerScheduler(e,t){const n=new ql(t,this.persistence);return new Bl(e.asyncQueue,n)}createPersistence(e){const t=Qm(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?em.withCacheSize(this.cacheSizeBytes):em.DEFAULT;return new Gm(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,Ng(),Ag(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new bg}}class yv extends gv{constructor(e,t){super(e,t,!1),this.ka=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const t=this.ka.syncEngine;this.sharedClientState instanceof wg&&(this.sharedClientState.syncEngine={Zs:av.bind(null,t),Xs:hv.bind(null,t),eo:dv.bind(null,t),Bi:uv.bind(null,t),Ys:ov.bind(null,t)},await this.sharedClientState.start()),await this.persistence.fi((async e=>{await async function(e,t){const n=$c(e);if(fv(n),pv(n),!0===t&&!0!==n.Oa){const e=n.sharedClientState.getAllActiveQueryTargets(),t=await cv(n,e.toArray());n.Oa=!0,await uy(n.remoteStore,!0);for(const r of t)zg(n.remoteStore,r)}else if(!1===t&&!1!==n.Oa){const e=[];let t=Promise.resolve();n.Sa.forEach(((r,i)=>{n.sharedClientState.isLocalQueryTarget(i)?e.push(i):t=t.then((()=>(Jy(n,i),sg(n.localStore,i,!0)))),Bg(n.remoteStore,i)})),await t,await cv(n,e),function(e){const t=$c(e);t.Ca.forEach(((e,n)=>{Bg(t.remoteStore,n)})),t.va.mr(),t.Ca=new Map,t.Da=new ku(wl.comparator)}(n),n.Oa=!1,await uy(n.remoteStore,!1)}}(this.ka.syncEngine,e),this.gcScheduler&&(e&&!this.gcScheduler.started?this.gcScheduler.start():e||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(e&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():e||this.indexBackfillerScheduler.stop())}))}createSharedClientState(e){const t=Ng();if(!wg.D(t))throw new Xc(Jc.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const n=Qm(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new wg(t,e.asyncQueue,n,e.clientId,e.initialUser)}}class vv{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>Gy(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=rv.bind(null,this.syncEngine),await uy(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new wy}createDatastore(e){const t=Pg(e.databaseInfo.databaseId),n=function(e){return new xg(e)}(e.databaseInfo);return function(e,t,n,r){return new Mg(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return function(e,t,n,r,i){return new Ug(e,t,n,r,i)}(this.localStore,this.datastore,e.asyncQueue,(e=>Gy(this.syncEngine,e,0)),Sg.D()?new Sg:new _g)}createSyncEngine(e,t){return function(e,t,n,r,i,s,o){const a=new Fy(e,t,n,r,i,s);return o&&(a.Oa=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e;await async function(e){const t=$c(e);Kc("RemoteStore","RemoteStore shutting down."),t.v_.add(5),await jg(t),t.M_.shutdown(),t.x_.set("Unknown")}(this.remoteStore),null===(e=this.datastore)||void 0===e||e.terminate()}}function wv(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10240,n=0;return{async read(){if(n<e.byteLength){const r={value:e.slice(n,n+t),done:!1};return n+=t,r}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}class bv{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.qa(this.observer.next,e)}error(e){this.observer.error?this.qa(this.observer.error,e):Gc("Uncaught Error in snapshot listener:",e.toString())}Qa(){this.muted=!0}qa(e,t){this.muted||setTimeout((()=>{this.muted||e(t)}),0)}}class _v{constructor(e,t){this.Ka=e,this.serializer=t,this.metadata=new Zc,this.buffer=new Uint8Array,this.$a=new TextDecoder("utf-8"),this.Ua().then((e=>{e&&e.ra()?this.metadata.resolve(e.na.metadata):this.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             ".concat(JSON.stringify(null==e?void 0:e.na))))}),(e=>this.metadata.reject(e)))}close(){return this.Ka.cancel()}async getMetadata(){return this.metadata.promise}async Ba(){return await this.getMetadata(),this.Ua()}async Ua(){const e=await this.Wa();if(null===e)return null;const t=this.$a.decode(e),n=Number(t);isNaN(n)&&this.Ga("length string (".concat(t,") is not valid number"));const r=await this.za(n);return new xy(JSON.parse(r),e.length+n)}ja(){return this.buffer.findIndex((e=>e==="{".charCodeAt(0)))}async Wa(){for(;this.ja()<0&&!await this.Ha(););if(0===this.buffer.length)return null;const e=this.ja();e<0&&this.Ga("Reached the end of bundle when a length string is expected.");const t=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),t}async za(e){for(;this.buffer.length<e;)await this.Ha()&&this.Ga("Reached the end of bundle when more is expected.");const t=this.$a.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),t}Ga(e){throw this.Ka.cancel(),new Error("Invalid bundle format: ".concat(e))}async Ha(){const e=await this.Ka.read();if(!e.done){const t=new Uint8Array(this.buffer.length+e.value.length);t.set(this.buffer),t.set(e.value,this.buffer.length),this.buffer=t}return e.done}}class Sv{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new Xc(Jc.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const t=await async function(e,t){const n=$c(e),r={documents:t.map((e=>Uf(n.serializer,e)))},i=await n.vo("BatchGetDocuments",n.serializer.databaseId,gl.emptyPath(),r,t.length),s=new Map;i.forEach((e=>{const t=function(e,t){return"found"in t?function(e,t){Yc(!!t.found),t.found.name,t.found.updateTime;const n=Vf(e,t.found.name),r=Df(t.found.updateTime),i=t.found.createTime?Df(t.found.createTime):pl.min(),s=new hh({mapValue:{fields:t.found.fields}});return fh.newFoundDocument(n,r,i,s)}(e,t):"missing"in t?function(e,t){Yc(!!t.missing),Yc(!!t.readTime);const n=Vf(e,t.missing),r=Df(t.readTime);return fh.newNoDocument(n,r)}(e,t):Qc()}(n.serializer,e);s.set(t.key.toString(),t)}));const o=[];return t.forEach((e=>{const t=s.get(e.toString());Yc(!!t),o.push(t)})),o}(this.datastore,e);return t.forEach((e=>this.recordVersion(e))),t}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastTransactionError=e}this.writtenDocs.add(e.toString())}delete(e){this.write(new Zd(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach((t=>{e.delete(t.key.toString())})),e.forEach(((e,t)=>{const n=wl.fromPath(t);this.mutations.push(new ef(n,this.precondition(n)))})),await async function(e,t){const n=$c(e),r={writes:t.map((e=>Wf(n.serializer,e)))};await n.So("Commit",n.serializer.databaseId,gl.emptyPath(),r)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Qc();t=pl.min()}const n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new Xc(Jc.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(pl.min())?jd.exists(!1):jd.updateTime(t):jd.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(pl.min()))throw new Xc(Jc.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return jd.updateTime(t)}return jd.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class Ev{constructor(e,t,n,r,i){this.asyncQueue=e,this.datastore=t,this.options=n,this.updateFunction=r,this.deferred=i,this.Ja=n.maxAttempts,this.jo=new Og(this.asyncQueue,"transaction_retry")}Ya(){this.Ja-=1,this.Za()}Za(){this.jo.qo((async()=>{const e=new Sv(this.datastore),t=this.Xa(e);t&&t.then((t=>{this.asyncQueue.enqueueAndForget((()=>e.commit().then((()=>{this.deferred.resolve(t)})).catch((e=>{this.eu(e)}))))})).catch((e=>{this.eu(e)}))}))}Xa(e){try{const t=this.updateFunction(e);return!Gl(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}eu(e){this.Ja>0&&this.tu(e)?(this.Ja-=1,this.asyncQueue.enqueueAndForget((()=>(this.Za(),Promise.resolve())))):this.deferred.reject(e)}tu(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!cf(t)}return!1}}class Iv{constructor(e,t,n,r){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=jc.UNAUTHENTICATED,this.clientId=ll.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(n,(async e=>{Kc("FirestoreClient","Received user=",e.uid),await this.authCredentialListener(e),this.user=e})),this.appCheckCredentials.start(n,(e=>(Kc("FirestoreClient","Received new app check token=",e),this.appCheckCredentialListener(e,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Xc(Jc.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Zc;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=py(t,"Failed to shutdown persistence");e.reject(n)}})),e.promise}}async function Tv(e,t){e.asyncQueue.verifyOperationInProgress(),Kc("FirestoreClient","Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener((async e=>{r.isEqual(e)||(await eg(t.localStore,e),r=e)})),t.persistence.setDatabaseDeletedListener((()=>e.terminate())),e._offlineComponents=t}async function kv(e,t){e.asyncQueue.verifyOperationInProgress();const n=await xv(e);Kc("FirestoreClient","Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener((e=>ly(t.remoteStore,e))),e.setAppCheckTokenChangeListener(((e,n)=>ly(t.remoteStore,n))),e._onlineComponents=t}function Cv(e){return"FirebaseError"===e.name?e.code===Jc.FAILED_PRECONDITION||e.code===Jc.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}async function xv(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){Kc("FirestoreClient","Using user provided OfflineComponentProvider");try{await Tv(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!Cv(n))throw n;Wc("Error using user provided cache. Falling back to memory cache: "+n),await Tv(e,new mv)}}else Kc("FirestoreClient","Using default OfflineComponentProvider"),await Tv(e,new mv);return e._offlineComponents}async function Nv(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(Kc("FirestoreClient","Using user provided OnlineComponentProvider"),await kv(e,e._uninitializedComponentsProvider._online)):(Kc("FirestoreClient","Using default OnlineComponentProvider"),await kv(e,new vv))),e._onlineComponents}function Av(e){return xv(e).then((e=>e.persistence))}function Pv(e){return xv(e).then((e=>e.localStore))}function Ov(e){return Nv(e).then((e=>e.remoteStore))}function Rv(e){return Nv(e).then((e=>e.syncEngine))}function Dv(e){return Nv(e).then((e=>e.datastore))}async function Lv(e){const t=await Nv(e),n=t.eventManager;return n.onListen=Uy.bind(null,t.syncEngine),n.onUnlisten=By.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=Vy.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=qy.bind(null,t.syncEngine),n}function Mv(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new Zc;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,r,i){const s=new bv({next:s=>{t.enqueueAndForget((()=>_y(e,o)));const a=s.docs.has(n);!a&&s.fromCache?i.reject(new Xc(Jc.UNAVAILABLE,"Failed to get document because the client is offline.")):a&&s.fromCache&&r&&"server"===r.source?i.reject(new Xc(Jc.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(s)},error:e=>i.reject(e)}),o=new Cy(Qh(n.path),s,{includeMetadataChanges:!0,ta:!0});return by(e,o)}(await Lv(e),e.asyncQueue,t,n,r))),r.promise}function Fv(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new Zc;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,r,i){const s=new bv({next:n=>{t.enqueueAndForget((()=>_y(e,o))),n.fromCache&&"server"===r.source?i.reject(new Xc(Jc.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:e=>i.reject(e)}),o=new Cy(n,s,{includeMetadataChanges:!0,ta:!0});return by(e,o)}(await Lv(e),e.asyncQueue,t,n,r))),r.promise}function Uv(e,t,n,r){const i=function(e,t){let n;return n="string"==typeof e?hf().encode(e):e,function(e,t){return new _v(e,t)}(function(e,t){if(e instanceof Uint8Array)return wv(e,t);if(e instanceof ArrayBuffer)return wv(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(n),t)}(n,Pg(t));e.asyncQueue.enqueueAndForget((async()=>{!function(e,t,n){const r=$c(e);(async function(e,t,n){try{const r=await t.getMetadata();if(await function(e,t){const n=$c(e),r=Df(t.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",(e=>n.$r.getBundleMetadata(e,t.id))).then((e=>!!e&&e.createTime.compareTo(r)>=0))}(e.localStore,r))return await t.close(),n._completeWith(function(e){return{taskState:"Success",documentsLoaded:e.totalDocuments,bytesLoaded:e.totalBytes,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}(r)),Promise.resolve(new Set);n._updateProgress(Py(r));const i=new Ay(r,e.localStore,t.serializer);let s=await t.Ba();for(;s;){const e=await i.sa(s);e&&n._updateProgress(e),s=await t.Ba()}const o=await i.complete();return await nv(e,o.aa,void 0),await function(e,t){const n=$c(e);return n.persistence.runTransaction("Save bundle","readwrite",(e=>n.$r.saveBundleMetadata(e,t)))}(e.localStore,r),n._completeWith(o.progress),Promise.resolve(o._a)}catch(e){return Wc("SyncEngine","Loading bundle failed with ".concat(e)),n._failWith(e),Promise.resolve(new Set)}})(r,t,n).then((e=>{r.sharedClientState.notifyBundleLoaded(e)}))}(await Rv(e),i,r)}))}function Vv(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}const jv=new Map;function zv(e,t,n){if(!n)throw new Xc(Jc.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function Bv(e,t,n,r){if(!0===t&&!0===r)throw new Xc(Jc.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))}function qv(e){if(!wl.isDocumentKey(e))throw new Xc(Jc.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function Kv(e){if(wl.isDocumentKey(e))throw new Xc(Jc.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function Gv(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}}return"function"==typeof e?"a function":Qc()}function Wv(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Xc(Jc.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Gv(e);throw new Xc(Jc.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}}return e}function Hv(e,t){if(t<=0)throw new Xc(Jc.INVALID_ARGUMENT,"Function ".concat(e,"() requires a positive number, but it was: ").concat(t,"."))}class Qv{constructor(e){var t,n;if(void 0===e.host){if(void 0!==e.ssl)throw new Xc(Jc.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Xc(Jc.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Bv("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Vv(null!==(n=e.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new Xc(Jc.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (must not be NaN)"));if(e.timeoutSeconds<5)throw new Xc(Jc.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (minimum allowed value is 5)"));if(e.timeoutSeconds>30)throw new Xc(Jc.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (maximum allowed value is 30)"))}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(e,t){return e.timeoutSeconds===t.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Yv{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Qv({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Xc(Jc.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Xc(Jc.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Qv(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new tl;switch(e.type){case"firstParty":return new sl(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new Xc(Jc.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=jv.get(e);t&&(Kc("ComponentProvider","Removing Datastore"),jv.delete(e),t.terminate())}(this),Promise.resolve()}}function $v(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};var i;const s=(e=Wv(e,Yv))._getSettings(),o="".concat(t,":").concat(n);if("firestore.googleapis.com"!==s.host&&s.host!==o&&Wc("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),e._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let t,n;if("string"==typeof r.mockUserToken)t=r.mockUserToken,n=jc.MOCK_USER;else{t=function(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[An(JSON.stringify({alg:"none",type:"JWT"})),An(JSON.stringify(s)),""].join(".")}(r.mockUserToken,null===(i=e._app)||void 0===i?void 0:i.options.projectId);const s=r.mockUserToken.sub||r.mockUserToken.user_id;if(!s)throw new Xc(Jc.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new jc(s)}e._authCredentials=new nl(new el(t,n))}}class Jv{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new Jv(this.firestore,e,this._query)}}class Xv{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Zv(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Xv(this.firestore,e,this._key)}}class Zv extends Jv{constructor(e,t,n){super(e,t,Qh(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Xv(this.firestore,null,new wl(e))}withConverter(e){return new Zv(this.firestore,e,this._path)}}function ew(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=rr(e),zv("collection","path",t),e instanceof Yv){const n=gl.fromString(t,...r);return Kv(n),new Zv(e,null,n)}{if(!(e instanceof Xv||e instanceof Zv))throw new Xc(Jc.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(gl.fromString(t,...r));return Kv(n),new Zv(e.firestore,null,n)}}function tw(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=rr(e),1===arguments.length&&(t=ll.newId()),zv("doc","path",t),e instanceof Yv){const n=gl.fromString(t,...r);return qv(n),new Xv(e,null,new wl(n))}{if(!(e instanceof Xv||e instanceof Zv))throw new Xc(Jc.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(gl.fromString(t,...r));return qv(n),new Xv(e.firestore,e instanceof Zv?e.converter:null,new wl(n))}}function nw(e,t){return e=rr(e),t=rr(t),(e instanceof Xv||e instanceof Zv)&&(t instanceof Xv||t instanceof Zv)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function rw(e,t){return e=rr(e),t=rr(t),e instanceof Jv&&t instanceof Jv&&e.firestore===t.firestore&&nd(e._query,t._query)&&e.converter===t.converter}class iw{constructor(){this.nu=Promise.resolve(),this.ru=[],this.iu=!1,this.su=[],this.ou=null,this._u=!1,this.au=!1,this.uu=[],this.jo=new Og(this,"async_queue_retry"),this.cu=()=>{const e=Ag();e&&Kc("AsyncQueue","Visibility state changed to "+e.visibilityState),this.jo.Ko()};const e=Ag();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.cu)}get isShuttingDown(){return this.iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.lu(),this.hu(e)}enterRestrictedMode(e){if(!this.iu){this.iu=!0,this.au=e||!1;const t=Ag();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.cu)}}enqueue(e){if(this.lu(),this.iu)return new Promise((()=>{}));const t=new Zc;return this.hu((()=>this.iu&&this.au?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.ru.push(e),this.Pu())))}async Pu(){if(0!==this.ru.length){try{await this.ru[0](),this.ru.shift(),this.jo.reset()}catch(e){if(!Fl(e))throw e;Kc("AsyncQueue","Operation failed with retryable error: "+e)}this.ru.length>0&&this.jo.qo((()=>this.Pu()))}}hu(e){const t=this.nu.then((()=>(this._u=!0,e().catch((e=>{this.ou=e,this._u=!1;const t=function(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw Gc("INTERNAL UNHANDLED ERROR: ",t),e})).then((e=>(this._u=!1,e))))));return this.nu=t,t}enqueueAfterDelay(e,t,n){this.lu(),this.uu.indexOf(e)>-1&&(t=0);const r=fy.createAndSchedule(this,e,t,n,(e=>this.Iu(e)));return this.su.push(r),r}lu(){this.ou&&Qc()}verifyOperationInProgress(){}async Tu(){let e;do{e=this.nu,await e}while(e!==this.nu)}Eu(e){for(const t of this.su)if(t.timerId===e)return!0;return!1}du(e){return this.Tu().then((()=>{this.su.sort(((e,t)=>e.targetTimeMs-t.targetTimeMs));for(const t of this.su)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Tu()}))}Au(e){this.uu.push(e)}Iu(e){const t=this.su.indexOf(e);this.su.splice(t,1)}}function sw(e){return function(e,t){if("object"!=typeof e||null===e)return!1;const n=e;for(const r of t)if(r in n&&"function"==typeof n[r])return!0;return!1}(e,["next","error","complete"])}class ow{constructor(){this._progressObserver={},this._taskCompletionResolver=new Zc,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,n){this._progressObserver={next:e,error:t,complete:n}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class aw extends Yv{constructor(e,t,n,r){super(e,t,n,r),this.type="firestore",this._queue=new iw,this._persistenceKey=(null==r?void 0:r.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||lw(this),this._firestoreClient.terminate()}}function cw(e){return e._firestoreClient||lw(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function lw(e){var t,n,r;const i=e._freezeSettings(),s=function(e,t,n,r){return new Bu(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,Vv(r.experimentalLongPollingOptions),r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,i);e._firestoreClient=new Iv(e._authCredentials,e._appCheckCredentials,e._queue,s),(null===(n=i.localCache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(r=i.localCache)||void 0===r?void 0:r._onlineComponentProvider)&&(e._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}function uw(e,t,n){const r=new Zc;return e.asyncQueue.enqueue((async()=>{try{await Tv(e,n),await kv(e,t),r.resolve()}catch(e){const n=e;if(!Cv(n))throw n;Wc("Error enabling indexeddb cache. Falling back to memory cache: "+n),r.reject(n)}})).then((()=>r.promise))}function hw(e){return function(e){const t=new Zc;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t){const n=$c(e);Hg(n.remoteStore)||Kc("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const e=await function(e){const t=$c(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(e=>t.mutationQueue.getHighestUnacknowledgedBatchId(e)))}(n.localStore);if(-1===e)return void t.resolve();const r=n.Ma.get(e)||[];r.push(t),n.Ma.set(e,r)}catch(e){const n=py(e,"Initialization of waitForPendingWrites() operation failed");t.reject(n)}}(await Rv(e),t))),t.promise}(cw(e=Wv(e,aw)))}function dw(e){return function(e){return e.asyncQueue.enqueue((async()=>{const t=await Av(e),n=await Ov(e);return t.setNetworkEnabled(!0),function(e){const t=$c(e);return t.v_.delete(0),Vg(t)}(n)}))}(cw(e=Wv(e,aw)))}function fw(e){return function(e){return e.asyncQueue.enqueue((async()=>{const t=await Av(e),n=await Ov(e);return t.setNetworkEnabled(!1),async function(e){const t=$c(e);t.v_.add(0),await jg(t),t.x_.set("Offline")}(n)}))}(cw(e=Wv(e,aw)))}function pw(e,t){return function(e,t){return e.asyncQueue.enqueue((async()=>function(e,t){const n=$c(e);return n.persistence.runTransaction("Get named query","readonly",(e=>n.$r.getNamedQuery(e,t)))}(await Pv(e),t)))}(cw(e=Wv(e,aw)),t).then((t=>t?new Jv(e,null,t.query):null))}function mw(e){if(e._initialized||e._terminated)throw new Xc(Jc.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class gw{constructor(e){this._byteString=e}static fromBase64String(e){try{return new gw(Du.fromBase64String(e))}catch(e){throw new Xc(Jc.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new gw(Du.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class yw{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(let r=0;r<t.length;++r)if(0===t[r].length)throw new Xc(Jc.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new vl(t)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class vw{constructor(e){this._methodName=e}}class ww{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Xc(Jc.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Xc(Jc.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ul(this._lat,e._lat)||ul(this._long,e._long)}}const bw=/^__.*__$/;class _w{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new Yd(e,this.data,this.fieldMask,t,this.fieldTransforms):new Qd(e,this.data,t,this.fieldTransforms)}}class Sw{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new Yd(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Ew(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Qc()}}class Iw{constructor(e,t,n,r,i,s){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===i&&this.Ru(),this.fieldTransforms=i||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Vu(){return this.settings.Vu}mu(e){return new Iw(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}fu(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.mu({path:n,gu:!1});return r.pu(e),r}yu(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.mu({path:n,gu:!1});return r.Ru(),r}wu(e){return this.mu({path:void 0,gu:!0})}Su(e){return Kw(e,this.settings.methodName,this.settings.bu||!1,this.path,this.settings.Du)}contains(e){return void 0!==this.fieldMask.find((t=>e.isPrefixOf(t)))||void 0!==this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))}Ru(){if(this.path)for(let e=0;e<this.path.length;e++)this.pu(this.path.get(e))}pu(e){if(0===e.length)throw this.Su("Document fields must not be empty");if(Ew(this.Vu)&&bw.test(e))throw this.Su('Document fields cannot begin and end with "__"')}}class Tw{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||Pg(e)}Cu(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new Iw({Vu:e,methodName:t,Du:n,path:vl.emptyPath(),gu:!1,bu:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function kw(e){const t=e._freezeSettings(),n=Pg(e._databaseId);return new Tw(e._databaseId,!!t.ignoreUndefinedProperties,n)}function Cw(e,t,n,r,i){let s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const o=e.Cu(s.merge||s.mergeFields?2:0,t,n,i);jw("Data must be an object, but it was:",o,r);const a=Uw(r,o);let c,l;if(s.merge)c=new Ou(o.fieldMask),l=o.fieldTransforms;else if(s.mergeFields){const e=[];for(const r of s.mergeFields){const i=zw(t,r,n);if(!o.contains(i))throw new Xc(Jc.INVALID_ARGUMENT,"Field '".concat(i,"' is specified in your field mask but missing from your input data."));Gw(e,i)||e.push(i)}c=new Ou(e),l=o.fieldTransforms.filter((e=>c.covers(e.field)))}else c=null,l=o.fieldTransforms;return new _w(new hh(a),c,l)}class xw extends vw{_toFieldTransform(e){if(2!==e.Vu)throw 1===e.Vu?e.Su("".concat(this._methodName,"() can only appear at the top level of your update data")):e.Su("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof xw}}function Nw(e,t,n){return new Iw({Vu:3,Du:t.settings.Du,methodName:e._methodName,gu:n},t.databaseId,t.serializer,t.ignoreUndefinedProperties)}class Aw extends vw{_toFieldTransform(e){return new Ud(e.path,new Ad)}isEqual(e){return e instanceof Aw}}class Pw extends vw{constructor(e,t){super(e),this.vu=t}_toFieldTransform(e){const t=Nw(this,e,!0),n=this.vu.map((e=>Fw(e,t))),r=new Pd(n);return new Ud(e.path,r)}isEqual(e){return e instanceof Pw&&Yn(this.vu,e.vu)}}class Ow extends vw{constructor(e,t){super(e),this.vu=t}_toFieldTransform(e){const t=Nw(this,e,!0),n=this.vu.map((e=>Fw(e,t))),r=new Rd(n);return new Ud(e.path,r)}isEqual(e){return e instanceof Ow&&Yn(this.vu,e.vu)}}class Rw extends vw{constructor(e,t){super(e),this.Fu=t}_toFieldTransform(e){const t=new Ld(e.serializer,Td(e.serializer,this.Fu));return new Ud(e.path,t)}isEqual(e){return e instanceof Rw&&this.Fu===e.Fu}}function Dw(e,t,n,r){const i=e.Cu(1,t,n);jw("Data must be an object, but it was:",i,r);const s=[],o=hh.empty();Iu(r,((e,r)=>{const a=qw(t,e,n);r=rr(r);const c=i.yu(a);if(r instanceof xw)s.push(a);else{const e=Fw(r,c);null!=e&&(s.push(a),o.set(a,e))}}));const a=new Ou(s);return new Sw(o,a,i.fieldTransforms)}function Lw(e,t,n,r,i,s){const o=e.Cu(1,t,n),a=[zw(t,r,n)],c=[i];if(s.length%2!=0)throw new Xc(Jc.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(let d=0;d<s.length;d+=2)a.push(zw(t,s[d])),c.push(s[d+1]);const l=[],u=hh.empty();for(let d=a.length-1;d>=0;--d)if(!Gw(l,a[d])){const e=a[d];let t=c[d];t=rr(t);const n=o.yu(e);if(t instanceof xw)l.push(e);else{const r=Fw(t,n);null!=r&&(l.push(e),u.set(e,r))}}const h=new Ou(l);return new Sw(u,h,o.fieldTransforms)}function Mw(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return Fw(n,e.Cu(r?4:3,t))}function Fw(e,t){if(Vw(e=rr(e)))return jw("Unsupported field value:",t,e),Uw(e,t);if(e instanceof vw)return function(e,t){if(!Ew(t.Vu))throw t.Su("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.Su("".concat(e._methodName,"() is not currently supported inside arrays"));const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.gu&&4!==t.Vu)throw t.Su("Nested arrays are not supported");return function(e,t){const n=[];let r=0;for(const i of e){let e=Fw(i,t.wu(r));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=rr(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return Td(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=fl.fromDate(e);return{timestampValue:Pf(t.serializer,n)}}if(e instanceof fl){const n=new fl(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:Pf(t.serializer,n)}}if(e instanceof ww)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof gw)return{bytesValue:Of(t.serializer,e._byteString)};if(e instanceof Xv){const n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t.Su("Document reference is for database ".concat(r.projectId,"/").concat(r.database," but should be for database ").concat(n.projectId,"/").concat(n.database));return{referenceValue:Lf(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.Su("Unsupported field value: ".concat(Gv(e)))}(e,t)}function Uw(e,t){const n={};return Tu(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Iu(e,((e,r)=>{const i=Fw(r,t.fu(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function Vw(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof fl||e instanceof ww||e instanceof gw||e instanceof Xv||e instanceof vw)}function jw(e,t,n){if(!Vw(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){const r=Gv(n);throw"an object"===r?t.Su(e+" a custom object"):t.Su(e+" "+r)}}function zw(e,t,n){if((t=rr(t))instanceof yw)return t._internalPath;if("string"==typeof t)return qw(e,t);throw Kw("Field path arguments must be of type string or ",e,!1,void 0,n)}const Bw=new RegExp("[~\\*/\\[\\]]");function qw(e,t,n){if(t.search(Bw)>=0)throw Kw("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return new yw(...t.split("."))._internalPath}catch(Oi){throw Kw("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function Kw(e,t,n,r,i){const s=r&&!r.isEmpty(),o=void 0!==i;let a="Function ".concat(t,"() called with invalid data");n&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(s||o)&&(c+=" (found",s&&(c+=" in field ".concat(r)),o&&(c+=" in document ".concat(i)),c+=")"),new Xc(Jc.INVALID_ARGUMENT,a+e+c)}function Gw(e,t){return e.some((e=>e.isEqual(t)))}class Ww{constructor(e,t,n,r,i){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Xv(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new Hw(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Qw("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class Hw extends Ww{data(){return super.data()}}function Qw(e,t){return"string"==typeof t?qw(e,t):t instanceof yw?t._internalPath:t._delegate._internalPath}function Yw(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new Xc(Jc.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class $w{}class Jw extends $w{}function Xw(e,t){let n=[];for(var r=arguments.length,i=new Array(r>2?r-2:0),s=2;s<r;s++)i[s-2]=arguments[s];t instanceof $w&&n.push(t),n=n.concat(i),function(e){const t=e.filter((e=>e instanceof eb)).length,n=e.filter((e=>e instanceof Zw)).length;if(t>1||t>0&&n>0)throw new Xc(Jc.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const o of n)e=o._apply(e);return e}class Zw extends Jw{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new Zw(e,t,n)}_apply(e){const t=this._parse(e);return cb(e._query,t),new Jv(e.firestore,e.converter,ed(e._query,t))}_parse(e){const t=kw(e.firestore),n=function(e,t,n,r,i,s,o){let a;if(i.isKeyField()){if("array-contains"===s||"array-contains-any"===s)throw new Xc(Jc.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(s,"' queries on documentId()."));if("in"===s||"not-in"===s){ab(o,s);const t=[];for(const n of o)t.push(ob(r,e,n));a={arrayValue:{values:t}}}else a=ob(r,e,o)}else"in"!==s&&"not-in"!==s&&"array-contains-any"!==s||ab(o,s),a=Mw(n,t,o,"in"===s||"not-in"===s);return bh.create(i,s,a)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value);return n}}class eb extends $w{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new eb(e,t)}_parse(e){const t=this._queryConstraints.map((t=>t._parse(e))).filter((e=>e.getFilters().length>0));return 1===t.length?t[0]:_h.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){let n=e;const r=t.getFlattenedFilters();for(const i of r)cb(n,i),n=ed(n,i)}(e._query,t),new Jv(e.firestore,e.converter,ed(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class tb extends Jw{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new tb(e,t)}_apply(e){const t=function(e,t,n){if(null!==e.startAt)throw new Xc(Jc.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new Xc(Jc.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new yh(t,n)}(e._query,this._field,this._direction);return new Jv(e.firestore,e.converter,function(e,t){const n=e.explicitOrderBy.concat([t]);return new Wh(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}class nb extends Jw{constructor(e,t,n){super(),this.type=e,this._limit=t,this._limitType=n}static _create(e,t,n){return new nb(e,t,n)}_apply(e){return new Jv(e.firestore,e.converter,td(e._query,this._limit,this._limitType))}}class rb extends Jw{constructor(e,t,n){super(),this.type=e,this._docOrFields=t,this._inclusive=n}static _create(e,t,n){return new rb(e,t,n)}_apply(e){const t=sb(e,this.type,this._docOrFields,this._inclusive);return new Jv(e.firestore,e.converter,function(e,t){return new Wh(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))}}class ib extends Jw{constructor(e,t,n){super(),this.type=e,this._docOrFields=t,this._inclusive=n}static _create(e,t,n){return new ib(e,t,n)}_apply(e){const t=sb(e,this.type,this._docOrFields,this._inclusive);return new Jv(e.firestore,e.converter,function(e,t){return new Wh(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)}(e._query,t))}}function sb(e,t,n,r){if(n[0]=rr(n[0]),n[0]instanceof Ww)return function(e,t,n,r,i){if(!r)throw new Xc(Jc.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for ".concat(n,"()."));const s=[];for(const o of Jh(e))if(o.field.isKeyField())s.push(Zu(t,r.key));else{const e=r.data.field(o.field);if(Vu(e))throw new Xc(Jc.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+o.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===e){const e=o.field.canonicalString();throw new Xc(Jc.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '".concat(e,"' (used as the orderBy) does not exist."))}s.push(e)}return new ph(s,i)}(e._query,e.firestore._databaseId,t,n[0]._document,r);{const i=kw(e.firestore);return function(e,t,n,r,i,s){const o=e.explicitOrderBy;if(i.length>o.length)throw new Xc(Jc.INVALID_ARGUMENT,"Too many arguments provided to ".concat(r,"(). The number of arguments must be less than or equal to the number of orderBy() clauses"));const a=[];for(let c=0;c<i.length;c++){const s=i[c];if(o[c].field.isKeyField()){if("string"!=typeof s)throw new Xc(Jc.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in ".concat(r,"(), but got a ").concat(typeof s));if(!$h(e)&&-1!==s.indexOf("/"))throw new Xc(Jc.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by documentId(), the value passed to ".concat(r,"() must be a plain document ID, but '").concat(s,"' contains a slash."));const n=e.path.child(gl.fromString(s));if(!wl.isDocumentKey(n))throw new Xc(Jc.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by documentId(), the value passed to ".concat(r,"() must result in a valid document path, but '").concat(n,"' is not because it contains an odd number of segments."));const i=new wl(n);a.push(Zu(t,i))}else{const e=Mw(n,r,s);a.push(e)}}return new ph(a,s)}(e._query,e.firestore._databaseId,i,t,n,r)}}function ob(e,t,n){if("string"==typeof(n=rr(n))){if(""===n)throw new Xc(Jc.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!$h(t)&&-1!==n.indexOf("/"))throw new Xc(Jc.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));const r=t.path.child(gl.fromString(n));if(!wl.isDocumentKey(r))throw new Xc(Jc.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return Zu(e,new wl(r))}if(n instanceof Xv)return Zu(e,n._key);throw new Xc(Jc.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(Gv(n),"."))}function ab(e,t){if(!Array.isArray(e)||0===e.length)throw new Xc(Jc.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."))}function cb(e,t){const n=function(e,t){for(const n of e)for(const e of n.getFlattenedFilters())if(t.indexOf(e.op)>=0)return e.op;return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==n)throw n===t.op?new Xc(Jc.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new Xc(Jc.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(n.toString(),"' filters."))}class lb{convertValue(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(Wu(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Fu(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Uu(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Qc()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";const n={};return Iu(e,((e,r)=>{n[e]=this.convertValue(r,t)})),n}convertGeoPoint(e){return new ww(Fu(e.latitude),Fu(e.longitude))}convertArray(e,t){return(e.values||[]).map((e=>this.convertValue(e,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const n=ju(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(zu(e));default:return null}}convertTimestamp(e){const t=Mu(e);return new fl(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=gl.fromString(e);Yc(sp(n));const r=new qu(n.get(1),n.get(3)),i=new wl(n.popFirst(5));return r.isEqual(t)||Gc("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}function ub(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}class hb extends lb{constructor(e){super(),this.firestore=e}convertBytes(e){return new gw(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Xv(this.firestore,null,t)}}class db{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class fb extends Ww{constructor(e,t,n,r,i,s){super(e,t,n,r,s),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){const t=new pb(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){const n=this._document.data.field(Qw("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}class pb extends fb{data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return super.data(e)}}class mb{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new db(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach((n=>{e.call(t,new pb(this._firestore,this._userDataWriter,n.key,n,new db(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(){const e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new Xc(Jc.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map((n=>{const r=new pb(e._firestore,e._userDataWriter,n.doc.key,n.doc,new db(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:"added",doc:r,oldIndex:-1,newIndex:t++}}))}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((e=>t||3!==e.type)).map((t=>{const r=new pb(e._firestore,e._userDataWriter,t.doc.key,t.doc,new db(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let i=-1,s=-1;return 0!==t.type&&(i=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),s=n.indexOf(t.doc.key)),{type:gb(t.type),doc:r,oldIndex:i,newIndex:s}}))}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}function gb(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Qc()}}function yb(e,t){return e instanceof fb&&t instanceof fb?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof mb&&t instanceof mb&&e._firestore===t._firestore&&rw(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}class vb extends lb{constructor(e){super(),this.firestore=e}convertBytes(e){return new gw(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Xv(this.firestore,null,t)}}function wb(e){e=Wv(e,Xv);const t=Wv(e.firestore,aw),n=cw(t),r=new vb(t);return function(e,t){const n=new Zc;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){try{const r=await function(e,t){const n=$c(e);return n.persistence.runTransaction("read document","readonly",(e=>n.localDocuments.getDocument(e,t)))}(e,t);r.isFoundDocument()?n.resolve(r):r.isNoDocument()?n.resolve(null):n.reject(new Xc(Jc.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(e){const r=py(e,"Failed to get document '".concat(t," from cache"));n.reject(r)}}(await Pv(e),t,n))),n.promise}(n,e._key).then((n=>new fb(t,r,e._key,n,new db(null!==n&&n.hasLocalMutations,!0),e.converter)))}function bb(e){e=Wv(e,Jv);const t=Wv(e.firestore,aw),n=cw(t),r=new vb(t);return function(e,t){const n=new Zc;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){try{const r=await og(e,t,!0),i=new Dy(t,r.hs),s=i.Ta(r.documents),o=i.applyChanges(s,!1);n.resolve(o.snapshot)}catch(e){const r=py(e,"Failed to execute query '".concat(t," against cache"));n.reject(r)}}(await Pv(e),t,n))),n.promise}(n,e._query).then((n=>new mb(t,r,e,n)))}function _b(e,t,n){e=Wv(e,Xv);const r=Wv(e.firestore,aw),i=ub(e.converter,t,n);return Tb(r,[Cw(kw(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,jd.none())])}function Sb(e,t,n){e=Wv(e,Xv);const r=Wv(e.firestore,aw),i=kw(r);let s;for(var o=arguments.length,a=new Array(o>3?o-3:0),c=3;c<o;c++)a[c-3]=arguments[c];return s="string"==typeof(t=rr(t))||t instanceof yw?Lw(i,"updateDoc",e._key,t,n,a):Dw(i,"updateDoc",e._key,t),Tb(r,[s.toMutation(e._key,jd.exists(!0))])}function Eb(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,s,o;e=rr(e);let a={includeMetadataChanges:!1,source:"default"},c=0;"object"!=typeof n[c]||sw(n[c])||(a=n[c],c++);const l={includeMetadataChanges:a.includeMetadataChanges,source:a.source};if(sw(n[c])){const e=n[c];n[c]=null===(i=e.next)||void 0===i?void 0:i.bind(e),n[c+1]=null===(s=e.error)||void 0===s?void 0:s.bind(e),n[c+2]=null===(o=e.complete)||void 0===o?void 0:o.bind(e)}let u,h,d;if(e instanceof Xv)h=Wv(e.firestore,aw),d=Qh(e._key.path),u={next:t=>{n[c]&&n[c](kb(h,e,t))},error:n[c+1],complete:n[c+2]};else{const t=Wv(e,Jv);h=Wv(t.firestore,aw),d=t._query;const r=new vb(h);u={next:e=>{n[c]&&n[c](new mb(h,r,t,e))},error:n[c+1],complete:n[c+2]},Yw(e._query)}return function(e,t,n,r){const i=new bv(r),s=new Cy(t,i,n);return e.asyncQueue.enqueueAndForget((async()=>by(await Lv(e),s))),()=>{i.Qa(),e.asyncQueue.enqueueAndForget((async()=>_y(await Lv(e),s)))}}(cw(h),d,l,u)}function Ib(e,t){return function(e,t){const n=new bv(t);return e.asyncQueue.enqueueAndForget((async()=>function(e,t){$c(e).W_.add(t),t.next()}(await Lv(e),n))),()=>{n.Qa(),e.asyncQueue.enqueueAndForget((async()=>function(e,t){$c(e).W_.delete(t)}(await Lv(e),n)))}}(cw(e=Wv(e,aw)),sw(t)?t:{next:t})}function Tb(e,t){return function(e,t){const n=new Zc;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){const r=pv(e);try{const e=await function(e,t){const n=$c(e),r=fl.now(),i=t.reduce(((e,t)=>e.add(t.key)),bd());let s,o;return n.persistence.runTransaction("Locally write mutations","readwrite",(e=>{let a=hd(),c=bd();return n.os.getEntries(e,i).next((e=>{a=e,a.forEach(((e,t)=>{t.isValidDocument()||(c=c.add(e))}))})).next((()=>n.localDocuments.getOverlayedDocuments(e,a))).next((i=>{s=i;const o=[];for(const e of t){const t=Wd(e,s.get(e.key).overlayedDocument);null!=t&&o.push(new Yd(e.key,t,dh(t.value.mapValue),jd.exists(!0)))}return n.mutationQueue.addMutationBatch(e,r,o,t)})).next((t=>{o=t;const r=t.applyToLocalDocumentSet(s,c);return n.documentOverlayCache.saveOverlays(e,t.batchId,r)}))})).then((()=>({batchId:o.batchId,changes:pd(s)})))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.Fa[e.currentUser.toKey()];r||(r=new ku(ul)),r=r.insert(t,n),e.Fa[e.currentUser.toKey()]=r}(r,e.batchId,n),await nv(r,e.changes),await ey(r.remoteStore)}catch(e){const t=py(e,"Failed to persist write");n.reject(t)}}(await Rv(e),t,n))),n.promise}(cw(e),t)}function kb(e,t,n){const r=n.docs.get(t._key),i=new vb(e);return new fb(e,i,t._key,r,new db(n.hasPendingWrites,n.fromCache),t.converter)}const Cb={maxAttempts:5};class xb{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=kw(e)}set(e,t,n){this._verifyNotCommitted();const r=Nb(e,this._firestore),i=ub(r.converter,t,n),s=Cw(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(s.toMutation(r._key,jd.none())),this}update(e,t,n){this._verifyNotCommitted();const r=Nb(e,this._firestore);let i;for(var s=arguments.length,o=new Array(s>3?s-3:0),a=3;a<s;a++)o[a-3]=arguments[a];return i="string"==typeof(t=rr(t))||t instanceof yw?Lw(this._dataReader,"WriteBatch.update",r._key,t,n,o):Dw(this._dataReader,"WriteBatch.update",r._key,t),this._mutations.push(i.toMutation(r._key,jd.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Nb(e,this._firestore);return this._mutations=this._mutations.concat(new Zd(t._key,jd.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Xc(Jc.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Nb(e,t){if((e=rr(e)).firestore!==t)throw new Xc(Jc.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}class Ab extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=kw(e)}get(e){const t=Nb(e,this._firestore),n=new hb(this._firestore);return this._transaction.lookup([t._key]).then((e=>{if(!e||1!==e.length)return Qc();const r=e[0];if(r.isFoundDocument())return new Ww(this._firestore,n,r.key,r,t.converter);if(r.isNoDocument())return new Ww(this._firestore,n,t._key,null,t.converter);throw Qc()}))}set(e,t,n){const r=Nb(e,this._firestore),i=ub(r.converter,t,n),s=Cw(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,s),this}update(e,t,n){const r=Nb(e,this._firestore);let i;for(var s=arguments.length,o=new Array(s>3?s-3:0),a=3;a<s;a++)o[a-3]=arguments[a];return i="string"==typeof(t=rr(t))||t instanceof yw?Lw(this._dataReader,"Transaction.update",r._key,t,n,o):Dw(this._dataReader,"Transaction.update",r._key,t),this._transaction.update(r._key,i),this}delete(e){const t=Nb(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Nb(e,this._firestore),n=new vb(this._firestore);return super.get(e).then((e=>new fb(this._firestore,n,t._key,e._document,new db(!1,!1),t.converter)))}}new WeakMap;!function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){zc=e}(Qr),Br(new ir("firestore",((e,n)=>{let{instanceIdentifier:r,options:i}=n;const s=e.getProvider("app").getImmediate(),o=new aw(new rl(e.getProvider("auth-internal")),new al(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new Xc(Jc.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new qu(e.options.projectId,t)}(s,r),s);return i=Object.assign({useFetchStreams:t},i),o._setSettings(i),o}),"PUBLIC").setMultipleInstances(!0)),Zr(Vc,"4.5.0",e),Zr(Vc,"4.5.0","esm2017")}();function Pb(e,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new Xc("invalid-argument","Invalid options passed to function ".concat(e,"(): You cannot ")+'specify both "merge" and "mergeFields".');return t}function Ob(){if("undefined"===typeof Uint8Array)throw new Xc("unimplemented","Uint8Arrays are not available in this environment.")}function Rb(){if("undefined"==typeof atob)throw new Xc("unimplemented","Blobs are unavailable in Firestore in this environment.")}class Db{constructor(e){this._delegate=e}static fromBase64String(e){return Rb(),new Db(gw.fromBase64String(e))}static fromUint8Array(e){return Ob(),new Db(gw.fromUint8Array(e))}toBase64(){return Rb(),this._delegate.toBase64()}toUint8Array(){return Ob(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function Lb(e){return function(e,t){if("object"!==typeof e||null===e)return!1;const n=e;for(const r of t)if(r in n&&"function"===typeof n[r])return!0;return!1}(e,["next","error","complete"])}class Mb{enableIndexedDbPersistence(e,t){return function(e,t){mw(e=Wv(e,aw));const n=cw(e);if(n._uninitializedComponentsProvider)throw new Xc(Jc.FAILED_PRECONDITION,"SDK cache is already specified.");Wc("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=e._freezeSettings(),i=new vv;return uw(n,i,new gv(i,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function(e){mw(e=Wv(e,aw));const t=cw(e);if(t._uninitializedComponentsProvider)throw new Xc(Jc.FAILED_PRECONDITION,"SDK cache is already specified.");Wc("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=e._freezeSettings(),r=new vv;return uw(t,r,new yv(r,n.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function(e){if(e._initialized&&!e._terminated)throw new Xc(Jc.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const t=new Zc;return e._queue.enqueueAndForgetEvenWhileRestricted((async()=>{try{await async function(e){if(!Dl.D())return Promise.resolve();const t=e+"main";await Dl.delete(t)}(Qm(e._databaseId,e._persistenceKey)),t.resolve()}catch(e){t.reject(e)}})),t.promise}(e._delegate)}}class Fb{constructor(e,t,n){this._delegate=t,this._persistenceProvider=n,this.INTERNAL={delete:()=>this.terminate()},e instanceof qu||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();e.merge||t.host===e.host||Wc("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};$v(this._delegate,e,t,n)}enableNetwork(){return dw(this._delegate)}disableNetwork(){return fw(this._delegate)}enablePersistence(e){let t=!1,n=!1;return e&&(t=!!e.synchronizeTabs,n=!!e.experimentalForceOwningTab,Bv("synchronizeTabs",t,"experimentalForceOwningTab",n)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,n)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return hw(this._delegate)}onSnapshotsInSync(e){return Ib(this._delegate,e)}get app(){if(!this._appCompat)throw new Xc("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Jb(this,ew(this._delegate,e))}catch(t){throw qb(t,"collection()","Firestore.collection()")}}doc(e){try{return new Bb(this,tw(this._delegate,e))}catch(t){throw qb(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Qb(this,function(e,t){if(e=Wv(e,Yv),zv("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new Xc(Jc.INVALID_ARGUMENT,"Invalid collection ID '".concat(t,"' passed to function collectionGroup(). Collection IDs must not contain '/'."));return new Jv(e,null,function(e){return new Wh(gl.emptyPath(),e)}(t))}(this._delegate,e))}catch(t){throw qb(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function(e,t,n){e=Wv(e,aw);const r=Object.assign(Object.assign({},Cb),n);return function(e){if(e.maxAttempts<1)throw new Xc(Jc.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(e,t,n){const r=new Zc;return e.asyncQueue.enqueueAndForget((async()=>{const i=await Dv(e);new Ev(e.asyncQueue,i,n,t,r).Ya()})),r.promise}(cw(e),(n=>t(new Ab(e,n))),r)}(this._delegate,(t=>e(new Vb(this,t))))}batch(){return cw(this._delegate),new jb(new xb(this._delegate,(e=>Tb(this._delegate,e))))}loadBundle(e){return function(e,t){const n=cw(e=Wv(e,aw)),r=new ow;return Uv(n,e._databaseId,t,r),r}(this._delegate,e)}namedQuery(e){return pw(this._delegate,e).then((e=>e?new Qb(this,e):null))}}class Ub extends lb{constructor(e){super(),this.firestore=e}convertBytes(e){return new Db(new gw(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Bb.forKey(t,this.firestore,null)}}class Vb{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new Ub(e)}get(e){const t=Xb(e);return this._delegate.get(t).then((e=>new Wb(this._firestore,new fb(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,t.converter))))}set(e,t,n){const r=Xb(e);return n?(Pb("Transaction.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}update(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),s=3;s<r;s++)i[s-3]=arguments[s];const o=Xb(e);return 2===arguments.length?this._delegate.update(o,t):this._delegate.update(o,t,n,...i),this}delete(e){const t=Xb(e);return this._delegate.delete(t),this}}class jb{constructor(e){this._delegate=e}set(e,t,n){const r=Xb(e);return n?(Pb("WriteBatch.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}update(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),s=3;s<r;s++)i[s-3]=arguments[s];const o=Xb(e);return 2===arguments.length?this._delegate.update(o,t):this._delegate.update(o,t,n,...i),this}delete(e){const t=Xb(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class zb{constructor(e,t,n){this._firestore=e,this._userDataWriter=t,this._delegate=n}fromFirestore(e,t){const n=new pb(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Hb(this._firestore,n),null!==t&&void 0!==t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const n=zb.INSTANCES;let r=n.get(e);r||(r=new WeakMap,n.set(e,r));let i=r.get(t);return i||(i=new zb(e,new Ub(e),t),r.set(t,i)),i}}zb.INSTANCES=new WeakMap;class Bb{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Ub(e)}static forPath(e,t,n){if(e.length%2!==0)throw new Xc("invalid-argument","Invalid document reference. Document references must have an even number of segments, but "+"".concat(e.canonicalString()," has ").concat(e.length));return new Bb(t,new Xv(t._delegate,n,new wl(e)))}static forKey(e,t,n){return new Bb(t,new Xv(t._delegate,n,e))}get id(){return this._delegate.id}get parent(){return new Jb(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Jb(this.firestore,ew(this._delegate,e))}catch(t){throw qb(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=rr(e))instanceof Xv&&nw(this._delegate,e)}set(e,t){t=Pb("DocumentReference.set",t);try{return t?_b(this._delegate,e,t):_b(this._delegate,e)}catch(n){throw qb(n,"setDoc()","DocumentReference.set()")}}update(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];try{return 1===arguments.length?Sb(this._delegate,e):Sb(this._delegate,e,t,...r)}catch(s){throw qb(s,"updateDoc()","DocumentReference.update()")}}delete(){return Tb(Wv((e=this._delegate).firestore,aw),[new Zd(e._key,jd.none())]);var e}onSnapshot(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=Kb(t),i=Gb(t,(e=>new Wb(this.firestore,new fb(this.firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,this._delegate.converter))));return Eb(this._delegate,r,i)}get(e){let t;return t="cache"===(null===e||void 0===e?void 0:e.source)?wb(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=Wv(e,Xv);const t=Wv(e.firestore,aw);return Mv(cw(t),e._key,{source:"server"}).then((n=>kb(t,e,n)))}(this._delegate):function(e){e=Wv(e,Xv);const t=Wv(e.firestore,aw);return Mv(cw(t),e._key).then((n=>kb(t,e,n)))}(this._delegate),t.then((e=>new Wb(this.firestore,new fb(this.firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,this._delegate.converter))))}withConverter(e){return new Bb(this.firestore,e?this._delegate.withConverter(zb.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function qb(e,t,n){return e.message=e.message.replace(t,n),e}function Kb(e){for(const t of e)if("object"===typeof t&&!Lb(t))return t;return{}}function Gb(e,t){var n,r;let i;return i=Lb(e[0])?e[0]:Lb(e[1])?e[1]:"function"===typeof e[0]?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]},{next:e=>{i.next&&i.next(t(e))},error:null===(n=i.error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class Wb{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Bb(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return yb(this._delegate,e._delegate)}}class Hb extends Wb{data(e){const t=this._delegate.data(e);return this._delegate._converter||void 0!==t||Qc(),t}}class Qb{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Ub(e)}where(e,t,n){try{return new Qb(this.firestore,Xw(this._delegate,function(e,t,n){const r=t,i=Qw("where",e);return Zw._create(i,r,n)}(e,t,n)))}catch(r){throw qb(r,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Qb(this.firestore,Xw(this._delegate,function(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=Qw("orderBy",e);return tb._create(n,t)}(e,t)))}catch(n){throw qb(n,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Qb(this.firestore,Xw(this._delegate,(Hv("limit",t=e),nb._create("limit",t,"F"))))}catch(t){throw qb(t,"limit()","Query.limit()")}var t}limitToLast(e){try{return new Qb(this.firestore,Xw(this._delegate,(Hv("limitToLast",t=e),nb._create("limitToLast",t,"L"))))}catch(t){throw qb(t,"limitToLast()","Query.limitToLast()")}var t}startAt(){try{return new Qb(this.firestore,Xw(this._delegate,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return rb._create("startAt",t,!0)}(...arguments)))}catch(e){throw qb(e,"startAt()","Query.startAt()")}}startAfter(){try{return new Qb(this.firestore,Xw(this._delegate,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return rb._create("startAfter",t,!1)}(...arguments)))}catch(e){throw qb(e,"startAfter()","Query.startAfter()")}}endBefore(){try{return new Qb(this.firestore,Xw(this._delegate,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return ib._create("endBefore",t,!1)}(...arguments)))}catch(e){throw qb(e,"endBefore()","Query.endBefore()")}}endAt(){try{return new Qb(this.firestore,Xw(this._delegate,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return ib._create("endAt",t,!0)}(...arguments)))}catch(e){throw qb(e,"endAt()","Query.endAt()")}}isEqual(e){return rw(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null===e||void 0===e?void 0:e.source)?bb(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=Wv(e,Jv);const t=Wv(e.firestore,aw),n=cw(t),r=new vb(t);return Fv(n,e._query,{source:"server"}).then((n=>new mb(t,r,e,n)))}(this._delegate):function(e){e=Wv(e,Jv);const t=Wv(e.firestore,aw),n=cw(t),r=new vb(t);return Yw(e._query),Fv(n,e._query).then((n=>new mb(t,r,e,n)))}(this._delegate),t.then((e=>new $b(this.firestore,new mb(this.firestore._delegate,this._userDataWriter,this._delegate,e._snapshot))))}onSnapshot(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=Kb(t),i=Gb(t,(e=>new $b(this.firestore,new mb(this.firestore._delegate,this._userDataWriter,this._delegate,e._snapshot))));return Eb(this._delegate,r,i)}withConverter(e){return new Qb(this.firestore,e?this._delegate.withConverter(zb.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}class Yb{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new Hb(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class $b{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Qb(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map((e=>new Hb(this._firestore,e)))}docChanges(e){return this._delegate.docChanges(e).map((e=>new Yb(this._firestore,e)))}forEach(e,t){this._delegate.forEach((n=>{e.call(t,new Hb(this._firestore,n))}))}isEqual(e){return yb(this._delegate,e._delegate)}}class Jb extends Qb{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Bb(this.firestore,e):null}doc(e){try{return new Bb(this.firestore,void 0===e?tw(this._delegate):tw(this._delegate,e))}catch(t){throw qb(t,"doc()","CollectionReference.doc()")}}add(e){return function(e,t){const n=Wv(e.firestore,aw),r=tw(e),i=ub(e.converter,t);return Tb(n,[Cw(kw(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,jd.exists(!1))]).then((()=>r))}(this._delegate,e).then((e=>new Bb(this.firestore,e)))}isEqual(e){return nw(this._delegate,e._delegate)}withConverter(e){return new Jb(this.firestore,e?this._delegate.withConverter(zb.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function Xb(e){return Wv(e,Xv)}class Zb{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._delegate=new yw(...t)}static documentId(){return new Zb(vl.keyField().canonicalString())}isEqual(e){return(e=rr(e))instanceof yw&&this._delegate._internalPath.isEqual(e._internalPath)}}class e_{constructor(e){this._delegate=e}static serverTimestamp(){const e=new Aw("serverTimestamp");return e._methodName="FieldValue.serverTimestamp",new e_(e)}static delete(){const e=new xw("deleteField");return e._methodName="FieldValue.delete",new e_(e)}static arrayUnion(){const e=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new Pw("arrayUnion",t)}(...arguments);return e._methodName="FieldValue.arrayUnion",new e_(e)}static arrayRemove(){const e=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new Ow("arrayRemove",t)}(...arguments);return e._methodName="FieldValue.arrayRemove",new e_(e)}static increment(e){const t=new Rw("increment",e);return t._methodName="FieldValue.increment",new e_(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const t_={Firestore:Fb,GeoPoint:ww,Timestamp:fl,Blob:Db,Transaction:Vb,WriteBatch:jb,DocumentReference:Bb,DocumentSnapshot:Wb,Query:Qb,QueryDocumentSnapshot:Hb,QuerySnapshot:$b,CollectionReference:Jb,FieldPath:Zb,FieldValue:e_,setLogLevel:function(e){var t;t=e,Bc.setLogLevel(t)},CACHE_SIZE_UNLIMITED:-1};!function(e){!function(e,t){e.INTERNAL.registerComponent(new ir("firestore-compat",(e=>{const n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("firestore").getImmediate();return t(n,r)}),"PUBLIC").setServiceProps(Object.assign({},t_)))}(e,((e,t)=>new Fb(e,t,new Mb))),e.registerVersion("@firebase/firestore-compat","0.3.27")}(vi);function n_(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create;Object.create;"function"===typeof SuppressedError&&SuppressedError;const r_={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},i_="EMAIL_SIGNIN",s_="PASSWORD_RESET",o_="RECOVER_EMAIL",a_="REVERT_SECOND_FACTOR_ADDITION",c_="VERIFY_AND_CHANGE_EMAIL",l_="VERIFY_EMAIL";function u_(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const h_=function(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements."}},d_=u_,f_=new Wn("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),p_=new pr("@firebase/auth");function m_(e){if(p_.logLevel<=lr.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];p_.error("Auth (".concat(Qr,"): ").concat(e),...n)}}function g_(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw b_(e,...n)}function y_(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return b_(e,...n)}function v_(e,t,n){const r=Object.assign(Object.assign({},d_()),{[t]:n});return new Wn("auth","Firebase",r).create(t,{appName:e.name})}function w_(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&g_(e,"argument-error"),v_(e,"argument-error","Type of ".concat(t.constructor.name," does not match expected instance.")+"Did you pass a reference from a different Auth SDK?")}function b_(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){const t=n[0],r=[...n.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(t,...r)}return f_.create(e,...n)}function __(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw b_(t,...r)}}function S_(e){const t="INTERNAL ASSERTION FAILED: "+e;throw m_(t),new Error(t)}function E_(e,t){e||S_(t)}function I_(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function T_(){return"http:"===k_()||"https:"===k_()}function k_(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}class C_{constructor(e,t){this.shortDelay=e,this.longDelay=t,E_(t>e,"Short delay should be less than long delay!"),this.isMobile="undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Un())||zn()}get(){return"undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(T_()||jn()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}function x_(e,t){E_(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}class N_{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:"undefined"!==typeof globalThis&&globalThis.fetch?globalThis.fetch:"undefined"!==typeof fetch?fetch:void S_("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:"undefined"!==typeof globalThis&&globalThis.Headers?globalThis.Headers:"undefined"!==typeof Headers?Headers:void S_("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:"undefined"!==typeof globalThis&&globalThis.Response?globalThis.Response:"undefined"!==typeof Response?Response:void S_("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const A_={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},P_=new C_(3e4,6e4);function O_(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function R_(e,t,n,r){return D_(e,arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},(async()=>{let i={},s={};r&&("GET"===t?s=r:i={body:JSON.stringify(r)});const o=Jn(Object.assign({key:e.config.apiKey},s)).slice(1),a=await e._getAdditionalHeaders();return a["Content-Type"]="application/json",e.languageCode&&(a["X-Firebase-Locale"]=e.languageCode),N_.fetch()(M_(e,e.config.apiHost,n,o),Object.assign({method:t,headers:a,referrerPolicy:"no-referrer"},i))}))}async function D_(e,t,n){e._canInitEmulator=!1;const r=Object.assign(Object.assign({},A_),t);try{const t=new U_(e),i=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const s=await i.json();if("needConfirmation"in s)throw V_(e,"account-exists-with-different-credential",s);if(i.ok&&!("errorMessage"in s))return s;{const t=i.ok?s.errorMessage:s.error.message,[n,o]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw V_(e,"credential-already-in-use",s);if("EMAIL_EXISTS"===n)throw V_(e,"email-already-in-use",s);if("USER_DISABLED"===n)throw V_(e,"user-disabled",s);const a=r[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(o)throw v_(e,a,o);g_(e,a)}}catch(i){if(i instanceof Gn)throw i;g_(e,"network-request-failed",{message:String(i)})}}async function L_(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const s=await R_(e,t,n,r,i);return"mfaPendingCredential"in s&&g_(e,"multi-factor-auth-required",{_serverResponse:s}),s}function M_(e,t,n,r){const i="".concat(t).concat(n,"?").concat(r);return e.config.emulator?x_(e.config,i):"".concat(e.config.apiScheme,"://").concat(i)}function F_(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class U_{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise(((e,t)=>{this.timer=setTimeout((()=>t(y_(this.auth,"network-request-failed"))),P_.get())}))}clearNetworkTimeout(){clearTimeout(this.timer)}}function V_(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=y_(e,t,r);return i.customData._tokenResponse=n,i}function j_(e){return void 0!==e&&void 0!==e.getResponse}function z_(e){return void 0!==e&&void 0!==e.enterprise}class B_{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return F_(t.enforcementState);return null}isProviderEnabled(e){return"ENFORCE"===this.getProviderEnforcementState(e)||"AUDIT"===this.getProviderEnforcementState(e)}}async function q_(e,t){return R_(e,"GET","/v2/recaptchaConfig",O_(e,t))}function K_(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(t){}}function G_(e){return 1e3*Number(e)}function W_(e){const[t,n,r]=e.split(".");if(void 0===t||void 0===n||void 0===r)return m_("JWT malformed, contained fewer than 3 sections"),null;try{const e=Pn(n);return e?JSON.parse(e):(m_("Failed to decode base64 JWT payload"),null)}catch(i){return m_("Caught error parsing JWT payload as JSON",null===i||void 0===i?void 0:i.toString()),null}}async function H_(e,t){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2])return t;try{return await t}catch(n){throw n instanceof Gn&&function(e){let{code:t}=e;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}(n)&&e.auth.currentUser===e&&await e.auth.signOut(),n}}class Q_{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout((async()=>{await this.iteration()}),t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){return void((null===e||void 0===e?void 0:e.code)==="auth/".concat("network-request-failed")&&this.schedule(!0))}this.schedule()}}class Y_{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=K_(this.lastLoginAt),this.creationTime=K_(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function $_(e){var t;const n=e.auth,r=await e.getIdToken(),i=await H_(e,async function(e,t){return R_(e,"POST","/v1/accounts:lookup",t)}(n,{idToken:r}));__(null===i||void 0===i?void 0:i.users.length,n,"internal-error");const s=i.users[0];e._notifyReloadListener(s);const o=(null===(t=s.providerUserInfo)||void 0===t?void 0:t.length)?s.providerUserInfo.map((e=>{var{providerId:t}=e,n=n_(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})):[];const a=function(e,t){const n=e.filter((e=>!t.some((t=>t.providerId===e.providerId))));return[...n,...t]}(e.providerData,o),c=e.isAnonymous,l=!(e.email&&s.passwordHash)&&!(null===a||void 0===a?void 0:a.length),u=!!c&&l,h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new Y_(s.createdAt,s.lastLoginAt),isAnonymous:u};Object.assign(e,h)}class J_{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){__(e.idToken,"internal-error"),__("undefined"!==typeof e.idToken,"internal-error"),__("undefined"!==typeof e.refreshToken,"internal-error");const t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):function(e){const t=W_(e);return __(t,"internal-error"),__("undefined"!==typeof t.exp,"internal-error"),__("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}async getToken(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return __(!this.accessToken||this.refreshToken,e,"user-token-expired"),t||!this.accessToken||this.isExpired?this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null:this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:r,expiresIn:i}=await async function(e,t){const n=await D_(e,{},(async()=>{const n=Jn({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:i}=e.config,s=M_(e,r,"/v1/token","key=".concat(i)),o=await e._getAdditionalHeaders();return o["Content-Type"]="application/x-www-form-urlencoded",N_.fetch()(s,{method:"POST",headers:o,body:n})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,r,Number(i))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:r,expirationTime:i}=t,s=new J_;return n&&(__("string"===typeof n,"internal-error",{appName:e}),s.refreshToken=n),r&&(__("string"===typeof r,"internal-error",{appName:e}),s.accessToken=r),i&&(__("number"===typeof i,"internal-error",{appName:e}),s.expirationTime=i),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new J_,this.toJSON())}_performRefresh(){return S_("not implemented")}}function X_(e,t){__("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}class Z_{constructor(e){var{uid:t,auth:n,stsTokenManager:r}=e,i=n_(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Q_(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Y_(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await H_(this,this.stsTokenManager.getToken(this.auth,e));return __(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=rr(e),r=await n.getIdToken(t),i=W_(r);__(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s="object"===typeof i.firebase?i.firebase:void 0,o=null===s||void 0===s?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:K_(G_(i.auth_time)),issuedAtTime:K_(G_(i.iat)),expirationTime:K_(G_(i.exp)),signInProvider:o||null,signInSecondFactor:(null===s||void 0===s?void 0:s.sign_in_second_factor)||null}}(this,e)}reload(){return async function(e){const t=rr(e);await $_(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(__(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((e=>Object.assign({},e))),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Z_(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){__(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await $_(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){const e=await this.getIdToken();return await H_(this,async function(e,t){return R_(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((e=>Object.assign({},e))),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,r,i,s,o,a,c,l;const u=null!==(n=t.displayName)&&void 0!==n?n:void 0,h=null!==(r=t.email)&&void 0!==r?r:void 0,d=null!==(i=t.phoneNumber)&&void 0!==i?i:void 0,f=null!==(s=t.photoURL)&&void 0!==s?s:void 0,p=null!==(o=t.tenantId)&&void 0!==o?o:void 0,m=null!==(a=t._redirectEventId)&&void 0!==a?a:void 0,g=null!==(c=t.createdAt)&&void 0!==c?c:void 0,y=null!==(l=t.lastLoginAt)&&void 0!==l?l:void 0,{uid:v,emailVerified:w,isAnonymous:b,providerData:_,stsTokenManager:S}=t;__(v&&S,e,"internal-error");const E=J_.fromJSON(this.name,S);__("string"===typeof v,e,"internal-error"),X_(u,e.name),X_(h,e.name),__("boolean"===typeof w,e,"internal-error"),__("boolean"===typeof b,e,"internal-error"),X_(d,e.name),X_(f,e.name),X_(p,e.name),X_(m,e.name),X_(g,e.name),X_(y,e.name);const I=new Z_({uid:v,auth:e,email:h,emailVerified:w,displayName:u,isAnonymous:b,photoURL:f,phoneNumber:d,tenantId:p,stsTokenManager:E,createdAt:g,lastLoginAt:y});return _&&Array.isArray(_)&&(I.providerData=_.map((e=>Object.assign({},e)))),m&&(I._redirectEventId=m),I}static async _fromIdTokenResponse(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=new J_;r.updateFromServerResponse(t);const i=new Z_({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return await $_(i),i}}const eS=new Map;function tS(e){E_(e instanceof Function,"Expected a class definition");let t=eS.get(e);return t?(E_(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,eS.set(e,t),t)}class nS{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}nS.type="NONE";const rS=nS;function iS(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}class sS{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:i}=this.auth;this.fullUserKey=iS(this.userKey,r.apiKey,i),this.fullPersistenceKey=iS("persistence",r.apiKey,i),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Z_._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"authUser";if(!t.length)return new sS(tS(rS),e,n);const r=(await Promise.all(t.map((async e=>{if(await e._isAvailable())return e})))).filter((e=>e));let i=r[0]||tS(rS);const s=iS(n,e.config.apiKey,e.name);let o=null;for(const l of t)try{const t=await l._get(s);if(t){const n=Z_._fromJSON(e,t);l!==i&&(o=n),i=l;break}}catch(c){}const a=r.filter((e=>e._shouldAllowMigration));return i._shouldAllowMigration&&a.length?(i=a[0],o&&await i._set(s,o.toJSON()),await Promise.all(t.map((async e=>{if(e!==i)try{await e._remove(s)}catch(c){}}))),new sS(i,e,n)):new sS(i,e,n)}}function oS(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(uS(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(aS(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(dS(t))return"Blackberry";if(fS(t))return"Webos";if(cS(t))return"Safari";if((t.includes("chrome/")||lS(t))&&!t.includes("edge/"))return"Chrome";if(hS(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null===n||void 0===n?void 0:n.length))return n[1]}return"Other"}function aS(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Un();return/firefox\//i.test(e)}function cS(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:Un()).toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function lS(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Un();return/crios\//i.test(e)}function uS(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Un();return/iemobile/i.test(e)}function hS(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Un();return/android/i.test(e)}function dS(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Un();return/blackberry/i.test(e)}function fS(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Un();return/webos/i.test(e)}function pS(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Un();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function mS(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Un();return pS(e)||hS(e)||fS(e)||dS(e)||/windows phone/i.test(e)||uS(e)}function gS(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=oS(Un());break;case"Worker":t="".concat(oS(Un()),"-").concat(e);break;default:t=e}const r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(Qr,"/").concat(r)}class yS{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=t=>new Promise(((n,r)=>{try{n(e(t))}catch(i){r(i)}}));n.onAbort=t,this.queue.push(n);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(n){t.reverse();for(const e of t)try{e()}catch(r){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===n||void 0===n?void 0:n.message})}}}class vS{constructor(e){var t,n,r,i;const s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(t=s.minPasswordLength)&&void 0!==t?t:6,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),void 0!==s.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),void 0!==s.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),void 0!==s.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),void 0!==s.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(r=null===(n=e.allowedNonAlphanumericCharacters)||void 0===n?void 0:n.join(""))&&void 0!==r?r:"",this.forceUpgradeOnSignin=null!==(i=e.forceUpgradeOnSignin)&&void 0!==i&&i,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,n,r,i,s,o;const a={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,a),this.validatePasswordCharacterOptions(e,a),a.isValid&&(a.isValid=null===(t=a.meetsMinPasswordLength)||void 0===t||t),a.isValid&&(a.isValid=null===(n=a.meetsMaxPasswordLength)||void 0===n||n),a.isValid&&(a.isValid=null===(r=a.containsLowercaseLetter)||void 0===r||r),a.isValid&&(a.isValid=null===(i=a.containsUppercaseLetter)||void 0===i||i),a.isValid&&(a.isValid=null===(s=a.containsNumericCharacter)||void 0===s||s),a.isValid&&(a.isValid=null===(o=a.containsNonAlphanumericCharacter)||void 0===o||o),a}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){let n;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(let r=0;r<e.length;r++)n=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,r,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}class wS{constructor(e,t,n,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new _S(this),this.idTokenSubscription=new _S(this),this.beforeStateQueue=new yS(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=f_,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=tS(t)),this._initializationPromise=this.queue((async()=>{var n,r;if(!this._deleted&&(this.persistenceManager=await sS.create(this,e),!this._deleted)){if(null===(n=this._popupRedirectResolver)||void 0===n?void 0:n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(i){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(r=this.currentUser)||void 0===r?void 0:r.uid)||null,this._deleted||(this._isInitialized=!0)}})),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(e,!0):void 0}async initializeCurrentUser(e){var t;const n=await this.assertedPersistence.getCurrentUser();let r=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const n=null===(t=this.redirectUser)||void 0===t?void 0:t._redirectEventId,s=null===r||void 0===r?void 0:r._redirectEventId,o=await this.tryRedirectSignIn(e);n&&n!==s||!(null===o||void 0===o?void 0:o.user)||(r=o.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(s){r=n,this._popupRedirectResolver._overrideRedirectResult(this,(()=>Promise.reject(s)))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return __(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(n){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await $_(e)}catch(t){if((null===t||void 0===t?void 0:t.code)!=="auth/".concat("network-request-failed"))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"===typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){const t=e?rr(e):null;return t&&__(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this._deleted)return e&&__(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue((async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()}))}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(e){return this.queue((async()=>{await this.assertedPersistence.setPersistence(tS(e))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await async function(e){return R_(e,"GET","/v2/passwordPolicy",O_(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}))}(this),t=new vS(e);null===this.tenantId?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Wn("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise(((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged((()=>{n(),e()}),t)}}))}async revokeAccessToken(e){if(this.currentUser){const t={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:await this.currentUser.getIdToken()};null!=this.tenantId&&(t.tenantId=this.tenantId),await async function(e,t){return R_(e,"POST","/v2/accounts:revokeToken",O_(e,t))}(this,t)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&tS(e)||this._popupRedirectResolver;__(t,this,"argument-error"),this.redirectPersistenceManager=await sS.create(this,[tS(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue((async()=>{})),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue((async()=>this.directlySetCurrentUser(e)))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const i="function"===typeof t?t:t.next.bind(t);let s=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if(__(o,this,"internal-error"),o.then((()=>{s||i(this.currentUser)})),"function"===typeof t){const i=e.addObserver(t,n,r);return()=>{s=!0,i()}}{const n=e.addObserver(t);return()=>{s=!0,n()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return __(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=gS(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t}async _getAppCheckToken(){var e;const t=await(null===(e=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getToken());return(null===t||void 0===t?void 0:t.error)&&function(e){if(p_.logLevel<=lr.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];p_.warn("Auth (".concat(Qr,"): ").concat(e),...n)}}("Error while retrieving App Check token: ".concat(t.error)),null===t||void 0===t?void 0:t.token}}function bS(e){return rr(e)}class _S{constructor(e){this.auth=e,this.observer=null,this.addObserver=er((e=>this.observer=e))}get next(){return __(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let SS={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function ES(e){return SS.loadJS(e)}function IS(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}class TS{constructor(e){this.type="recaptcha-enterprise",this.auth=bS(e)}async verify(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"verify",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];function n(t,n,r){const i=window.grecaptcha;z_(i)?i.enterprise.ready((()=>{i.enterprise.execute(t,{action:e}).then((e=>{n(e)})).catch((()=>{n("NO_RECAPTCHA")}))})):r(Error("No reCAPTCHA enterprise script loaded."))}return new Promise(((e,r)=>{(async function(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise((async(t,n)=>{q_(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then((r=>{if(void 0!==r.recaptchaKey){const n=new B_(r);return null==e.tenantId?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}n(new Error("recaptcha Enterprise site key undefined"))})).catch((e=>{n(e)}))}))})(this.auth).then((i=>{if(!t&&z_(window.grecaptcha))n(i,e,r);else{if("undefined"===typeof window)return void r(new Error("RecaptchaVerifier is only supported in browser"));let t=SS.recaptchaEnterpriseScript;0!==t.length&&(t+=i),ES(t).then((()=>{n(i,e,r)})).catch((e=>{r(e)}))}})).catch((e=>{r(e)}))}))}}async function kS(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=new TS(e);let s;try{s=await i.verify(n)}catch(a){s=await i.verify(n,!0)}const o=Object.assign({},t);return r?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function CS(e,t,n,r){var i;if(null===(i=e._getRecaptchaConfig())||void 0===i?void 0:i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await kS(e,t,n,"getOobCode"===n);return r(e,i)}return r(e,t).catch((async i=>{if(i.code==="auth/".concat("missing-recaptcha-token")){console.log("".concat(n," is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow."));const i=await kS(e,t,n,"getOobCode"===n);return r(e,i)}return Promise.reject(i)}))}function xS(e,t,n){const r=bS(e);__(r._canInitEmulator,r,"emulator-config-failed"),__(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const i=!!(null===n||void 0===n?void 0:n.disableWarnings),s=NS(t),{host:o,port:a}=function(e){const t=NS(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const e=i[1];return{host:e,port:AS(r.substr(e.length+1))}}{const[e,t]=r.split(":");return{host:e,port:AS(t)}}}(t),c=null===a?"":":".concat(a);r.config.emulator={url:"".concat(s,"//").concat(o).concat(c,"/")},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function NS(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function AS(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class PS{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return S_("not implemented")}_getIdTokenResponse(e){return S_("not implemented")}_linkToIdToken(e,t){return S_("not implemented")}_getReauthenticationResolver(e){return S_("not implemented")}}async function OS(e,t){return R_(e,"POST","/v1/accounts:resetPassword",O_(e,t))}async function RS(e,t){return R_(e,"POST","/v1/accounts:signUp",t)}async function DS(e,t){return L_(e,"POST","/v1/accounts:signInWithPassword",O_(e,t))}async function LS(e,t){return R_(e,"POST","/v1/accounts:sendOobCode",O_(e,t))}async function MS(e,t){return LS(e,t)}async function FS(e,t){return LS(e,t)}class US extends PS{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;super("password",n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new US(e,t,"password")}static _fromEmailAndCode(e,t){return new US(e,t,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return CS(e,{returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",DS);case"emailLink":return async function(e,t){return L_(e,"POST","/v1/accounts:signInWithEmailLink",O_(e,t))}(e,{email:this._email,oobCode:this._password});default:g_(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return CS(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",RS);case"emailLink":return async function(e,t){return L_(e,"POST","/v1/accounts:signInWithEmailLink",O_(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:g_(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function VS(e,t){return L_(e,"POST","/v1/accounts:signInWithIdp",O_(e,t))}class jS extends PS{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new jS(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):g_("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r}=t,i=n_(t,["providerId","signInMethod"]);if(!n||!r)return null;const s=new jS(n,r);return s.idToken=i.idToken||void 0,s.accessToken=i.accessToken||void 0,s.secret=i.secret,s.nonce=i.nonce,s.pendingToken=i.pendingToken||null,s}_getIdTokenResponse(e){return VS(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,VS(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,VS(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Jn(t)}return e}}const zS={USER_NOT_FOUND:"user-not-found"};class BS extends PS{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new BS({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new BS({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return async function(e,t){return L_(e,"POST","/v1/accounts:signInWithPhoneNumber",O_(e,t))}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return async function(e,t){const n=await L_(e,"POST","/v1/accounts:signInWithPhoneNumber",O_(e,t));if(n.temporaryProof)throw V_(e,"account-exists-with-different-credential",n);return n}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return async function(e,t){return L_(e,"POST","/v1/accounts:signInWithPhoneNumber",O_(e,Object.assign(Object.assign({},t),{operation:"REAUTH"})),zS)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:r}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"===typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}=e;return n||t||r||i?new BS({verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}):null}}class qS{constructor(e){var t,n,r,i,s,o;const a=Xn(Zn(e)),c=null!==(t=a.apiKey)&&void 0!==t?t:null,l=null!==(n=a.oobCode)&&void 0!==n?n:null,u=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(r=a.mode)&&void 0!==r?r:null);__(c&&l&&u,"argument-error"),this.apiKey=c,this.operation=u,this.code=l,this.continueUrl=null!==(i=a.continueUrl)&&void 0!==i?i:null,this.languageCode=null!==(s=a.languageCode)&&void 0!==s?s:null,this.tenantId=null!==(o=a.tenantId)&&void 0!==o?o:null}static parseLink(e){const t=function(e){const t=Xn(Zn(e)).link,n=t?Xn(Zn(t)).deep_link_id:null,r=Xn(Zn(e)).deep_link_id;return(r?Xn(Zn(r)).link:null)||r||n||t||e}(e);try{return new qS(t)}catch(n){return null}}}class KS{constructor(){this.providerId=KS.PROVIDER_ID}static credential(e,t){return US._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=qS.parseLink(t);return __(n,"argument-error"),US._fromEmailAndCode(e,n.code,n.tenantId)}}KS.PROVIDER_ID="password",KS.EMAIL_PASSWORD_SIGN_IN_METHOD="password",KS.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class GS{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class WS extends GS{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class HS extends WS{static credentialFromJSON(e){const t="string"===typeof e?JSON.parse(e):e;return __("providerId"in t&&"signInMethod"in t,"argument-error"),jS._fromParams(t)}credential(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}_credential(e){return __(e.idToken||e.accessToken,"argument-error"),jS._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(e){return HS.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return HS.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r,oauthTokenSecret:i,pendingToken:s,nonce:o,providerId:a}=t;if(!r&&!i&&!n&&!s)return null;if(!a)return null;try{return new HS(a)._credential({idToken:n,accessToken:r,nonce:o,pendingToken:s})}catch(c){return null}}}class QS extends WS{constructor(){super("facebook.com")}static credential(e){return jS._fromParams({providerId:QS.PROVIDER_ID,signInMethod:QS.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return QS.credentialFromTaggedObject(e)}static credentialFromError(e){return QS.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return QS.credential(t.oauthAccessToken)}catch(n){return null}}}QS.FACEBOOK_SIGN_IN_METHOD="facebook.com",QS.PROVIDER_ID="facebook.com";class YS extends WS{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return jS._fromParams({providerId:YS.PROVIDER_ID,signInMethod:YS.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return YS.credentialFromTaggedObject(e)}static credentialFromError(e){return YS.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return YS.credential(n,r)}catch(i){return null}}}YS.GOOGLE_SIGN_IN_METHOD="google.com",YS.PROVIDER_ID="google.com";class $S extends WS{constructor(){super("github.com")}static credential(e){return jS._fromParams({providerId:$S.PROVIDER_ID,signInMethod:$S.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return $S.credentialFromTaggedObject(e)}static credentialFromError(e){return $S.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return $S.credential(t.oauthAccessToken)}catch(n){return null}}}$S.GITHUB_SIGN_IN_METHOD="github.com",$S.PROVIDER_ID="github.com";class JS extends PS{constructor(e,t){super(e,e),this.pendingToken=t}_getIdTokenResponse(e){return VS(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,VS(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,VS(e,t)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r,pendingToken:i}=t;return n&&r&&i&&n===r?new JS(n,i):null}static _create(e,t){return new JS(e,t)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class XS extends GS{constructor(e){__(e.startsWith("saml."),"argument-error"),super(e)}static credentialFromResult(e){return XS.samlCredentialFromTaggedObject(e)}static credentialFromError(e){return XS.samlCredentialFromTaggedObject(e.customData||{})}static credentialFromJSON(e){const t=JS.fromJSON(e);return __(t,"argument-error"),t}static samlCredentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{pendingToken:n,providerId:r}=t;if(!n||!r)return null;try{return JS._create(r,n)}catch(i){return null}}}class ZS extends WS{constructor(){super("twitter.com")}static credential(e,t){return jS._fromParams({providerId:ZS.PROVIDER_ID,signInMethod:ZS.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return ZS.credentialFromTaggedObject(e)}static credentialFromError(e){return ZS.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return ZS.credential(n,r)}catch(i){return null}}}async function eE(e,t){return L_(e,"POST","/v1/accounts:signUp",O_(e,t))}ZS.TWITTER_SIGN_IN_METHOD="twitter.com",ZS.PROVIDER_ID="twitter.com";class tE{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=await Z_._fromIdTokenResponse(e,n,r),s=nE(n);return new tE({user:i,providerId:s,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const r=nE(n);return new tE({user:e,providerId:r,_tokenResponse:n,operationType:t})}}function nE(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class rE extends Gn{constructor(e,t,n,r){var i;super(t.code,t.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,rE.prototype),this.customData={appName:e.name,tenantId:null!==(i=e.tenantId)&&void 0!==i?i:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,r){return new rE(e,t,n,r)}}function iE(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((n=>{if(n.code==="auth/".concat("multi-factor-auth-required"))throw rE._fromErrorAndOperation(e,n,t,r);throw n}))}function sE(e){return new Set(e.map((e=>{let{providerId:t}=e;return t})).filter((e=>!!e)))}async function oE(e,t){const n=rr(e);await cE(!0,n,t);const{providerUserInfo:r}=await async function(e,t){return R_(e,"POST","/v1/accounts:update",t)}(n.auth,{idToken:await n.getIdToken(),deleteProvider:[t]}),i=sE(r||[]);return n.providerData=n.providerData.filter((e=>i.has(e.providerId))),i.has("phone")||(n.phoneNumber=null),await n.auth._persistUserIfCurrent(n),n}async function aE(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=await H_(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return tE._forOperation(e,"link",r)}async function cE(e,t,n){await $_(t);const r=!1===e?"provider-already-linked":"no-such-provider";__(sE(t.providerData).has(n)===e,t.auth,r)}async function lE(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{auth:r}=e,i="reauthenticate";try{const s=await H_(e,iE(r,i,t,e),n);__(s.idToken,r,"internal-error");const o=W_(s.idToken);__(o,r,"internal-error");const{sub:a}=o;return __(e.uid===a,r,"user-mismatch"),tE._forOperation(e,i,s)}catch(s){throw(null===s||void 0===s?void 0:s.code)==="auth/".concat("user-not-found")&&g_(r,"user-mismatch"),s}}async function uE(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r="signIn",i=await iE(e,r,t),s=await tE._fromIdTokenResponse(e,r,i);return n||await e._updateCurrentUser(s.user),s}async function hE(e,t){return uE(bS(e),t)}async function dE(e,t){const n=rr(e);return await cE(!1,n,t.providerId),aE(n,t)}async function fE(e,t){return lE(rr(e),t)}async function pE(e,t){const n=bS(e),r=await async function(e,t){return L_(e,"POST","/v1/accounts:signInWithCustomToken",O_(e,t))}(n,{token:t,returnSecureToken:!0}),i=await tE._fromIdTokenResponse(n,"signIn",r);return await n._updateCurrentUser(i.user),i}class mE{constructor(e,t){this.factorId=e,this.uid=t.mfaEnrollmentId,this.enrollmentTime=new Date(t.enrolledAt).toUTCString(),this.displayName=t.displayName}static _fromServerResponse(e,t){return"phoneInfo"in t?gE._fromServerResponse(e,t):"totpInfo"in t?yE._fromServerResponse(e,t):g_(e,"internal-error")}}class gE extends mE{constructor(e){super("phone",e),this.phoneNumber=e.phoneInfo}static _fromServerResponse(e,t){return new gE(t)}}class yE extends mE{constructor(e){super("totp",e)}static _fromServerResponse(e,t){return new yE(t)}}function vE(e,t,n){var r;__((null===(r=n.url)||void 0===r?void 0:r.length)>0,e,"invalid-continue-uri"),__("undefined"===typeof n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(__(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&(__(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}async function wE(e){const t=bS(e);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function bE(e,t){await async function(e,t){return R_(e,"POST","/v1/accounts:update",O_(e,t))}(rr(e),{oobCode:t})}async function _E(e,t){const n=rr(e),r=await OS(n,{oobCode:t}),i=r.requestType;switch(__(i,n,"internal-error"),i){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":__(r.newEmail,n,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":__(r.mfaInfo,n,"internal-error");default:__(r.email,n,"internal-error")}let s=null;return r.mfaInfo&&(s=mE._fromServerResponse(bS(n),r.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===r.requestType?r.newEmail:r.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===r.requestType?r.email:r.newEmail)||null,multiFactorInfo:s},operation:i}}async function SE(e,t){const n={identifier:t,continueUri:T_()?I_():"http://localhost"},{signinMethods:r}=await async function(e,t){return R_(e,"POST","/v1/accounts:createAuthUri",O_(e,t))}(rr(e),n);return r||[]}async function EE(e,t){const n=rr(e),r={requestType:"VERIFY_EMAIL",idToken:await e.getIdToken()};t&&vE(n.auth,r,t);const{email:i}=await async function(e,t){return LS(e,t)}(n.auth,r);i!==e.email&&await e.reload()}async function IE(e,t,n){const r=rr(e),i={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:await e.getIdToken(),newEmail:t};n&&vE(r.auth,i,n);const{email:s}=await async function(e,t){return LS(e,t)}(r.auth,i);s!==e.email&&await e.reload()}async function TE(e,t){let{displayName:n,photoURL:r}=t;if(void 0===n&&void 0===r)return;const i=rr(e),s={idToken:await i.getIdToken(),displayName:n,photoUrl:r,returnSecureToken:!0},o=await H_(i,async function(e,t){return R_(e,"POST","/v1/accounts:update",t)}(i.auth,s));i.displayName=o.displayName||null,i.photoURL=o.photoUrl||null;const a=i.providerData.find((e=>{let{providerId:t}=e;return"password"===t}));a&&(a.displayName=i.displayName,a.photoURL=i.photoURL),await i._updateTokensIfNecessary(o)}async function kE(e,t,n){const{auth:r}=e,i={idToken:await e.getIdToken(),returnSecureToken:!0};t&&(i.email=t),n&&(i.password=n);const s=await H_(e,async function(e,t){return R_(e,"POST","/v1/accounts:update",t)}(r,i));await e._updateTokensIfNecessary(s,!0)}class CE{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.isNewUser=e,this.providerId=t,this.profile=n}}class xE extends CE{constructor(e,t,n,r){super(e,t,n),this.username=r}}class NE extends CE{constructor(e,t){super(e,"facebook.com",t)}}class AE extends xE{constructor(e,t){super(e,"github.com",t,"string"===typeof(null===t||void 0===t?void 0:t.login)?null===t||void 0===t?void 0:t.login:null)}}class PE extends CE{constructor(e,t){super(e,"google.com",t)}}class OE extends xE{constructor(e,t,n){super(e,"twitter.com",t,n)}}function RE(e){const{user:t,_tokenResponse:n}=e;return t.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:function(e){var t,n;if(!e)return null;const{providerId:r}=e,i=e.rawUserInfo?JSON.parse(e.rawUserInfo):{},s=e.isNewUser||"identitytoolkit#SignupNewUserResponse"===e.kind;if(!r&&(null===e||void 0===e?void 0:e.idToken)){const r=null===(n=null===(t=W_(e.idToken))||void 0===t?void 0:t.firebase)||void 0===n?void 0:n.sign_in_provider;if(r)return new CE(s,"anonymous"!==r&&"custom"!==r?r:null)}if(!r)return null;switch(r){case"facebook.com":return new NE(s,i);case"github.com":return new AE(s,i);case"google.com":return new PE(s,i);case"twitter.com":return new OE(s,i,e.screenName||null);case"custom":case"anonymous":return new CE(s,null);default:return new CE(s,r,i)}}(n)}class DE{constructor(e,t,n){this.type=e,this.credential=t,this.user=n}static _fromIdtoken(e,t){return new DE("enroll",e,t)}static _fromMfaPendingCredential(e){return new DE("signin",e)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(e){var t,n;if(null===e||void 0===e?void 0:e.multiFactorSession){if(null===(t=e.multiFactorSession)||void 0===t?void 0:t.pendingCredential)return DE._fromMfaPendingCredential(e.multiFactorSession.pendingCredential);if(null===(n=e.multiFactorSession)||void 0===n?void 0:n.idToken)return DE._fromIdtoken(e.multiFactorSession.idToken)}return null}}class LE{constructor(e,t,n){this.session=e,this.hints=t,this.signInResolver=n}static _fromError(e,t){const n=bS(e),r=t.customData._serverResponse,i=(r.mfaInfo||[]).map((e=>mE._fromServerResponse(n,e)));__(r.mfaPendingCredential,n,"internal-error");const s=DE._fromMfaPendingCredential(r.mfaPendingCredential);return new LE(s,i,(async e=>{const i=await e._process(n,s);delete r.mfaInfo,delete r.mfaPendingCredential;const o=Object.assign(Object.assign({},r),{idToken:i.idToken,refreshToken:i.refreshToken});switch(t.operationType){case"signIn":const e=await tE._fromIdTokenResponse(n,t.operationType,o);return await n._updateCurrentUser(e.user),e;case"reauthenticate":return __(t.user,n,"internal-error"),tE._forOperation(t.user,t.operationType,o);default:g_(n,"internal-error")}}))}async resolveSignIn(e){const t=e;return this.signInResolver(t)}}class ME{constructor(e){this.user=e,this.enrolledFactors=[],e._onReload((t=>{t.mfaInfo&&(this.enrolledFactors=t.mfaInfo.map((t=>mE._fromServerResponse(e.auth,t))))}))}static _fromUser(e){return new ME(e)}async getSession(){return DE._fromIdtoken(await this.user.getIdToken(),this.user)}async enroll(e,t){const n=e,r=await this.getSession(),i=await H_(this.user,n._process(this.user.auth,r,t));return await this.user._updateTokensIfNecessary(i),this.user.reload()}async unenroll(e){const t="string"===typeof e?e:e.uid,n=await this.user.getIdToken();try{const e=await H_(this.user,function(e,t){return R_(e,"POST","/v2/accounts/mfaEnrollment:withdraw",O_(e,t))}(this.user.auth,{idToken:n,mfaEnrollmentId:t}));this.enrolledFactors=this.enrolledFactors.filter((e=>{let{uid:n}=e;return n!==t})),await this.user._updateTokensIfNecessary(e),await this.user.reload()}catch(r){throw r}}}const FE=new WeakMap;const UE="__sak";class VE{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(UE,"1"),this.storage.removeItem(UE),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class jE extends VE{constructor(){super((()=>window.localStorage),"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function(){const e=Un();return cS(e)||pS(e)}()&&function(){try{return!(!window||window===window.top)}catch(e){return!1}}(),this.fallbackToPolling=mS(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e.key)return void this.forAllChangedKeys(((e,t,n)=>{this.notifyListeners(e,n)}));const n=e.key;if(t?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const r=this.storage.getItem(n);if(e.newValue!==r)null!==e.newValue?this.storage.setItem(n,e.newValue):this.storage.removeItem(n);else if(this.localCache[n]===e.newValue&&!t)return}const r=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},i=this.storage.getItem(n);Bn()&&10===document.documentMode&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,10):r()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((()=>{this.forAllChangedKeys(((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)}))}),1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}jE.type="LOCAL";const zE=jE;class BE extends VE{constructor(){super((()=>window.sessionStorage),"SESSION")}_addListener(e,t){}_removeListener(e,t){}}BE.type="SESSION";const qE=BE;class KE{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find((t=>t.isListeningto(e)));if(t)return t;const n=new KE(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:r,data:i}=t.data,s=this.handlersMap[r];if(!(null===s||void 0===s?void 0:s.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:r});const o=Array.from(s).map((async e=>e(t.origin,i))),a=await function(e){return Promise.all(e.map((async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}})))}(o);t.ports[0].postMessage({status:"done",eventId:n,eventType:r,response:a})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function GE(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="";for(let r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}KE.receivers=[];class WE{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50;const r="undefined"!==typeof MessageChannel?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let i,s;return new Promise(((o,a)=>{const c=GE("",20);r.port1.start();const l=setTimeout((()=>{a(new Error("unsupported_event"))}),n);s={messageChannel:r,onMessage(e){const t=e;if(t.data.eventId===c)switch(t.data.status){case"ack":clearTimeout(l),i=setTimeout((()=>{a(new Error("timeout"))}),3e3);break;case"done":clearTimeout(i),o(t.data.response);break;default:clearTimeout(l),clearTimeout(i),a(new Error("invalid_response"))}}},this.handlers.add(s),r.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:c,data:t},[r.port2])})).finally((()=>{s&&this.removeMessageHandler(s)}))}}function HE(){return window}function QE(){return"undefined"!==typeof HE().WorkerGlobalScope&&"function"===typeof HE().importScripts}const YE="firebaseLocalStorageDb",$E="firebaseLocalStorage",JE="fbase_key";class XE{constructor(e){this.request=e}toPromise(){return new Promise(((e,t)=>{this.request.addEventListener("success",(()=>{e(this.request.result)})),this.request.addEventListener("error",(()=>{t(this.request.error)}))}))}}function ZE(e,t){return e.transaction([$E],t?"readwrite":"readonly").objectStore($E)}function eI(){const e=indexedDB.open(YE,1);return new Promise(((t,n)=>{e.addEventListener("error",(()=>{n(e.error)})),e.addEventListener("upgradeneeded",(()=>{const t=e.result;try{t.createObjectStore($E,{keyPath:JE})}catch(r){n(r)}})),e.addEventListener("success",(async()=>{const n=e.result;n.objectStoreNames.contains($E)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(YE);return new XE(e).toPromise()}(),t(await eI()))}))}))}async function tI(e,t,n){const r=ZE(e,!0).put({[JE]:t,value:n});return new XE(r).toPromise()}function nI(e,t){const n=ZE(e,!0).delete(t);return new XE(n).toPromise()}class rI{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((()=>{}),(()=>{}))}async _openDb(){return this.db||(this.db=await eI()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(n){if(t++>3)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return QE()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=KE._getInstance(QE()?self:null),this.receiver._subscribe("keyChanged",(async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)}))),this.receiver._subscribe("ping",(async(e,t)=>["keyChanged"]))}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(e){return null}}(),!this.activeServiceWorker)return;this.sender=new WE(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&(null===(e=n[0])||void 0===e?void 0:e.fulfilled)&&(null===(t=n[0])||void 0===t?void 0:t.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(this.sender&&this.activeServiceWorker&&function(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}()===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(t){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await eI();return await tI(e,UE,"1"),await nI(e,UE),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite((async()=>(await this._withRetries((n=>tI(n,e,t))),this.localCache[e]=t,this.notifyServiceWorker(e))))}async _get(e){const t=await this._withRetries((t=>async function(e,t){const n=ZE(e,!1).get(t),r=await new XE(n).toPromise();return void 0===r?null:r.value}(t,e)));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite((async()=>(await this._withRetries((t=>nI(t,e))),delete this.localCache[e],this.notifyServiceWorker(e))))}async _poll(){const e=await this._withRetries((e=>{const t=ZE(e,!1).getAll();return new XE(t).toPromise()}));if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;if(0!==e.length)for(const{fbase_key:r,value:i}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!n.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((async()=>this._poll()),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}rI.type="LOCAL";const iI=rI;const sI=1e12;class oI{constructor(e){this.auth=e,this.counter=sI,this._widgets=new Map}render(e,t){const n=this.counter;return this._widgets.set(n,new aI(e,this.auth.name,t||{})),this.counter++,n}reset(e){var t;const n=e||sI;null===(t=this._widgets.get(n))||void 0===t||t.delete(),this._widgets.delete(n)}getResponse(e){var t;const n=e||sI;return(null===(t=this._widgets.get(n))||void 0===t?void 0:t.getResponse())||""}async execute(e){var t;const n=e||sI;return null===(t=this._widgets.get(n))||void 0===t||t.execute(),""}}class aI{constructor(e,t,n){this.params=n,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const r="string"===typeof e?document.getElementById(e):e;__(r,"argument-error",{appName:t}),this.container=r,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),this.timerId||(this.timerId=window.setTimeout((()=>{this.responseToken=function(e){const t=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let r=0;r<e;r++)t.push(n.charAt(Math.floor(Math.random()*n.length)));return t.join("")}(50);const{callback:e,"expired-callback":t}=this.params;if(e)try{e(this.responseToken)}catch(n){}this.timerId=window.setTimeout((()=>{if(this.timerId=null,this.responseToken=null,t)try{t()}catch(n){}this.isVisible&&this.execute()}),6e4)}),500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const cI=IS("rcb"),lI=new C_(3e4,6e4);class uI{constructor(){var e;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(null===(e=HE().grecaptcha)||void 0===e?void 0:e.render)}load(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return __(function(e){return e.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(e)}(t),e,"argument-error"),this.shouldResolveImmediately(t)&&j_(HE().grecaptcha)?Promise.resolve(HE().grecaptcha):new Promise(((n,r)=>{const i=HE().setTimeout((()=>{r(y_(e,"network-request-failed"))}),lI.get());HE()[cI]=()=>{HE().clearTimeout(i),delete HE()[cI];const s=HE().grecaptcha;if(!s||!j_(s))return void r(y_(e,"internal-error"));const o=s.render;s.render=(e,t)=>{const n=o(e,t);return this.counter++,n},this.hostLanguage=t,n(s)};ES("".concat(SS.recaptchaV2Script,"?").concat(Jn({onload:cI,render:"explicit",hl:t}))).catch((()=>{clearTimeout(i),r(y_(e,"internal-error"))}))}))}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){var t;return!!(null===(t=HE().grecaptcha)||void 0===t?void 0:t.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class hI{async load(e){return new oI(e)}clearedOneInstance(){}}const dI="recaptcha",fI={theme:"light",type:"image"};class pI{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Object.assign({},fI);this.parameters=n,this.type=dI,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=bS(e),this.isInvisible="invisible"===this.parameters.size,__("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment");const r="string"===typeof t?document.getElementById(t):t;__(r,this.auth,"argument-error"),this.container=r,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new hI:new uI,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),t=this.getAssertedRecaptcha(),n=t.getResponse(e);return n||new Promise((n=>{const r=e=>{e&&(this.tokenChangeListeners.delete(r),n(e))};this.tokenChangeListeners.add(r),this.isInvisible&&t.execute(e)}))}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch((e=>{throw this.renderPromise=null,e}))),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach((e=>{this.container.removeChild(e)}))}validateStartingState(){__(!this.parameters.sitekey,this.auth,"argument-error"),__(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),__("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return t=>{if(this.tokenChangeListeners.forEach((e=>e(t))),"function"===typeof e)e(t);else if("string"===typeof e){const n=HE()[e];"function"===typeof n&&n(t)}}}assertNotDestroyed(){__(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const t=document.createElement("div");e.appendChild(t),e=t}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){__(T_()&&!QE(),this.auth,"internal-error"),await function(){let e=null;return new Promise((t=>{"complete"!==document.readyState?(e=()=>t(),window.addEventListener("load",e)):t()})).catch((t=>{throw e&&window.removeEventListener("load",e),t}))}(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await async function(e){return(await R_(e,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}(this.auth);__(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return __(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class mI{constructor(e,t){this.verificationId=e,this.onConfirmation=t}confirm(e){const t=BS._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}async function gI(e,t,n){var r;const i=await n.verify();try{let s;if(__("string"===typeof i,e,"argument-error"),__(n.type===dI,e,"argument-error"),s="string"===typeof t?{phoneNumber:t}:t,"session"in s){const t=s.session;if("phoneNumber"in s){__("enroll"===t.type,e,"internal-error");const n=await function(e,t){return R_(e,"POST","/v2/accounts/mfaEnrollment:start",O_(e,t))}(e,{idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:s.phoneNumber,recaptchaToken:i}});return n.phoneSessionInfo.sessionInfo}{__("signin"===t.type,e,"internal-error");const n=(null===(r=s.multiFactorHint)||void 0===r?void 0:r.uid)||s.multiFactorUid;__(n,e,"missing-multi-factor-info");const o=await function(e,t){return R_(e,"POST","/v2/accounts/mfaSignIn:start",O_(e,t))}(e,{mfaPendingCredential:t.credential,mfaEnrollmentId:n,phoneSignInInfo:{recaptchaToken:i}});return o.phoneResponseInfo.sessionInfo}}{const{sessionInfo:t}=await async function(e,t){return R_(e,"POST","/v1/accounts:sendVerificationCode",O_(e,t))}(e,{phoneNumber:s.phoneNumber,recaptchaToken:i});return t}}finally{n._reset()}}class yI{constructor(e){this.providerId=yI.PROVIDER_ID,this.auth=bS(e)}verifyPhoneNumber(e,t){return gI(this.auth,e,rr(t))}static credential(e,t){return BS._fromVerification(e,t)}static credentialFromResult(e){const t=e;return yI.credentialFromTaggedObject(t)}static credentialFromError(e){return yI.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{phoneNumber:n,temporaryProof:r}=t;return n&&r?BS._fromTokenResponse(n,r):null}}function vI(e,t){return t?tS(t):(__(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}yI.PROVIDER_ID="phone",yI.PHONE_SIGN_IN_METHOD="phone";class wI extends PS{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return VS(e,this._buildIdpRequest())}_linkToIdToken(e,t){return VS(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return VS(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function bI(e){return uE(e.auth,new wI(e),e.bypassAuthState)}function _I(e){const{auth:t,user:n}=e;return __(n,t,"internal-error"),lE(n,new wI(e),e.bypassAuthState)}async function SI(e){const{auth:t,user:n}=e;return __(n,t,"internal-error"),aE(n,new wI(e),e.bypassAuthState)}class EI{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}}))}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:r,tenantId:i,error:s,type:o}=e;if(s)return void this.reject(s);const a={auth:this.auth,requestUri:t,sessionId:n,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(a))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return bI;case"linkViaPopup":case"linkViaRedirect":return SI;case"reauthViaPopup":case"reauthViaRedirect":return _I;default:g_(this.auth,"internal-error")}}resolve(e){E_(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){E_(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const II=new C_(2e3,1e4);class TI extends EI{constructor(e,t,n,r,i){super(e,t,r,i),this.provider=n,this.authWindow=null,this.pollId=null,TI.currentPopupAction&&TI.currentPopupAction.cancel(),TI.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return __(e,this.auth,"internal-error"),e}async onExecution(){E_(1===this.filter.length,"Popup operations only handle one event");const e=GE();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch((e=>{this.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(e=>{e||this.reject(y_(this.auth,"web-storage-unsupported"))})),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(y_(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,TI.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;(null===(n=null===(t=this.authWindow)||void 0===t?void 0:t.window)||void 0===n?void 0:n.closed)?this.pollId=window.setTimeout((()=>{this.pollId=null,this.reject(y_(this.auth,"popup-closed-by-user"))}),8e3):this.pollId=window.setTimeout(e,II.get())};e()}}TI.currentPopupAction=null;const kI="pendingRedirect",CI=new Map;class xI extends EI{constructor(e,t){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,arguments.length>2&&void 0!==arguments[2]&&arguments[2]),this.eventId=null}async execute(){let e=CI.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=OI(t),r=PI(e);if(!await r._isAvailable())return!1;const i="true"===await r._get(n);return await r._remove(n),i}(this.resolver,this.auth),n=t?await super.execute():null;e=()=>Promise.resolve(n)}catch(t){e=()=>Promise.reject(t)}CI.set(this.auth._key(),e)}return this.bypassAuthState||CI.set(this.auth._key(),(()=>Promise.resolve(null))),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}async function NI(e,t){return PI(e)._set(OI(t),"true")}function AI(e,t){CI.set(e._key(),t)}function PI(e){return tS(e._redirectPersistence)}function OI(e){return iS(kI,e.config.apiKey,e.name)}function RI(e,t,n){return async function(e,t,n){const r=bS(e);w_(e,t,GS),await r._initializationPromise;const i=vI(r,n);return await NI(i,r),i._openRedirect(r,t,"signInViaRedirect")}(e,t,n)}function DI(e,t,n){return async function(e,t,n){const r=rr(e);w_(r.auth,t,GS),await r.auth._initializationPromise;const i=vI(r.auth,n);await NI(i,r.auth);const s=await FI(r);return i._openRedirect(r.auth,t,"reauthViaRedirect",s)}(e,t,n)}function LI(e,t,n){return async function(e,t,n){const r=rr(e);w_(r.auth,t,GS),await r.auth._initializationPromise;const i=vI(r.auth,n);await cE(!1,r,t.providerId),await NI(i,r.auth);const s=await FI(r);return i._openRedirect(r.auth,t,"linkViaRedirect",s)}(e,t,n)}async function MI(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=bS(e),i=vI(r,t),s=new xI(r,i,n),o=await s.execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,t)),o}async function FI(e){const t=GE("".concat(e.uid,":::"));return e._redirectEventId=t,await e.auth._setRedirectUser(e),await e.auth._persistUserIfCurrent(e),t}class UI{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach((n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return jI(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!jI(e)){const r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(y_(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(VI(e))}saveEventToCache(e){this.cachedEventUids.add(VI(e)),this.lastProcessedEventTime=Date.now()}}function VI(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((e=>e)).join("-")}function jI(e){let{type:t,error:n}=e;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}async function zI(e){return R_(e,"GET","/v1/projects",arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}const BI=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,qI=/^https?/;function KI(e){const t=I_(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const i=new URL(e);return""===i.hostname&&""===r?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&i.hostname===r}if(!qI.test(n))return!1;if(BI.test(e))return r===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const GI=new C_(3e4,6e4);function WI(){const e=HE().___jsl;if(null===e||void 0===e?void 0:e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}function HI(e){return new Promise(((t,n)=>{var r,i,s;function o(){WI(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{WI(),n(y_(e,"network-request-failed"))},timeout:GI.get()})}if(null===(i=null===(r=HE().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(s=HE().gapi)||void 0===s?void 0:s.load)){const t=IS("iframefcb");return HE()[t]=()=>{gapi.load?o():n(y_(e,"network-request-failed"))},ES("".concat(SS.gapiScript,"?onload=").concat(t)).catch((e=>n(e)))}o()}})).catch((e=>{throw QI=null,e}))}let QI=null;const YI=new C_(5e3,15e3),$I="__/auth/iframe",JI="emulator/auth/iframe",XI={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},ZI=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function eT(e){const t=e.config;__(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?x_(t,JI):"https://".concat(e.config.authDomain,"/").concat($I),r={apiKey:t.apiKey,appName:e.name,v:Qr},i=ZI.get(e.config.apiHost);i&&(r.eid=i);const s=e._getFrameworks();return s.length&&(r.fw=s.join(",")),"".concat(n,"?").concat(Jn(r).slice(1))}async function tT(e){const t=await function(e){return QI=QI||HI(e),QI}(e),n=HE().gapi;return __(n,e,"internal-error"),t.open({where:document.body,url:eT(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:XI,dontclear:!0},(t=>new Promise((async(n,r)=>{await t.restyle({setHideOnLeave:!1});const i=y_(e,"network-request-failed"),s=HE().setTimeout((()=>{r(i)}),YI.get());function o(){HE().clearTimeout(s),n(t)}t.ping(o).then(o,(()=>{r(i)}))}))))}const nT={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class rT{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(e){}}}function iT(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600;const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const c=Object.assign(Object.assign({},nT),{width:r.toString(),height:i.toString(),top:s,left:o}),l=Un().toLowerCase();n&&(a=lS(l)?"_blank":n),aS(l)&&(t=t||"http://localhost",c.scrollbars="yes");const u=Object.entries(c).reduce(((e,t)=>{let[n,r]=t;return"".concat(e).concat(n,"=").concat(r,",")}),"");if(function(){var e;return pS(arguments.length>0&&void 0!==arguments[0]?arguments[0]:Un())&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}(l)&&"_self"!==a)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",a),new rT(null);const h=window.open(t||"",a,u);__(h,e,"popup-blocked");try{h.focus()}catch(d){}return new rT(h)}const sT="__/auth/handler",oT="emulator/auth/handler",aT=encodeURIComponent("fac");async function cT(e,t,n,r,i,s){__(e.config.authDomain,e,"auth-domain-config-required"),__(e.config.apiKey,e,"invalid-api-key");const o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:Qr,eventId:i};if(t instanceof GS){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",function(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(s||{}))o[e]=t}if(t instanceof WS){const e=t.getScopes().filter((e=>""!==e));e.length>0&&(o.scopes=e.join(","))}e.tenantId&&(o.tid=e.tenantId);const a=o;for(const u of Object.keys(a))void 0===a[u]&&delete a[u];const c=await e._getAppCheckToken(),l=c?"#".concat(aT,"=").concat(encodeURIComponent(c)):"";return"".concat(function(e){let{config:t}=e;if(!t.emulator)return"https://".concat(t.authDomain,"/").concat(sT);return x_(t,oT)}(e),"?").concat(Jn(a).slice(1)).concat(l)}const lT="webStorageSupport";const uT=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=qE,this._completeRedirectFn=MI,this._overrideRedirectResult=AI}async _openPopup(e,t,n,r){var i;E_(null===(i=this.eventManagers[e._key()])||void 0===i?void 0:i.manager,"_initialize() not called before _openPopup()");return iT(e,await cT(e,t,n,I_(),r),GE())}async _openRedirect(e,t,n,r){await this._originValidation(e);return function(e){HE().location.href=e}(await cT(e,t,n,I_(),r)),new Promise((()=>{}))}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(E_(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch((()=>{delete this.eventManagers[t]})),n}async initAndGetManager(e){const t=await tT(e),n=new UI(e);return t.register("authEvent",(t=>{__(null===t||void 0===t?void 0:t.authEvent,e,"invalid-auth-event");return{status:n.onEvent(t.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(lT,{type:lT},(n=>{var r;const i=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r[lT];void 0!==i&&t(!!i),g_(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=async function(e){if(e.config.emulator)return;const{authorizedDomains:t}=await zI(e);for(const r of t)try{if(KI(r))return}catch(n){}g_(e,"unauthorized-domain")}(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return mS()||cS()||pS()}};class hT{constructor(e){this.factorId=e}_process(e,t,n){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,n);case"signin":return this._finalizeSignIn(e,t.credential);default:return S_("unexpected MultiFactorSessionType")}}}class dT extends hT{constructor(e){super("phone"),this.credential=e}static _fromCredential(e){return new dT(e)}_finalizeEnroll(e,t,n){return function(e,t){return R_(e,"POST","/v2/accounts/mfaEnrollment:finalize",O_(e,t))}(e,{idToken:t,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(e,t){return function(e,t){return R_(e,"POST","/v2/accounts/mfaSignIn:finalize",O_(e,t))}(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}class fT{constructor(){}static assertion(e){return dT._fromCredential(e)}}fT.FACTOR_ID="phone";var pT="@firebase/auth",mT="1.6.2";class gT{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;return{accessToken:await this.auth.currentUser.getIdToken(e)}}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged((t=>{e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){__(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}(e=>{var t;null===(t=Ln())||void 0===t||t["_".concat(e)]})("authIdTokenMaxAge");var yT;function vT(){return window}!function(e){SS=e}({loadJS:e=>new Promise(((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=e=>{const t=y_("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)})),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="}),yT="Browser",Br(new ir("auth",((e,t)=>{let{options:n}=t;const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;__(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const c={apiKey:o,authDomain:a,clientPlatform:yT,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:gS(yT)},l=new wS(r,i,s,c);return function(e,t){const n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(tS);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(l,n),l}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback(((e,t,n)=>{e.getProvider("auth-internal").initialize()}))),Br(new ir("auth-internal",(e=>(e=>new gT(e))(bS(e.getProvider("auth").getImmediate()))),"PRIVATE").setInstantiationMode("EXPLICIT")),Zr(pT,mT,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(yT)),Zr(pT,mT,"esm2017");async function wT(e,t,n){var r;const{BuildInfo:i}=vT();E_(t.sessionId,"AuthEvent did not contain a session ID");const s=await async function(e){const t=function(e){if(E_(/[0-9a-zA-Z]+/.test(e),"Can only convert alpha-numeric strings"),"undefined"!==typeof TextEncoder)return(new TextEncoder).encode(e);const t=new ArrayBuffer(e.length),n=new Uint8Array(t);for(let r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}(e),n=await crypto.subtle.digest("SHA-256",t);return Array.from(new Uint8Array(n)).map((e=>e.toString(16).padStart(2,"0"))).join("")}(t.sessionId),o={};return pS()?o.ibi=i.packageName:hS()?o.apn=i.packageName:g_(e,"operation-not-supported-in-this-environment"),i.displayName&&(o.appDisplayName=i.displayName),o.sessionId=s,cT(e,n,t.type,void 0,null!==(r=t.eventId)&&void 0!==r?r:void 0,o)}function bT(e){const{cordova:t}=vT();return new Promise((n=>{t.plugins.browsertab.isAvailable((r=>{let i=null;r?t.plugins.browsertab.openUrl(e):i=t.InAppBrowser.open(e,function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Un();return/(iPad|iPhone|iPod).*OS 7_\d/i.test(e)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(e)}()?"_blank":"_system","location=yes"),n(i)}))}))}const _T=20;class ST extends UI{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise((e=>{this.resolveInialized=e}))}addPassiveListener(e){this.passiveListeners.add(e)}removePassiveListener(e){this.passiveListeners.delete(e)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(e){return this.resolveInialized(),this.passiveListeners.forEach((t=>t(e))),super.onEvent(e)}async initialized(){await this.initPromise}}async function ET(e){const t=await kT()._get(CT(e));return t&&await kT()._remove(CT(e)),t}function IT(e,t){var n,r;const i=function(e){const t=xT(e),n=t.link?decodeURIComponent(t.link):void 0,r=xT(n).link,i=t.deep_link_id?decodeURIComponent(t.deep_link_id):void 0;return xT(i).link||i||r||n||e}(t);if(i.includes("/__/auth/callback")){const t=xT(i),s=t.firebaseError?function(e){try{return JSON.parse(e)}catch(t){return null}}(decodeURIComponent(t.firebaseError)):null,o=null===(r=null===(n=null===s||void 0===s?void 0:s.code)||void 0===n?void 0:n.split("auth/"))||void 0===r?void 0:r[1],a=o?y_(o):null;return a?{type:e.type,eventId:e.eventId,tenantId:e.tenantId,error:a,urlResponse:null,sessionId:null,postBody:null}:{type:e.type,eventId:e.eventId,tenantId:e.tenantId,sessionId:e.sessionId,urlResponse:i,postBody:null}}return null}function TT(){const e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let n=0;n<_T;n++){const n=Math.floor(62*Math.random());e.push(t.charAt(n))}return e.join("")}function kT(){return tS(zE)}function CT(e){return iS("authEvent",e.config.apiKey,e.name)}function xT(e){if(!(null===e||void 0===e?void 0:e.includes("?")))return{};const[t,...n]=e.split("?");return Xn(n.join("?"))}const NT=class{constructor(){this._redirectPersistence=qE,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=MI,this._overrideRedirectResult=AI}async _initialize(e){const t=e._key();let n=this.eventManagers.get(t);return n||(n=new ST(e),this.eventManagers.set(t,n),this.attachCallbackListeners(e,n)),n}_openPopup(e){g_(e,"operation-not-supported-in-this-environment")}async _openRedirect(e,t,n,r){!function(e){var t,n,r,i,s,o,a,c,l,u;const h=vT();__("function"===typeof(null===(t=null===h||void 0===h?void 0:h.universalLinks)||void 0===t?void 0:t.subscribe),e,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),__("undefined"!==typeof(null===(n=null===h||void 0===h?void 0:h.BuildInfo)||void 0===n?void 0:n.packageName),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),__("function"===typeof(null===(s=null===(i=null===(r=null===h||void 0===h?void 0:h.cordova)||void 0===r?void 0:r.plugins)||void 0===i?void 0:i.browsertab)||void 0===s?void 0:s.openUrl),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),__("function"===typeof(null===(c=null===(a=null===(o=null===h||void 0===h?void 0:h.cordova)||void 0===o?void 0:o.plugins)||void 0===a?void 0:a.browsertab)||void 0===c?void 0:c.isAvailable),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),__("function"===typeof(null===(u=null===(l=null===h||void 0===h?void 0:h.cordova)||void 0===l?void 0:l.InAppBrowser)||void 0===u?void 0:u.open),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(e);const i=await this._initialize(e);await i.initialized(),i.resetRedirect(),CI.clear(),await this._originValidation(e);const s=function(e,t){return{type:t,eventId:arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,urlResponse:null,sessionId:TT(),postBody:null,tenantId:e.tenantId,error:y_(e,"no-auth-event")}}(e,n,r);await function(e,t){return kT()._set(CT(e),t)}(e,s);const o=await wT(e,s,t);return async function(e,t,n){const{cordova:r}=vT();let i=()=>{};try{await new Promise(((s,o)=>{let a=null;function c(){var e;s();const t=null===(e=r.plugins.browsertab)||void 0===e?void 0:e.close;"function"===typeof t&&t(),"function"===typeof(null===n||void 0===n?void 0:n.close)&&n.close()}function l(){a||(a=window.setTimeout((()=>{o(y_(e,"redirect-cancelled-by-user"))}),2e3))}function u(){"visible"===(null===document||void 0===document?void 0:document.visibilityState)&&l()}t.addPassiveListener(c),document.addEventListener("resume",l,!1),hS()&&document.addEventListener("visibilitychange",u,!1),i=()=>{t.removePassiveListener(c),document.removeEventListener("resume",l,!1),document.removeEventListener("visibilitychange",u,!1),a&&window.clearTimeout(a)}}))}finally{i()}}(e,i,await bT(o))}_isIframeWebStorageSupported(e,t){throw new Error("Method not implemented.")}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=async function(e){const{BuildInfo:t}=vT(),n={};pS()?n.iosBundleId=t.packageName:hS()?n.androidPackageName=t.packageName:g_(e,"operation-not-supported-in-this-environment"),await zI(e,n)}(e)),this.originValidationPromises[t]}attachCallbackListeners(e,t){const{universalLinks:n,handleOpenURL:r,BuildInfo:i}=vT(),s=setTimeout((async()=>{await ET(e),t.onEvent(AT())}),500),o=async n=>{clearTimeout(s);const r=await ET(e);let i=null;r&&(null===n||void 0===n?void 0:n.url)&&(i=IT(r,n.url)),t.onEvent(i||AT())};"undefined"!==typeof n&&"function"===typeof n.subscribe&&n.subscribe(null,o);const a=r,c="".concat(i.packageName.toLowerCase(),"://");vT().handleOpenURL=async e=>{if(e.toLowerCase().startsWith(c)&&o({url:e}),"function"===typeof a)try{a(e)}catch(t){console.error(t)}}}};function AT(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:y_("no-auth-event")}}function PT(){var e;return(null===(e=null===self||void 0===self?void 0:self.location)||void 0===e?void 0:e.protocol)||null}function OT(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Un();return!("file:"!==PT()&&"ionic:"!==PT()&&"capacitor:"!==PT()||!e.toLowerCase().match(/iphone|ipad|ipod|android/))}function RT(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Un();return Bn()&&11===(null===document||void 0===document?void 0:document.documentMode)||function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Un();return/Edge\/\d+/.test(e)}(e)}function DT(){try{const e=self.localStorage,t=GE();if(e)return e.setItem(t,"1"),e.removeItem(t),!RT()||Kn()}catch(e){return LT()&&Kn()}return!1}function LT(){return"undefined"!==typeof n.g&&"WorkerGlobalScope"in n.g&&"importScripts"in n.g}function MT(){return("http:"===PT()||"https:"===PT()||jn()||OT())&&!(zn()||Vn())&&DT()&&!LT()}function FT(){return OT()&&"undefined"!==typeof document}const UT={LOCAL:"local",NONE:"none",SESSION:"session"},VT=__,jT="persistence";async function zT(e){await e._initializationPromise;const t=BT(),n=iS(jT,e.config.apiKey,e.name);t&&t.setItem(n,e._getPersistence())}function BT(){var e;try{return(null===(e="undefined"!==typeof window?window:null)||void 0===e?void 0:e.sessionStorage)||null}catch(t){return null}}const qT=__;class KT{constructor(){this.browserResolver=tS(uT),this.cordovaResolver=tS(NT),this.underlyingResolver=null,this._redirectPersistence=qE,this._completeRedirectFn=MI,this._overrideRedirectResult=AI}async _initialize(e){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._initialize(e)}async _openPopup(e,t,n,r){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openPopup(e,t,n,r)}async _openRedirect(e,t,n,r){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openRedirect(e,t,n,r)}_isIframeWebStorageSupported(e,t){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,t)}_originValidation(e){return this.assertedUnderlyingResolver._originValidation(e)}get _shouldInitProactively(){return FT()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return qT(this.underlyingResolver,"internal-error"),this.underlyingResolver}async selectUnderlyingResolver(){if(this.underlyingResolver)return;const e=await async function(){return!!FT()&&new Promise((e=>{const t=setTimeout((()=>{e(!1)}),1e3);document.addEventListener("deviceready",(()=>{clearTimeout(t),e(!0)}))}))}();this.underlyingResolver=e?this.cordovaResolver:this.browserResolver}}function GT(e){return e.unwrap()}function WT(e,t){var n;const r=null===(n=t.customData)||void 0===n?void 0:n._tokenResponse;if("auth/multi-factor-auth-required"===(null===t||void 0===t?void 0:t.code)){t.resolver=new $T(e,function(e,t){var n;const r=rr(e),i=t;return __(t.customData.operationType,r,"argument-error"),__(null===(n=i.customData._serverResponse)||void 0===n?void 0:n.mfaPendingCredential,r,"argument-error"),LE._fromError(r,i)}(e,t))}else if(r){const e=HT(t),n=t;e&&(n.credential=e,n.tenantId=r.tenantId||void 0,n.email=r.email||void 0,n.phoneNumber=r.phoneNumber||void 0)}}function HT(e){const{_tokenResponse:t}=e instanceof Gn?e.customData:e;if(!t)return null;if(!(e instanceof Gn)&&"temporaryProof"in t&&"phoneNumber"in t)return yI.credentialFromResult(e);const n=t.providerId;if(!n||n===r_.PASSWORD)return null;let r;switch(n){case r_.GOOGLE:r=YS;break;case r_.FACEBOOK:r=QS;break;case r_.GITHUB:r=$S;break;case r_.TWITTER:r=ZS;break;default:const{oauthIdToken:e,oauthAccessToken:i,oauthTokenSecret:s,pendingToken:o,nonce:a}=t;return i||s||e||o?o?n.startsWith("saml.")?JS._create(n,o):jS._fromParams({providerId:n,signInMethod:n,pendingToken:o,idToken:e,accessToken:i}):new HS(n).credential({idToken:e,accessToken:i,rawNonce:a}):null}return e instanceof Gn?r.credentialFromError(e):r.credentialFromResult(e)}function QT(e,t){return t.catch((t=>{throw t instanceof Gn&&WT(e,t),t})).then((e=>{const t=e.operationType,n=e.user;return{operationType:t,credential:(r=e,HT(r)),additionalUserInfo:RE(e),user:JT.getOrCreate(n)};var r}))}async function YT(e,t){const n=await t;return{verificationId:n.verificationId,confirm:t=>QT(e,n.confirm(t))}}class $T{constructor(e,t){this.resolver=t,this.auth=e.wrapped()}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(e){return QT(GT(this.auth),this.resolver.resolveSignIn(e))}}class JT{constructor(e){this._delegate=e,this.multiFactor=function(e){const t=rr(e);return FE.has(t)||FE.set(t,ME._fromUser(t)),FE.get(t)}(e)}static getOrCreate(e){return JT.USER_MAP.has(e)||JT.USER_MAP.set(e,new JT(e)),JT.USER_MAP.get(e)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(e){return this._delegate.getIdTokenResult(e)}getIdToken(e){return this._delegate.getIdToken(e)}linkAndRetrieveDataWithCredential(e){return this.linkWithCredential(e)}async linkWithCredential(e){return QT(this.auth,dE(this._delegate,e))}async linkWithPhoneNumber(e,t){return YT(this.auth,async function(e,t,n){const r=rr(e);await cE(!1,r,"phone");const i=await gI(r.auth,t,rr(n));return new mI(i,(e=>dE(r,e)))}(this._delegate,e,t))}async linkWithPopup(e){return QT(this.auth,async function(e,t,n){const r=rr(e);w_(r.auth,t,GS);const i=vI(r.auth,n);return new TI(r.auth,"linkViaPopup",t,i,r).executeNotNull()}(this._delegate,e,KT))}async linkWithRedirect(e){return await zT(bS(this.auth)),LI(this._delegate,e,KT)}reauthenticateAndRetrieveDataWithCredential(e){return this.reauthenticateWithCredential(e)}async reauthenticateWithCredential(e){return QT(this.auth,fE(this._delegate,e))}reauthenticateWithPhoneNumber(e,t){return YT(this.auth,async function(e,t,n){const r=rr(e),i=await gI(r.auth,t,rr(n));return new mI(i,(e=>fE(r,e)))}(this._delegate,e,t))}reauthenticateWithPopup(e){return QT(this.auth,async function(e,t,n){const r=rr(e);w_(r.auth,t,GS);const i=vI(r.auth,n);return new TI(r.auth,"reauthViaPopup",t,i,r).executeNotNull()}(this._delegate,e,KT))}async reauthenticateWithRedirect(e){return await zT(bS(this.auth)),DI(this._delegate,e,KT)}sendEmailVerification(e){return EE(this._delegate,e)}async unlink(e){return await oE(this._delegate,e),this}updateEmail(e){return function(e,t){return kE(rr(e),t,null)}(this._delegate,e)}updatePassword(e){return function(e,t){return kE(rr(e),null,t)}(this._delegate,e)}updatePhoneNumber(e){return async function(e,t){await aE(rr(e),t)}(this._delegate,e)}updateProfile(e){return TE(this._delegate,e)}verifyBeforeUpdateEmail(e,t){return IE(this._delegate,e,t)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}JT.USER_MAP=new WeakMap;const XT=__;class ZT{constructor(e,t){if(this.app=e,t.isInitialized())return this._delegate=t.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:n}=e.options;XT(n,"invalid-api-key",{appName:e.name}),XT(n,"invalid-api-key",{appName:e.name});const r="undefined"!==typeof window?KT:void 0;this._delegate=t.initialize({options:{persistence:tk(n,e.name),popupRedirectResolver:r}}),this._delegate._updateErrorMap(h_),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?JT.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(e){this._delegate.languageCode=e}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(e){this._delegate.tenantId=e}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(e,t){xS(this._delegate,e,t)}applyActionCode(e){return bE(this._delegate,e)}checkActionCode(e){return _E(this._delegate,e)}confirmPasswordReset(e,t){return async function(e,t,n){await OS(rr(e),{oobCode:t,newPassword:n}).catch((async t=>{throw t.code==="auth/".concat("password-does-not-meet-requirements")&&wE(e),t}))}(this._delegate,e,t)}async createUserWithEmailAndPassword(e,t){return QT(this._delegate,async function(e,t,n){const r=bS(e),i=CS(r,{returnSecureToken:!0,email:t,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",eE),s=await i.catch((t=>{throw t.code==="auth/".concat("password-does-not-meet-requirements")&&wE(e),t})),o=await tE._fromIdTokenResponse(r,"signIn",s);return await r._updateCurrentUser(o.user),o}(this._delegate,e,t))}fetchProvidersForEmail(e){return this.fetchSignInMethodsForEmail(e)}fetchSignInMethodsForEmail(e){return SE(this._delegate,e)}isSignInWithEmailLink(e){return function(e,t){const n=qS.parseLink(t);return"EMAIL_SIGNIN"===(null===n||void 0===n?void 0:n.operation)}(this._delegate,e)}async getRedirectResult(){XT(MT(),this._delegate,"operation-not-supported-in-this-environment");const e=await async function(e,t){return await bS(e)._initializationPromise,MI(e,t,!1)}(this._delegate,KT);return e?QT(this._delegate,Promise.resolve(e)):{credential:null,user:null}}addFrameworkForLogging(e){!function(e,t){bS(e)._logFramework(t)}(this._delegate,e)}onAuthStateChanged(e,t,n){const{next:r,error:i,complete:s}=ek(e,t,n);return this._delegate.onAuthStateChanged(r,i,s)}onIdTokenChanged(e,t,n){const{next:r,error:i,complete:s}=ek(e,t,n);return this._delegate.onIdTokenChanged(r,i,s)}sendSignInLinkToEmail(e,t){return async function(e,t,n){const r=bS(e),i={requestType:"EMAIL_SIGNIN",email:t,clientType:"CLIENT_TYPE_WEB"};!function(e,t){__(t.handleCodeInApp,r,"argument-error"),t&&vE(r,e,t)}(i,n),await CS(r,i,"getOobCode",FS)}(this._delegate,e,t)}sendPasswordResetEmail(e,t){return async function(e,t,n){const r=bS(e),i={requestType:"PASSWORD_RESET",email:t,clientType:"CLIENT_TYPE_WEB"};n&&vE(r,i,n),await CS(r,i,"getOobCode",MS)}(this._delegate,e,t||void 0)}async setPersistence(e){let t;switch(function(e,t){VT(Object.values(UT).includes(t),e,"invalid-persistence-type"),zn()?VT(t!==UT.SESSION,e,"unsupported-persistence-type"):Vn()?VT(t===UT.NONE,e,"unsupported-persistence-type"):LT()?VT(t===UT.NONE||t===UT.LOCAL&&Kn(),e,"unsupported-persistence-type"):VT(t===UT.NONE||DT(),e,"unsupported-persistence-type")}(this._delegate,e),e){case UT.SESSION:t=qE;break;case UT.LOCAL:t=await tS(iI)._isAvailable()?iI:zE;break;case UT.NONE:t=rS;break;default:return g_("argument-error",{appName:this._delegate.name})}return this._delegate.setPersistence(t)}signInAndRetrieveDataWithCredential(e){return this.signInWithCredential(e)}signInAnonymously(){return QT(this._delegate,async function(e){var t;const n=bS(e);if(await n._initializationPromise,null===(t=n.currentUser)||void 0===t?void 0:t.isAnonymous)return new tE({user:n.currentUser,providerId:null,operationType:"signIn"});const r=await eE(n,{returnSecureToken:!0}),i=await tE._fromIdTokenResponse(n,"signIn",r,!0);return await n._updateCurrentUser(i.user),i}(this._delegate))}signInWithCredential(e){return QT(this._delegate,hE(this._delegate,e))}signInWithCustomToken(e){return QT(this._delegate,pE(this._delegate,e))}signInWithEmailAndPassword(e,t){return QT(this._delegate,function(e,t,n){return hE(rr(e),KS.credential(t,n)).catch((async t=>{throw t.code==="auth/".concat("password-does-not-meet-requirements")&&wE(e),t}))}(this._delegate,e,t))}signInWithEmailLink(e,t){return QT(this._delegate,async function(e,t,n){const r=rr(e),i=KS.credentialWithLink(t,n||I_());return __(i._tenantId===(r.tenantId||null),r,"tenant-id-mismatch"),hE(r,i)}(this._delegate,e,t))}signInWithPhoneNumber(e,t){return YT(this._delegate,async function(e,t,n){const r=bS(e),i=await gI(r,t,rr(n));return new mI(i,(e=>hE(r,e)))}(this._delegate,e,t))}async signInWithPopup(e){return XT(MT(),this._delegate,"operation-not-supported-in-this-environment"),QT(this._delegate,async function(e,t,n){const r=bS(e);w_(e,t,GS);const i=vI(r,n);return new TI(r,"signInViaPopup",t,i).executeNotNull()}(this._delegate,e,KT))}async signInWithRedirect(e){return XT(MT(),this._delegate,"operation-not-supported-in-this-environment"),await zT(this._delegate),RI(this._delegate,e,KT)}updateCurrentUser(e){return this._delegate.updateCurrentUser(e)}verifyPasswordResetCode(e){return async function(e,t){const{data:n}=await _E(rr(e),t);return n.email}(this._delegate,e)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}function ek(e,t,n){let r=e;"function"!==typeof e&&({next:r,error:t,complete:n}=e);const i=r;return{next:e=>i(e&&JT.getOrCreate(e)),error:t,complete:n}}function tk(e,t){const n=function(e,t){const n=BT();if(!n)return[];const r=iS(jT,e,t);switch(n.getItem(r)){case UT.NONE:return[rS];case UT.LOCAL:return[iI,qE];case UT.SESSION:return[qE];default:return[]}}(e,t);if("undefined"===typeof self||n.includes(iI)||n.push(iI),"undefined"!==typeof window)for(const r of[zE,qE])n.includes(r)||n.push(r);return n.includes(rS)||n.push(rS),n}ZT.Persistence=UT;class nk{constructor(){this.providerId="phone",this._delegate=new yI(GT(vi.auth()))}static credential(e,t){return yI.credential(e,t)}verifyPhoneNumber(e,t){return this._delegate.verifyPhoneNumber(e,t)}unwrap(){return this._delegate}}nk.PHONE_SIGN_IN_METHOD=yI.PHONE_SIGN_IN_METHOD,nk.PROVIDER_ID=yI.PROVIDER_ID;const rk=__;class ik{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:vi.app();var r;rk(null===(r=n.options)||void 0===r?void 0:r.apiKey,"invalid-api-key",{appName:n.name}),this._delegate=new pI(n.auth(),e,t),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function(e){e.INTERNAL.registerComponent(new ir("auth-compat",(e=>{const t=e.getProvider("app-compat").getImmediate(),n=e.getProvider("auth");return new ZT(t,n)}),"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:i_,PASSWORD_RESET:s_,RECOVER_EMAIL:o_,REVERT_SECOND_FACTOR_ADDITION:a_,VERIFY_AND_CHANGE_EMAIL:c_,VERIFY_EMAIL:l_}},EmailAuthProvider:KS,FacebookAuthProvider:QS,GithubAuthProvider:$S,GoogleAuthProvider:YS,OAuthProvider:HS,SAMLAuthProvider:XS,PhoneAuthProvider:nk,PhoneMultiFactorGenerator:fT,RecaptchaVerifier:ik,TwitterAuthProvider:ZS,Auth:ZT,AuthCredential:PS,Error:Gn}).setInstantiationMode("LAZY").setMultipleInstances(!1)),e.registerVersion("@firebase/auth-compat","0.5.4")}(vi);vi.initializeApp({apiKey:"AIzaSyDn80PLDWxwTJbn7ix2I-BAddc02qeDtJ8",authDomain:"netflixweb-3dcfd.firebaseapp.com",projectId:"netflixweb-3dcfd",storageBucket:"netflixweb-3dcfd.appspot.com",messagingSenderId:"466763268824",appId:"1:466763268824:web:70f9781309bcc01cdb4dad",measurementId:"G-C288MDNXMZ"}).firestore();const sk=vi.auth();const ok=function(){const e=(0,r.useRef)(null),t=(0,r.useRef)(null);return(0,Ne.jsx)("div",{className:"signupScreen",children:(0,Ne.jsxs)("form",{children:[(0,Ne.jsx)("h1",{children:"Hey, Netflix Lover \ud83e\udd70"}),(0,Ne.jsx)("input",{ref:e,placeholder:"Email",type:"email"}),(0,Ne.jsx)("input",{ref:t,placeholder:"Password",type:"password"}),(0,Ne.jsx)("button",{type:"submit",onClick:n=>{n.preventDefault(),sk.signInWithEmailAndPassword(e.current.value,t.current.value).then((e=>{console.log(e)})).catch((e=>{alert(e.message)}))},children:"Sign In"}),(0,Ne.jsxs)("h4",{children:[(0,Ne.jsx)("span",{className:"signupScreen__gray",children:" New to Netflix?"}),(0,Ne.jsx)("span",{className:"signupScreen__link",onClick:n=>{n.preventDefault(),sk.createUserWithEmailAndPassword(e.current.value,t.current.value).then((e=>{console.log(e)})).catch((e=>{alert(e.message)}))},children:"Register now."})]})]})})},ak=n.p+"static/media/netflix.d9ecc53940d76bf25c05.mp4";const ck=function(){const[e,t]=(0,r.useState)(!1);return(0,Ne.jsxs)("div",{className:"loginScreen",children:[(0,Ne.jsxs)("div",{className:"loginScreen__background",children:[(0,Ne.jsx)("img",{className:"loginScreen__logo",src:"https://pngimg.com/d/netflix_PNG10.png",alt:""}),(0,Ne.jsx)("video",{controls:!0,autoPlay:!0,loop:!0,muted:!0,src:ak,type:"netflix.mp4"}),(0,Ne.jsx)("button",{onClick:()=>t(!0),className:"loginScreen__button",children:"Sign In"})]}),(0,Ne.jsx)("div",{className:"loginScreen__body",children:e?(0,Ne.jsx)(ok,{}):(0,Ne.jsxs)(Ne.Fragment,{children:[(0,Ne.jsx)("h1",{children:"Unlimited Movies, TV Shows and more."}),(0,Ne.jsx)("h2",{children:"Watch anywehere, cancel anytime"}),(0,Ne.jsx)("h3",{children:"Ready to watch? Enter your email to create or restart your membership."}),(0,Ne.jsx)("div",{className:"loginScreen__input",children:(0,Ne.jsxs)("form",{children:[(0,Ne.jsx)("input",{type:"email",placeholder:"Email Adress"}),(0,Ne.jsx)("button",{onClick:()=>t(!0),className:"loginScreen__getStarted",children:"Get Started"})]})})]})})]})};var lk=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).history=Y(t.props),t}return N(t,e),t.prototype.render=function(){return r.createElement(ge,{history:this.history,children:this.props.children})},t}(r.Component);r.Component;var uk=function(e,t){return"function"===typeof e?e(t):e},hk=function(e,t){return"string"===typeof e?B(e,null,null,t):e},dk=function(e){return e},fk=r.forwardRef;"undefined"===typeof fk&&(fk=dk);var pk=fk((function(e,t){var n=e.innerRef,i=e.navigate,s=e.onClick,o=he(e,["innerRef","navigate","onClick"]),a=o.target,c=A({},o,{onClick:function(e){try{s&&s(e)}catch(t){throw e.preventDefault(),t}e.defaultPrevented||0!==e.button||a&&"_self"!==a||function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)||(e.preventDefault(),i())}});return c.ref=dk!==fk&&t||n,r.createElement("a",c)}));var mk=fk((function(e,t){var n=e.component,i=void 0===n?pk:n,s=e.replace,o=e.to,a=e.innerRef,c=he(e,["component","replace","to","innerRef"]);return r.createElement(me.Consumer,null,(function(e){e||M(!1);var n=e.history,l=hk(uk(o,e.location),e.location),u=l?n.createHref(l):"",h=A({},c,{href:u,navigate:function(){var t=uk(o,e.location);(s?n.replace:n.push)(t)}});return dk!==fk?h.ref=t||a:h.innerRef=a,r.createElement(i,h)}))})),gk=function(e){return e},yk=r.forwardRef;"undefined"===typeof yk&&(yk=gk);yk((function(e,t){var n=e["aria-current"],i=void 0===n?"page":n,s=e.activeClassName,o=void 0===s?"active":s,a=e.activeStyle,c=e.className,l=e.exact,u=e.isActive,h=e.location,d=e.sensitive,f=e.strict,p=e.style,m=e.to,g=e.innerRef,y=he(e,["aria-current","activeClassName","activeStyle","className","exact","isActive","location","sensitive","strict","style","to","innerRef"]);return r.createElement(me.Consumer,null,(function(e){e||M(!1);var n=h||e.location,s=hk(uk(m,n),n),v=s.pathname,w=v&&v.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1"),b=w?be(n.pathname,{path:w,exact:l,sensitive:d,strict:f}):null,_=!!(u?u(b,n):b),S=_?function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter((function(e){return e})).join(" ")}(c,o):c,E=_?A({},p,{},a):p,I=A({"aria-current":_&&i||null,className:S,style:E,to:s},y);return gk!==yk?I.ref=t||g:I.innerRef=g,r.createElement(mk,I)}))}));var vk=Symbol.for("immer-nothing"),wk=Symbol.for("immer-draftable"),bk=Symbol.for("immer-state");function _k(e){throw new Error("[Immer] minified error nr: ".concat(e,". Full error at: https://bit.ly/3cXEKWf"))}var Sk=Object.getPrototypeOf;function Ek(e){return!!e&&!!e[bk]}function Ik(e){var t;return!!e&&(kk(e)||Array.isArray(e)||!!e[wk]||!(null===(t=e.constructor)||void 0===t||!t[wk])||Pk(e)||Ok(e))}var Tk=Object.prototype.constructor.toString();function kk(e){if(!e||"object"!==typeof e)return!1;const t=Sk(e);if(null===t)return!0;const n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return n===Object||"function"==typeof n&&Function.toString.call(n)===Tk}function Ck(e,t){0===xk(e)?Reflect.ownKeys(e).forEach((n=>{t(n,e[n],e)})):e.forEach(((n,r)=>t(r,n,e)))}function xk(e){const t=e[bk];return t?t.type_:Array.isArray(e)?1:Pk(e)?2:Ok(e)?3:0}function Nk(e,t){return 2===xk(e)?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function Ak(e,t,n){const r=xk(e);2===r?e.set(t,n):3===r?e.add(n):e[t]=n}function Pk(e){return e instanceof Map}function Ok(e){return e instanceof Set}function Rk(e){return e.copy_||e.base_}function Dk(e,t){if(Pk(e))return new Map(e);if(Ok(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);if(!t&&kk(e)){if(!Sk(e)){const t=Object.create(null);return Object.assign(t,e)}return{...e}}const n=Object.getOwnPropertyDescriptors(e);delete n[bk];let r=Reflect.ownKeys(n);for(let i=0;i<r.length;i++){const t=r[i],s=n[t];!1===s.writable&&(s.writable=!0,s.configurable=!0),(s.get||s.set)&&(n[t]={configurable:!0,writable:!0,enumerable:s.enumerable,value:e[t]})}return Object.create(Sk(e),n)}function Lk(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return Fk(e)||Ek(e)||!Ik(e)||(xk(e)>1&&(e.set=e.add=e.clear=e.delete=Mk),Object.freeze(e),t&&Object.entries(e).forEach((e=>{let[t,n]=e;return Lk(n,!0)}))),e}function Mk(){_k(2)}function Fk(e){return Object.isFrozen(e)}var Uk,Vk={};function jk(e){const t=Vk[e];return t||_k(0),t}function zk(){return Uk}function Bk(e,t){t&&(jk("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function qk(e){Kk(e),e.drafts_.forEach(Wk),e.drafts_=null}function Kk(e){e===Uk&&(Uk=e.parent_)}function Gk(e){return Uk={drafts_:[],parent_:Uk,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function Wk(e){const t=e[bk];0===t.type_||1===t.type_?t.revoke_():t.revoked_=!0}function Hk(e,t){t.unfinalizedDrafts_=t.drafts_.length;const n=t.drafts_[0];return void 0!==e&&e!==n?(n[bk].modified_&&(qk(t),_k(4)),Ik(e)&&(e=Qk(t,e),t.parent_||$k(t,e)),t.patches_&&jk("Patches").generateReplacementPatches_(n[bk].base_,e,t.patches_,t.inversePatches_)):e=Qk(t,n,[]),qk(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==vk?e:void 0}function Qk(e,t,n){if(Fk(t))return t;const r=t[bk];if(!r)return Ck(t,((i,s)=>Yk(e,r,t,i,s,n))),t;if(r.scope_!==e)return t;if(!r.modified_)return $k(e,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const t=r.copy_;let i=t,s=!1;3===r.type_&&(i=new Set(t),t.clear(),s=!0),Ck(i,((i,o)=>Yk(e,r,t,i,o,n,s))),$k(e,t,!1),n&&e.patches_&&jk("Patches").generatePatches_(r,n,e.patches_,e.inversePatches_)}return r.copy_}function Yk(e,t,n,r,i,s,o){if(Ek(i)){const o=Qk(e,i,s&&t&&3!==t.type_&&!Nk(t.assigned_,r)?s.concat(r):void 0);if(Ak(n,r,o),!Ek(o))return;e.canAutoFreeze_=!1}else o&&n.add(i);if(Ik(i)&&!Fk(i)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;Qk(e,i),t&&t.scope_.parent_||"symbol"===typeof r||!Object.prototype.propertyIsEnumerable.call(n,r)||$k(e,i)}}function $k(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&Lk(t,n)}var Jk={get(e,t){if(t===bk)return e;const n=Rk(e);if(!Nk(n,t))return function(e,t,n){var r;const i=eC(t,n);return i?"value"in i?i.value:null===(r=i.get)||void 0===r?void 0:r.call(e.draft_):void 0}(e,n,t);const r=n[t];return e.finalized_||!Ik(r)?r:r===Zk(e.base_,t)?(nC(e),e.copy_[t]=rC(r,e)):r},has:(e,t)=>t in Rk(e),ownKeys:e=>Reflect.ownKeys(Rk(e)),set(e,t,n){const r=eC(Rk(e),t);if(null!==r&&void 0!==r&&r.set)return r.set.call(e.draft_,n),!0;if(!e.modified_){const r=Zk(Rk(e),t),i=null===r||void 0===r?void 0:r[bk];if(i&&i.base_===n)return e.copy_[t]=n,e.assigned_[t]=!1,!0;if(function(e,t){return e===t?0!==e||1/e===1/t:e!==e&&t!==t}(n,r)&&(void 0!==n||Nk(e.base_,t)))return!0;nC(e),tC(e)}return e.copy_[t]===n&&(void 0!==n||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=n,e.assigned_[t]=!0),!0},deleteProperty:(e,t)=>(void 0!==Zk(e.base_,t)||t in e.base_?(e.assigned_[t]=!1,nC(e),tC(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0),getOwnPropertyDescriptor(e,t){const n=Rk(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r?{writable:!0,configurable:1!==e.type_||"length"!==t,enumerable:r.enumerable,value:n[t]}:r},defineProperty(){_k(11)},getPrototypeOf:e=>Sk(e.base_),setPrototypeOf(){_k(12)}},Xk={};function Zk(e,t){const n=e[bk];return(n?Rk(n):e)[t]}function eC(e,t){if(!(t in e))return;let n=Sk(e);for(;n;){const e=Object.getOwnPropertyDescriptor(n,t);if(e)return e;n=Sk(n)}}function tC(e){e.modified_||(e.modified_=!0,e.parent_&&tC(e.parent_))}function nC(e){e.copy_||(e.copy_=Dk(e.base_,e.scope_.immer_.useStrictShallowCopy_))}Ck(Jk,((e,t)=>{Xk[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}})),Xk.deleteProperty=function(e,t){return Xk.set.call(this,e,t,void 0)},Xk.set=function(e,t,n){return Jk.set.call(this,e[0],t,n,e[0])};function rC(e,t){const n=Pk(e)?jk("MapSet").proxyMap_(e,t):Ok(e)?jk("MapSet").proxySet_(e,t):function(e,t){const n=Array.isArray(e),r={type_:n?1:0,scope_:t?t.scope_:zk(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=r,s=Jk;n&&(i=[r],s=Xk);const{revoke:o,proxy:a}=Proxy.revocable(i,s);return r.draft_=a,r.revoke_=o,a}(e,t);return(t?t.scope_:zk()).drafts_.push(n),n}function iC(e){return Ek(e)||_k(10),sC(e)}function sC(e){if(!Ik(e)||Fk(e))return e;const t=e[bk];let n;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,n=Dk(e,t.scope_.immer_.useStrictShallowCopy_)}else n=Dk(e,!0);return Ck(n,((e,t)=>{Ak(n,e,sC(t))})),t&&(t.finalized_=!1),n}var oC=new class{constructor(e){var t=this;this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(e,t,n)=>{if("function"===typeof e&&"function"!==typeof t){const n=t;t=e;const r=this;return function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n;for(var i=arguments.length,s=new Array(i>1?i-1:0),o=1;o<i;o++)s[o-1]=arguments[o];return r.produce(e,(e=>t.call(this,e,...s)))}}let r;if("function"!==typeof t&&_k(6),void 0!==n&&"function"!==typeof n&&_k(7),Ik(e)){const i=Gk(this),s=rC(e,void 0);let o=!0;try{r=t(s),o=!1}finally{o?qk(i):Kk(i)}return Bk(i,n),Hk(r,i)}if(!e||"object"!==typeof e){if(r=t(e),void 0===r&&(r=e),r===vk&&(r=void 0),this.autoFreeze_&&Lk(r,!0),n){const t=[],i=[];jk("Patches").generateReplacementPatches_(e,r,t,i),n(t,i)}return r}_k(1)},this.produceWithPatches=(e,n)=>{if("function"===typeof e)return function(n){for(var r=arguments.length,i=new Array(r>1?r-1:0),s=1;s<r;s++)i[s-1]=arguments[s];return t.produceWithPatches(n,(t=>e(t,...i)))};let r,i;const s=this.produce(e,n,((e,t)=>{r=e,i=t}));return[s,r,i]},"boolean"===typeof(null===e||void 0===e?void 0:e.autoFreeze)&&this.setAutoFreeze(e.autoFreeze),"boolean"===typeof(null===e||void 0===e?void 0:e.useStrictShallowCopy)&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){Ik(e)||_k(8),Ek(e)&&(e=iC(e));const t=Gk(this),n=rC(e,void 0);return n[bk].isManual_=!0,Kk(t),n}finishDraft(e,t){const n=e&&e[bk];n&&n.isManual_||_k(9);const{scope_:r}=n;return Bk(r,t),Hk(void 0,r)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let n;for(n=t.length-1;n>=0;n--){const r=t[n];if(0===r.path.length&&"replace"===r.op){e=r.value;break}}n>-1&&(t=t.slice(n+1));const r=jk("Patches").applyPatches_;return Ek(e)?r(e,t):this.produce(e,(e=>r(e,t)))}},aC=oC.produce;oC.produceWithPatches.bind(oC),oC.setAutoFreeze.bind(oC),oC.setUseStrictShallowCopy.bind(oC),oC.applyPatches.bind(oC),oC.createDraft.bind(oC),oC.finishDraft.bind(oC);function cC(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"expected a function, instead received ".concat(typeof e);if("function"!==typeof e)throw new TypeError(t)}var lC=e=>Array.isArray(e)?e:[e];function uC(e){const t=Array.isArray(e[0])?e[0]:e;return function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"expected all items to be functions, instead received the following types: ";if(!e.every((e=>"function"===typeof e))){const n=e.map((e=>"function"===typeof e?"function ".concat(e.name||"unnamed","()"):typeof e)).join(", ");throw new TypeError("".concat(t,"[").concat(n,"]"))}}(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}Symbol(),Object.getPrototypeOf({});var hC="undefined"!==typeof WeakRef?WeakRef:class{constructor(e){this.value=e}deref(){return this.value}},dC=0,fC=1;function pC(){return{s:dC,v:void 0,o:null,p:null}}function mC(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=pC();const{resultEqualityCheck:r}=t;let i,s=0;function o(){let t=n;const{length:o}=arguments;for(let e=0,n=o;e<n;e++){const n=arguments[e];if("function"===typeof n||"object"===typeof n&&null!==n){let e=t.o;null===e&&(t.o=e=new WeakMap);const r=e.get(n);void 0===r?(t=pC(),e.set(n,t)):t=r}else{let e=t.p;null===e&&(t.p=e=new Map);const r=e.get(n);void 0===r?(t=pC(),e.set(n,t)):t=r}}const a=t;let c;if(t.s===fC?c=t.v:(c=e.apply(null,arguments),s++),a.s=fC,r){var l,u,h;const e=null!==(l=null===(u=i)||void 0===u||null===(h=u.deref)||void 0===h?void 0:h.call(u))&&void 0!==l?l:i;null!=e&&r(e,c)&&(c=e,0!==s&&s--);i="object"===typeof c&&null!==c||"function"===typeof c?new hC(c):c}return a.v=c,c}return o.clearCache=()=>{n=pC(),o.resetResultsCount()},o.resultsCount=()=>s,o.resetResultsCount=()=>{s=0},o}function gC(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i="function"===typeof e?{memoize:e,memoizeOptions:n}:e,s=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];let r,s=0,o=0,a={},c=t.pop();"object"===typeof c&&(a=c,c=t.pop()),cC(c,"createSelector expects an output function after the inputs, but received: [".concat(typeof c,"]"));const l={...i,...a},{memoize:u,memoizeOptions:h=[],argsMemoize:d=mC,argsMemoizeOptions:f=[],devModeChecks:p={}}=l,m=lC(h),g=lC(f),y=uC(t),v=u((function(){return s++,c.apply(null,arguments)}),...m);const w=d((function(){o++;const e=function(e,t){const n=[],{length:r}=e;for(let i=0;i<r;i++)n.push(e[i].apply(null,t));return n}(y,arguments);return r=v.apply(null,e),r}),...g);return Object.assign(w,{resultFunc:c,memoizedResultFunc:v,dependencies:y,dependencyRecomputations:()=>o,resetDependencyRecomputations:()=>{o=0},lastResult:()=>r,recomputations:()=>s,resetRecomputations:()=>{s=0},memoize:u,argsMemoize:d})};return Object.assign(s,{withTypes:()=>s}),s}var yC=gC(mC),vC=Object.assign((function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:yC;!function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"expected an object, instead received ".concat(typeof e);if("object"!==typeof e)throw new TypeError(t)}(e,"createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ".concat(typeof e));const n=Object.keys(e),r=n.map((t=>e[t])),i=t(r,(function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.reduce(((e,t,r)=>(e[n[r]]=t,e)),{})}));return i}),{withTypes:()=>vC});function wC(e){return"Minified Redux error #".concat(e,"; visit https://redux.js.org/Errors?code=").concat(e," for the full message or use the non-minified dev environment for full errors. ")}var bC=(()=>"function"===typeof Symbol&&Symbol.observable||"@@observable")(),_C=()=>Math.random().toString(36).substring(7).split("").join("."),SC={INIT:"@@redux/INIT".concat(_C()),REPLACE:"@@redux/REPLACE".concat(_C()),PROBE_UNKNOWN_ACTION:()=>"@@redux/PROBE_UNKNOWN_ACTION".concat(_C())};function EC(e){if("object"!==typeof e||null===e)return!1;let t=e;for(;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||null===Object.getPrototypeOf(e)}function IC(e,t,n){if("function"!==typeof e)throw new Error(wC(2));if("function"===typeof t&&"function"===typeof n||"function"===typeof n&&"function"===typeof arguments[3])throw new Error(wC(0));if("function"===typeof t&&"undefined"===typeof n&&(n=t,t=void 0),"undefined"!==typeof n){if("function"!==typeof n)throw new Error(wC(1));return n(IC)(e,t)}let r=e,i=t,s=new Map,o=s,a=0,c=!1;function l(){o===s&&(o=new Map,s.forEach(((e,t)=>{o.set(t,e)})))}function u(){if(c)throw new Error(wC(3));return i}function h(e){if("function"!==typeof e)throw new Error(wC(4));if(c)throw new Error(wC(5));let t=!0;l();const n=a++;return o.set(n,e),function(){if(t){if(c)throw new Error(wC(6));t=!1,l(),o.delete(n),s=null}}}function d(e){if(!EC(e))throw new Error(wC(7));if("undefined"===typeof e.type)throw new Error(wC(8));if("string"!==typeof e.type)throw new Error(wC(17));if(c)throw new Error(wC(9));try{c=!0,i=r(i,e)}finally{c=!1}return(s=o).forEach((e=>{e()})),e}d({type:SC.INIT});return{dispatch:d,subscribe:h,getState:u,replaceReducer:function(e){if("function"!==typeof e)throw new Error(wC(10));r=e,d({type:SC.REPLACE})},[bC]:function(){const e=h;return{subscribe(t){if("object"!==typeof t||null===t)throw new Error(wC(11));function n(){const e=t;e.next&&e.next(u())}n();return{unsubscribe:e(n)}},[bC](){return this}}}}}function TC(e){const t=Object.keys(e),n={};for(let o=0;o<t.length;o++){const r=t[o];0,"function"===typeof e[r]&&(n[r]=e[r])}const r=Object.keys(n);let i;try{!function(e){Object.keys(e).forEach((t=>{const n=e[t];if("undefined"===typeof n(void 0,{type:SC.INIT}))throw new Error(wC(12));if("undefined"===typeof n(void 0,{type:SC.PROBE_UNKNOWN_ACTION()}))throw new Error(wC(13))}))}(n)}catch(s){i=s}return function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;if(i)throw i;let s=!1;const o={};for(let i=0;i<r.length;i++){const a=r[i],c=n[a],l=e[a],u=c(l,t);if("undefined"===typeof u){t&&t.type;throw new Error(wC(14))}o[a]=u,s=s||u!==l}return s=s||r.length!==Object.keys(e).length,s?o:e}}function kC(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return 0===t.length?e=>e:1===t.length?t[0]:t.reduce(((e,t)=>function(){return e(t(...arguments))}))}function CC(e){return t=>{let{dispatch:n,getState:r}=t;return t=>i=>"function"===typeof i?i(n,r,e):t(i)}}var xC=CC(),NC=CC,AC=(function(){const e=gC(...arguments),t=Object.assign((function(){const t=e(...arguments),n=function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return t(Ek(e)?iC(e):e,...r)};return Object.assign(n,t),n}),{withTypes:()=>t})}(mC),"undefined"!==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(0!==arguments.length)return"object"===typeof arguments[0]?kC:kC.apply(null,arguments)});"undefined"!==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__;function PC(e,t){function n(){if(t){let n=t(...arguments);if(!n)throw new Error(rx(0));return{type:e,payload:n.payload,..."meta"in n&&{meta:n.meta},..."error"in n&&{error:n.error}}}return{type:e,payload:arguments.length<=0?void 0:arguments[0]}}return n.toString=()=>"".concat(e),n.type=e,n.match=t=>function(e){return EC(e)&&"type"in e&&"string"===typeof e.type}(t)&&t.type===e,n}var OC=class e extends Array{constructor(){super(...arguments),Object.setPrototypeOf(this,e.prototype)}static get[Symbol.species](){return e}concat(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return super.concat.apply(this,t)}prepend(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return 1===n.length&&Array.isArray(n[0])?new e(...n[0].concat(this)):new e(...n.concat(this))}};function RC(e){return Ik(e)?aC(e,(()=>{})):e}function DC(e,t,n){if(e.has(t)){let r=e.get(t);return n.update&&(r=n.update(r,t,e),e.set(t,r)),r}if(!n.insert)throw new Error(rx(10));const r=n.insert(t,e);return e.set(t,r),r}var LC="RTK_autoBatch",MC=e=>t=>{setTimeout(t,e)},FC="undefined"!==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame:MC(10),UC=e=>function(t){const{autoBatch:n=!0}=null!==t&&void 0!==t?t:{};let r=new OC(e);return n&&r.push(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{type:"raf"};return t=>function(){const n=t(...arguments);let r=!0,i=!1,s=!1;const o=new Set,a="tick"===e.type?queueMicrotask:"raf"===e.type?FC:"callback"===e.type?e.queueNotification:MC(e.timeout),c=()=>{s=!1,i&&(i=!1,o.forEach((e=>e())))};return Object.assign({},n,{subscribe(e){const t=n.subscribe((()=>r&&e()));return o.add(e),()=>{t(),o.delete(e)}},dispatch(e){try{var t;return r=!(null!==e&&void 0!==e&&null!==(t=e.meta)&&void 0!==t&&t[LC]),i=!r,i&&(s||(s=!0,a(c))),n.dispatch(e)}finally{r=!0}}})}}("object"===typeof n?n:void 0)),r};function VC(e){const t={},n=[];let r;const i={addCase(e,n){const r="string"===typeof e?e:e.type;if(!r)throw new Error(rx(28));if(r in t)throw new Error(rx(29));return t[r]=n,i},addMatcher:(e,t)=>(n.push({matcher:e,reducer:t}),i),addDefaultCase:e=>(r=e,i)};return e(i),[t,n,r]}var jC=function(){let e="",t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:21;for(;t--;)e+="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW"[64*Math.random()|0];return e};var zC=Symbol.for("rtk-slice-createasyncthunk");function BC(e,t){return"".concat(e,"/").concat(t)}function qC(){var e;let{creators:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n=null===t||void 0===t||null===(e=t.asyncThunk)||void 0===e?void 0:e[zC];return function(e){const{name:t,reducerPath:r=t}=e;if(!t)throw new Error(rx(11));const i=("function"===typeof e.reducers?e.reducers(function(){function e(e,t){return{_reducerDefinitionType:"asyncThunk",payloadCreator:e,...t}}return e.withTypes=()=>e,{reducer:e=>Object.assign({[e.name](){return e(...arguments)}}[e.name],{_reducerDefinitionType:"reducer"}),preparedReducer:(e,t)=>({_reducerDefinitionType:"reducerWithPrepare",prepare:e,reducer:t}),asyncThunk:e}}()):e.reducers)||{},s=Object.keys(i),o={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},a={addCase(e,t){const n="string"===typeof e?e:e.type;if(!n)throw new Error(rx(12));if(n in o.sliceCaseReducersByType)throw new Error(rx(13));return o.sliceCaseReducersByType[n]=t,a},addMatcher:(e,t)=>(o.sliceMatchers.push({matcher:e,reducer:t}),a),exposeAction:(e,t)=>(o.actionCreators[e]=t,a),exposeCaseReducer:(e,t)=>(o.sliceCaseReducersByName[e]=t,a)};function c(){const[t={},n=[],r]="function"===typeof e.extraReducers?VC(e.extraReducers):[e.extraReducers],i={...t,...o.sliceCaseReducersByType};return function(e,t){let n,[r,i,s]=VC(t);if(function(e){return"function"===typeof e}(e))n=()=>RC(e());else{const t=RC(e);n=()=>t}function o(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n(),t=arguments.length>1?arguments[1]:void 0,o=[r[t.type],...i.filter((e=>{let{matcher:n}=e;return n(t)})).map((e=>{let{reducer:t}=e;return t}))];return 0===o.filter((e=>!!e)).length&&(o=[s]),o.reduce(((e,n)=>{if(n){if(Ek(e)){const r=n(e,t);return void 0===r?e:r}if(Ik(e))return aC(e,(e=>n(e,t)));{const r=n(e,t);if(void 0===r){if(null===e)return e;throw new Error(rx(9))}return r}}return e}),e)}return o.getInitialState=n,o}(e.initialState,(e=>{for(let t in i)e.addCase(t,i[t]);for(let t of o.sliceMatchers)e.addMatcher(t.matcher,t.reducer);for(let t of n)e.addMatcher(t.matcher,t.reducer);r&&e.addDefaultCase(r)}))}s.forEach((r=>{const s=i[r],o={reducerName:r,type:BC(t,r),createNotation:"function"===typeof e.reducers};!function(e){return"asyncThunk"===e._reducerDefinitionType}(s)?function(e,t,n){let r,i,{type:s,reducerName:o,createNotation:a}=e;if("reducer"in t){if(a&&!function(e){return"reducerWithPrepare"===e._reducerDefinitionType}(t))throw new Error(rx(17));r=t.reducer,i=t.prepare}else r=t;n.addCase(s,r).exposeCaseReducer(o,r).exposeAction(o,i?PC(s,i):PC(s))}(o,s,a):function(e,t,n,r){let{type:i,reducerName:s}=e;if(!r)throw new Error(rx(18));const{payloadCreator:o,fulfilled:a,pending:c,rejected:l,settled:u,options:h}=t,d=r(i,o,h);n.exposeAction(s,d),a&&n.addCase(d.fulfilled,a);c&&n.addCase(d.pending,c);l&&n.addCase(d.rejected,l);u&&n.addMatcher(d.settled,u);n.exposeCaseReducer(s,{fulfilled:a||WC,pending:c||WC,rejected:l||WC,settled:u||WC})}(o,s,a,n)}));const l=e=>e,u=new Map;let h;function d(e,t){return h||(h=c()),h(e,t)}function f(){return h||(h=c()),h.getInitialState()}function p(t){let n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];function r(e){let r=e[t];return"undefined"===typeof r&&n&&(r=f()),r}function i(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l;const r=DC(u,n,{insert:()=>new WeakMap});return DC(r,t,{insert:()=>{const r={};for(const[s,o]of Object.entries(null!==(i=e.selectors)&&void 0!==i?i:{})){var i;r[s]=KC(o,t,f,n)}return r}})}return{reducerPath:t,getSelectors:i,get selectors(){return i(r)},selectSlice:r}}const m={name:t,reducer:d,actions:o.actionCreators,caseReducers:o.sliceCaseReducersByName,getInitialState:f,...p(r),injectInto(e){let{reducerPath:t,...n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const i=null!==t&&void 0!==t?t:r;return e.inject({reducerPath:i,reducer:d},n),{...m,...p(i,!0)}}};return m}}function KC(e,t,n,r){function i(i){let s=t(i);"undefined"===typeof s&&r&&(s=n());for(var o=arguments.length,a=new Array(o>1?o-1:0),c=1;c<o;c++)a[c-1]=arguments[c];return e(s,...a)}return i.unwrapped=e,i}var GC=qC();function WC(){}var HC="listener",QC="completed",YC="cancelled",$C=("task-".concat(YC),"task-".concat(QC),"".concat(HC,"-").concat(YC),"".concat(HC,"-").concat(QC),(e,t)=>{if("function"!==typeof e)throw new Error(rx(32))});var{assign:JC}=Object,XC="listenerMiddleware",ZC=e=>{let{type:t,actionCreator:n,matcher:r,predicate:i,effect:s}=e;if(t)i=PC(t).match;else if(n)t=n.type,i=n.match;else if(r)i=r;else if(!i)throw new Error(rx(21));return $C(s),{predicate:i,type:t,effect:s}},ex=Object.assign((e=>{const{type:t,predicate:n,effect:r}=ZC(e);return{id:jC(),effect:r,type:t,predicate:n,pending:new Set,unsubscribe:()=>{throw new Error(rx(22))}}}),{withTypes:()=>ex}),tx=Object.assign(PC("".concat(XC,"/add")),{withTypes:()=>tx}),nx=(PC("".concat(XC,"/removeAll")),Object.assign(PC("".concat(XC,"/remove")),{withTypes:()=>nx}));Symbol.for("rtk-state-proxy-original");function rx(e){return"Minified Redux Toolkit error #".concat(e,"; visit https://redux-toolkit.js.org/Errors?code=").concat(e," for the full message or use the non-minified dev environment for full errors. ")}const ix=GC({name:"user",initialState:{user:null},reducers:{login:(e,t)=>{e.user=t.payload},logout:e=>{e.user=null}}}),{login:sx,logout:ox}=ix.actions,ax=e=>e.user.user,cx=ix.reducer;const lx=function(){return(0,Ne.jsxs)("div",{className:"plansScreen",children:[(0,Ne.jsxs)("div",{className:"plansScreen__info",children:[(0,Ne.jsx)("h2",{children:"Basic"}),(0,Ne.jsx)("h5",{children:"720pk"}),(0,Ne.jsx)("button",{className:"btn",children:"Current"})]}),(0,Ne.jsxs)("div",{className:"plansScreen__info",children:[(0,Ne.jsx)("h2",{children:"Standart"}),(0,Ne.jsx)("h5",{children:"1080pk"}),(0,Ne.jsx)("button",{children:"Subscribe"})]}),(0,Ne.jsxs)("div",{className:"plansScreen__info",children:[(0,Ne.jsx)("h2",{children:"Premium"}),(0,Ne.jsx)("h5",{children:"4K + HDR"}),(0,Ne.jsx)("button",{children:"Subscribe"})]})]})};const ux=function(){const e=y(ax);return(0,Ne.jsxs)("div",{className:"profileScreen",children:[(0,Ne.jsx)(Ae,{}),(0,Ne.jsxs)("div",{className:"profileScreen__body",children:[(0,Ne.jsx)("h1",{children:"Maybe it's time to upgrade Premium \ud83d\ude0d\ud83d\ude0f"}),(0,Ne.jsxs)("div",{className:"profileScreen__info",children:[(0,Ne.jsx)("img",{src:"https://i.pinimg.com/474x/44/78/1b/44781ba4ac0c63f2ecf0793a533bf8dc.jpg",alt:""}),(0,Ne.jsxs)("div",{className:"profileScreen__details",children:[(0,Ne.jsx)("h2",{children:e.email}),(0,Ne.jsxs)("div",{className:"profileScreen__plans",children:[(0,Ne.jsx)("h3",{children:"Plans"}),(0,Ne.jsx)(lx,{}),(0,Ne.jsx)("button",{onClick:()=>sk.signOut(),className:"profileScreen__signOut",children:"Sign Out"})]})]})]})]})]})};const hx=function(){const e=y(ax),t=C();return(0,r.useEffect)((()=>sk.onAuthStateChanged((e=>{t(e?sx({uid:e.uid,email:e.email}):ox())}))),[t]),(0,Ne.jsx)("div",{className:"App",children:(0,Ne.jsx)(lk,{children:e?(0,Ne.jsxs)(Ce,{children:[(0,Ne.jsx)(_e,{path:"/profile",component:ux}),(0,Ne.jsx)(_e,{path:"/plans",component:lx}),(0,Ne.jsx)(_e,{exact:!0,path:"/",component:kn})]}):(0,Ne.jsx)(ck,{})})})},dx=function(e){const t=function(e){const{thunk:t=!0,immutableCheck:n=!0,serializableCheck:r=!0,actionCreatorCheck:i=!0}=null!==e&&void 0!==e?e:{};let s=new OC;return t&&(function(e){return"boolean"===typeof e}(t)?s.push(xC):s.push(NC(t.extraArgument))),s},{reducer:n,middleware:r,devTools:i=!0,preloadedState:s,enhancers:o}=e||{};let a,c;if("function"===typeof n)a=n;else{if(!EC(n))throw new Error(rx(1));a=TC(n)}c="function"===typeof r?r(t):t();let l=kC;i&&(l=AC({trace:!1,..."object"===typeof i&&i}));const u=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return e=>(n,r)=>{const i=e(n,r);let s=()=>{throw new Error(wC(15))};const o={getState:i.getState,dispatch:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return s(e,...n)}},a=t.map((e=>e(o)));return s=kC(...a)(i.dispatch),{...i,dispatch:s}}}(...c),h=UC(u);let d="function"===typeof o?o(h):h();return IC(a,s,l(...d))}({reducer:{user:cx}}),fx=e=>{e&&e instanceof Function&&n.e(453).then(n.bind(n,453)).then((t=>{let{getCLS:n,getFID:r,getFCP:i,getLCP:s,getTTFB:o}=t;n(e),r(e),i(e),s(e),o(e)}))};i.createRoot(document.getElementById("root")).render((0,Ne.jsx)(r.StrictMode,{children:(0,Ne.jsx)(S,{store:dx,children:(0,Ne.jsx)(hx,{})})})),fx()})()})();
//# sourceMappingURL=main.ac5b6d36.js.map